{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/log.ts"],"sourcesContent":["// lib/log.ts\n/**\n * Structured logging with Pino for production observability\n *\n * Replaces console.log with structured JSON logging for:\n * - Metrics aggregation (rate_limit.rejections, auth.redirects, etc.)\n * - Alerting (SLO violations)\n * - Debugging (correlated request tracing)\n */\n\nimport pino from \"pino\";\n\n// Configure Pino with production-safe settings\nconst inEdge = typeof (globalThis as { EdgeRuntime?: unknown }).EdgeRuntime !== \"undefined\";\nconst useTransport =\n  !inEdge &&\n  process.env.PINO_TRANSPORT !== \"none\" &&\n  process.env.NODE_ENV === \"production\"; // use worker only in prod\n\nexport const log = pino({\n  level: process.env.LOG_LEVEL ?? \"info\",\n  redact: {\n    paths: [\n      \"req.headers.authorization\",\n      \"req.headers.cookie\",\n      \"req.body.password\",\n      \"req.body.confirmPassword\",\n      \"password\",\n      \"token\"\n    ],\n    censor: \"[redacted]\"\n  },\n  // Add hostname and service name for multi-service correlation\n  base: {\n    service: \"senior-dog-rescue\",\n    hostname: process.env.HOSTNAME || \"unknown\",\n  },\n  // Pretty print in development for readability (but avoid worker transport)\n  ...(useTransport && {\n    transport: {\n      target: \"pino-pretty\",\n      options: {\n        colorize: true,\n        translateTime: \"SYS:standard\",\n        ignore: \"hostname,pid\",\n      },\n    },\n  }),\n});\n\n// Metric helpers for SLO tracking\nexport const metrics = {\n  // Rate limiting metrics\n  rateLimitRejection: (route: string, ipHash: string, userId?: string) =>\n    log.warn({\n      metric: \"rate_limit.rejections\",\n      route,\n      ipHash,\n      userId,\n      value: 1,\n    }, \"Rate limit exceeded\"),\n\n  // Authentication metrics\n  authRedirect: (route: string, reason: \"no_session\" | \"insufficient_role\", userRole?: string) =>\n    log.info({\n      metric: \"auth.redirects\",\n      route,\n      reason,\n      userRole,\n      value: 1,\n    }, \"Authentication redirect\"),\n\n  // Image security metrics\n  unknownImageHostRejection: (host: string, route: string) =>\n    log.warn({\n      metric: \"unknown_image_host_rejections\",\n      host,\n      route,\n      value: 1,\n    }, \"Unknown image host rejected\"),\n\n  // API latency metrics (p50/p95 tracking)\n  apiLatency: (route: string, method: string, statusCode: number, durationMs: number, userRole?: string) =>\n    log.info({\n      metric: \"api.latency_ms\",\n      route,\n      method,\n      statusCode,\n      durationMs,\n      userRole,\n      value: durationMs,\n    }, \"API request completed\"),\n\n  // Error metrics\n  serverError: (route: string, error: string, statusCode: number) =>\n    log.error({\n      metric: \"server.errors\",\n      route,\n      error,\n      statusCode,\n      value: 1,\n    }, \"Server error occurred\"),\n};\n\n// Helper to create child loggers with context\nexport function createRequestLogger(requestId: string, route: string) {\n  return log.child({\n    requestId,\n    route,\n  });\n}\n"],"names":[],"mappings":"AAAA,aAAa;AACb;;;;;;;CAOC;;;;;;;;AAED;;AAEA,+CAA+C;AAC/C,MAAM,SAAS,OAAO,AAAC,WAAyC,WAAW,KAAK;AAChF,MAAM,eACJ,CAAC,UACD,QAAQ,GAAG,CAAC,cAAc,KAAK,UAC/B,oDAAyB,cAAc,0BAA0B;AAE5D,MAAM,MAAM,IAAA,uIAAI,EAAC;IACtB,OAAO,QAAQ,GAAG,CAAC,SAAS,IAAI;IAChC,QAAQ;QACN,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;SACD;QACD,QAAQ;IACV;IACA,8DAA8D;IAC9D,MAAM;QACJ,SAAS;QACT,UAAU,QAAQ,GAAG,CAAC,QAAQ,IAAI;IACpC;IACA,2EAA2E;IAC3E,GAAI,gBAAgB;QAClB,WAAW;YACT,QAAQ;YACR,SAAS;gBACP,UAAU;gBACV,eAAe;gBACf,QAAQ;YACV;QACF;IACF,CAAC;AACH;AAGO,MAAM,UAAU;IACrB,wBAAwB;IACxB,oBAAoB,CAAC,OAAe,QAAgB,SAClD,IAAI,IAAI,CAAC;YACP,QAAQ;YACR;YACA;YACA;YACA,OAAO;QACT,GAAG;IAEL,yBAAyB;IACzB,cAAc,CAAC,OAAe,QAA4C,WACxE,IAAI,IAAI,CAAC;YACP,QAAQ;YACR;YACA;YACA;YACA,OAAO;QACT,GAAG;IAEL,yBAAyB;IACzB,2BAA2B,CAAC,MAAc,QACxC,IAAI,IAAI,CAAC;YACP,QAAQ;YACR;YACA;YACA,OAAO;QACT,GAAG;IAEL,yCAAyC;IACzC,YAAY,CAAC,OAAe,QAAgB,YAAoB,YAAoB,WAClF,IAAI,IAAI,CAAC;YACP,QAAQ;YACR;YACA;YACA;YACA;YACA;YACA,OAAO;QACT,GAAG;IAEL,gBAAgB;IAChB,aAAa,CAAC,OAAe,OAAe,aAC1C,IAAI,KAAK,CAAC;YACR,QAAQ;YACR;YACA;YACA;YACA,OAAO;QACT,GAAG;AACP;AAGO,SAAS,oBAAoB,SAAiB,EAAE,KAAa;IAClE,OAAO,IAAI,KAAK,CAAC;QACf;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/image-loader.ts"],"sourcesContent":["// lib/image-loader.ts\n// Custom Next.js Image loader with telemetry for domain validation\n\nimport { metrics } from \"@/lib/log\";\n\n// Allowed domains from next.config.ts for reference\nconst ALLOWED_DOMAINS = [\n  'via.placeholder.com',\n  'picsum.photos',\n  'scontent.xx.fbcdn.net',\n  'external.xx.fbcdn.net',\n  'dl5zpyw5k3jeb.cloudfront.net',\n  'assets.adoptapet.com',\n  'muttville.org',\n  // Supabase domain will be added dynamically below\n];\n\nexport default function imageLoader({ src, width, quality }: {\n  src: string;\n  width: number;\n  quality?: number;\n}) {\n  // Extract hostname from src URL for telemetry\n  try {\n    const url = new URL(src);\n    const hostname = url.hostname;\n\n    // Get Supabase hostname if available\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\n    let supabaseHostname: string | null = null;\n    if (supabaseUrl) {\n      try {\n        supabaseHostname = new URL(supabaseUrl).hostname;\n      } catch {\n        // Invalid Supabase URL\n      }\n    }\n\n    const allAllowedDomains = supabaseHostname\n      ? [...ALLOWED_DOMAINS, supabaseHostname]\n      : ALLOWED_DOMAINS;\n\n    // Check if domain is in allowlist\n    const isAllowed = allAllowedDomains.some(allowed => {\n      if (allowed.includes('xx')) {\n        // Handle Facebook's region-specific domains\n        return hostname.includes('fbcdn.net');\n      }\n      return hostname === allowed || hostname === 'localhost'; // Allow localhost for development\n    });\n\n    if (!isAllowed) {\n      // Emit SLO metric for unknown image host rejections\n      metrics.unknownImageHostRejection(hostname, 'image-loader');\n\n      const errorMsg = `[ImageLoader] ðŸš« Domain not allowed: ${hostname}. Add to next.config.ts remotePatterns if legitimate.`;\n      console.error(errorMsg);\n      console.error(`[ImageLoader] Allowed domains: ${allAllowedDomains.join(', ')}`);\n      console.error(`[ImageLoader] Image source: ${src}`);\n\n      // In development, this will help catch configuration issues early\n      if (process.env.NODE_ENV === 'development') {\n        console.error(`[ImageLoader] To fix: Add '${hostname}' to remotePatterns in next.config.ts`);\n      }\n    } else {\n      // Log allowed domain usage for monitoring\n      console.log(`[ImageLoader] âœ… Loading image from allowed domain: ${hostname}`);\n    }\n\n    // In development, warn about potentially problematic sources\n    if (process.env.NODE_ENV === 'development') {\n      const suspiciousPatterns = ['http:', 'localhost', '127.0.0.1', '0.0.0.0'];\n      const isSuspicious = suspiciousPatterns.some(pattern => src.includes(pattern));\n\n      if (isSuspicious) {\n        console.warn(`[ImageLoader] âš ï¸  Suspicious image source (allowed but review): ${src}`);\n      }\n    }\n  } catch (error) {\n    // If URL parsing fails, log the error for debugging\n    console.error(`[ImageLoader] Failed to parse image URL: ${src}`, error);\n  }\n\n  // Use Next.js default loader behavior\n  return `${src}?w=${width}&q=${quality || 75}`;\n}\n"],"names":[],"mappings":"AAAA,sBAAsB;AACtB,mEAAmE;;;;;AAEnE;;AAEA,oDAAoD;AACpD,MAAM,kBAAkB;IACtB;IACA;IACA;IACA;IACA;IACA;IACA;CAED;AAEc,SAAS,YAAY,EAAE,GAAG,EAAE,KAAK,EAAE,OAAO,EAIxD;IACC,8CAA8C;IAC9C,IAAI;QACF,MAAM,MAAM,IAAI,IAAI;QACpB,MAAM,WAAW,IAAI,QAAQ;QAE7B,qCAAqC;QACrC,MAAM;QACN,IAAI,mBAAkC;QACtC,wCAAiB;YACf,IAAI;gBACF,mBAAmB,IAAI,IAAI,aAAa,QAAQ;YAClD,EAAE,OAAM;YACN,uBAAuB;YACzB;QACF;QAEA,MAAM,oBAAoB,mBACtB;eAAI;YAAiB;SAAiB,GACtC;QAEJ,kCAAkC;QAClC,MAAM,YAAY,kBAAkB,IAAI,CAAC,CAAA;YACvC,IAAI,QAAQ,QAAQ,CAAC,OAAO;gBAC1B,4CAA4C;gBAC5C,OAAO,SAAS,QAAQ,CAAC;YAC3B;YACA,OAAO,aAAa,WAAW,aAAa,aAAa,kCAAkC;QAC7F;QAEA,IAAI,CAAC,WAAW;YACd,oDAAoD;YACpD,qHAAO,CAAC,yBAAyB,CAAC,UAAU;YAE5C,MAAM,WAAW,CAAC,qCAAqC,EAAE,SAAS,qDAAqD,CAAC;YACxH,QAAQ,KAAK,CAAC;YACd,QAAQ,KAAK,CAAC,CAAC,+BAA+B,EAAE,kBAAkB,IAAI,CAAC,OAAO;YAC9E,QAAQ,KAAK,CAAC,CAAC,4BAA4B,EAAE,KAAK;YAElD,kEAAkE;YAClE,wCAA4C;gBAC1C,QAAQ,KAAK,CAAC,CAAC,2BAA2B,EAAE,SAAS,qCAAqC,CAAC;YAC7F;QACF,OAAO;YACL,0CAA0C;YAC1C,QAAQ,GAAG,CAAC,CAAC,mDAAmD,EAAE,UAAU;QAC9E;QAEA,6DAA6D;QAC7D,wCAA4C;YAC1C,MAAM,qBAAqB;gBAAC;gBAAS;gBAAa;gBAAa;aAAU;YACzE,MAAM,eAAe,mBAAmB,IAAI,CAAC,CAAA,UAAW,IAAI,QAAQ,CAAC;YAErE,IAAI,cAAc;gBAChB,QAAQ,IAAI,CAAC,CAAC,gEAAgE,EAAE,KAAK;YACvF;QACF;IACF,EAAE,OAAO,OAAO;QACd,oDAAoD;QACpD,QAAQ,KAAK,CAAC,CAAC,yCAAyC,EAAE,KAAK,EAAE;IACnE;IAEA,sCAAsC;IACtC,OAAO,GAAG,IAAI,GAAG,EAAE,MAAM,GAAG,EAAE,WAAW,IAAI;AAC/C","debugId":null}},
    {"offset": {"line": 268, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/utils/index.ts"],"sourcesContent":["// lib/utils/index.ts\n// Shared utility functions for the application\n\nimport { AppStatus, AppType } from \"@prisma/client\";\n\n/**\n * Humanize enum values by replacing underscores with spaces and capitalizing words\n */\nexport const humanizeEnum = (value: string): string => {\n  return value\n    .toLowerCase()\n    .replace(/_/g, ' ')\n    .replace(/\\b\\w/g, l => l.toUpperCase());\n};\n\n/**\n * Status variant functions for consistent badge styling\n */\nexport const getAppStatusVariant = (status: AppStatus) => {\n  switch (status) {\n    case \"APPROVED\": return \"default\";\n    case \"SUBMITTED\": case \"IN_REVIEW\": return \"secondary\";\n    case \"REJECTED\": return \"destructive\";\n    default: return \"outline\";\n  }\n};\n\n/**\n * Get allowed status transitions for applications\n */\nexport const getAllowedStatuses = (applicationType: AppType, currentStatus?: AppStatus): AppStatus[] => {\n  const allStatuses = Object.values(AppStatus);\n\n  // For foster applications, restrict some status transitions\n  if (applicationType === AppType.FOSTER) {\n    // Fosters can be approved (creates foster profile) or rejected\n    // Can't be marked as \"IN_REVIEW\" inappropriately\n    return allStatuses.filter(status =>\n      status !== AppStatus.IN_REVIEW || currentStatus === AppStatus.IN_REVIEW\n    );\n  }\n\n  // For adoption applications, all statuses are allowed\n  return allStatuses;\n};\n\n/**\n * Check if status change notes are required for a given status\n */\nexport const areStatusNotesRequired = (status: AppStatus): boolean => {\n  return status === AppStatus.APPROVED || status === AppStatus.REJECTED;\n};\n"],"names":[],"mappings":"AAAA,qBAAqB;AACrB,+CAA+C;;;;;;;;;;;AAE/C;;AAKO,MAAM,eAAe,CAAC;IAC3B,OAAO,MACJ,WAAW,GACX,OAAO,CAAC,MAAM,KACd,OAAO,CAAC,SAAS,CAAA,IAAK,EAAE,WAAW;AACxC;AAKO,MAAM,sBAAsB,CAAC;IAClC,OAAQ;QACN,KAAK;YAAY,OAAO;QACxB,KAAK;QAAa,KAAK;YAAa,OAAO;QAC3C,KAAK;YAAY,OAAO;QACxB;YAAS,OAAO;IAClB;AACF;AAKO,MAAM,qBAAqB,CAAC,iBAA0B;IAC3D,MAAM,cAAc,OAAO,MAAM,CAAC,0IAAS;IAE3C,4DAA4D;IAC5D,IAAI,oBAAoB,wIAAO,CAAC,MAAM,EAAE;QACtC,+DAA+D;QAC/D,iDAAiD;QACjD,OAAO,YAAY,MAAM,CAAC,CAAA,SACxB,WAAW,0IAAS,CAAC,SAAS,IAAI,kBAAkB,0IAAS,CAAC,SAAS;IAE3E;IAEA,sDAAsD;IACtD,OAAO;AACT;AAKO,MAAM,yBAAyB,CAAC;IACrC,OAAO,WAAW,0IAAS,CAAC,QAAQ,IAAI,WAAW,0IAAS,CAAC,QAAQ;AACvE","debugId":null}},
    {"offset": {"line": 316, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { AppStatus, AppType, DogStatus } from \"@prisma/client\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\n\n// This check can be removed, it is just for tutorial purposes\nexport const hasEnvVars =\n  !!(process.env.NEXT_PUBLIC_SUPABASE_URL &&\n     process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);\n\n\nexport const getDogStatusVariant = (status: DogStatus) => {\n  switch (status) {\n    case \"ADOPTED\": return \"default\";\n    case \"AVAILABLE\": return \"secondary\";\n    case \"MEDICAL_HOLD\": return \"destructive\";\n    case \"PENDING\": case \"IN_FOSTER\": return \"outline\";\n    default: return \"secondary\";\n  }\n};\n\n// Date formatting utilities\nexport const formatDateTime = (date: Date) =>\n  new Intl.DateTimeFormat(\"en-US\", {\n    month: \"short\",\n    day: \"numeric\",\n    year: \"numeric\",\n    hour: \"numeric\",\n    minute: \"2-digit\",\n  }).format(date);\n\nexport const formatDateRange = (start: Date, end: Date) => {\n  const sameDay =\n    start.getFullYear() === end.getFullYear() &&\n    start.getMonth() === end.getMonth() &&\n    start.getDate() === end.getDate();\n\n  if (sameDay) {\n    return `${formatDateTime(start)} â€“ ${new Intl.DateTimeFormat(\"en-US\", {\n      hour: \"numeric\",\n      minute: \"2-digit\",\n    }).format(end)}`;\n  }\n\n  return `${formatDateTime(start)} â†’ ${formatDateTime(end)}`;\n};\n\nexport const formatShiftTime = (start: Date, end: Date): string => {\n  const startDate = start.toLocaleDateString();\n  const startTime = start.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });\n  const endTime = end.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });\n\n  if (startDate === end.toLocaleDateString()) {\n    return `${startDate}, ${startTime} - ${endTime}`;\n  }\n  return `${startDate}, ${startTime} - ${end.toLocaleDateString()}, ${endTime}`;\n};\n\nexport const formatAdoptionDate = (date: Date) =>\n  new Intl.DateTimeFormat(\"en-US\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n  }).format(date);\n\n// Re-export shared utilities\nexport { humanizeEnum, getAppStatusVariant, getAllowedStatuses, areStatusNotesRequired } from './utils/index';\n\n// Test endpoint validation - allow in test environment or with test secret header\nexport function validateTestEndpoint(request: Request): { isValid: boolean; response?: Response } {\n  const isTestEnv = process.env.NODE_ENV === 'test' && process.env.EXPOSE_TEST_API === '1';\n\n  const testSecret = request.headers.get('x-test-secret');\n  const expectedSecret = process.env.TEST_SECRET || 'test-secret-default';\n  const hasValidTestSecret = testSecret === expectedSecret;\n\n  if (!isTestEnv || !hasValidTestSecret) {\n    return {\n      isValid: false,\n      response: new Response(null, { status: 404 })\n    };\n  }\n\n  return { isValid: true };\n}\n\n// Route definitions have been moved to lib/routes.ts\n// Import route functions from @/lib/routes instead\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AAqEA,6BAA6B;AAC7B;;;AAlEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB;AAIO,MAAM,aACX,CAAC,CAAC,CAAC,kKACyC;AAGvC,MAAM,sBAAsB,CAAC;IAClC,OAAQ;QACN,KAAK;YAAW,OAAO;QACvB,KAAK;YAAa,OAAO;QACzB,KAAK;YAAgB,OAAO;QAC5B,KAAK;QAAW,KAAK;YAAa,OAAO;QACzC;YAAS,OAAO;IAClB;AACF;AAGO,MAAM,iBAAiB,CAAC,OAC7B,IAAI,KAAK,cAAc,CAAC,SAAS;QAC/B,OAAO;QACP,KAAK;QACL,MAAM;QACN,MAAM;QACN,QAAQ;IACV,GAAG,MAAM,CAAC;AAEL,MAAM,kBAAkB,CAAC,OAAa;IAC3C,MAAM,UACJ,MAAM,WAAW,OAAO,IAAI,WAAW,MACvC,MAAM,QAAQ,OAAO,IAAI,QAAQ,MACjC,MAAM,OAAO,OAAO,IAAI,OAAO;IAEjC,IAAI,SAAS;QACX,OAAO,GAAG,eAAe,OAAO,GAAG,EAAE,IAAI,KAAK,cAAc,CAAC,SAAS;YACpE,MAAM;YACN,QAAQ;QACV,GAAG,MAAM,CAAC,MAAM;IAClB;IAEA,OAAO,GAAG,eAAe,OAAO,GAAG,EAAE,eAAe,MAAM;AAC5D;AAEO,MAAM,kBAAkB,CAAC,OAAa;IAC3C,MAAM,YAAY,MAAM,kBAAkB;IAC1C,MAAM,YAAY,MAAM,kBAAkB,CAAC,EAAE,EAAE;QAAE,MAAM;QAAW,QAAQ;IAAU;IACpF,MAAM,UAAU,IAAI,kBAAkB,CAAC,EAAE,EAAE;QAAE,MAAM;QAAW,QAAQ;IAAU;IAEhF,IAAI,cAAc,IAAI,kBAAkB,IAAI;QAC1C,OAAO,GAAG,UAAU,EAAE,EAAE,UAAU,GAAG,EAAE,SAAS;IAClD;IACA,OAAO,GAAG,UAAU,EAAE,EAAE,UAAU,GAAG,EAAE,IAAI,kBAAkB,GAAG,EAAE,EAAE,SAAS;AAC/E;AAEO,MAAM,qBAAqB,CAAC,OACjC,IAAI,KAAK,cAAc,CAAC,SAAS;QAC/B,MAAM;QACN,OAAO;QACP,KAAK;IACP,GAAG,MAAM,CAAC;;AAML,SAAS,qBAAqB,OAAgB;IACnD,MAAM,YAAY,oDAAyB,UAAU,QAAQ,GAAG,CAAC,eAAe,KAAK;IAErF,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;IACvC,MAAM,iBAAiB,QAAQ,GAAG,CAAC,WAAW,IAAI;IAClD,MAAM,qBAAqB,eAAe;IAE1C,wCAAuC;QACrC,OAAO;YACL,SAAS;YACT,UAAU,IAAI,SAAS,MAAM;gBAAE,QAAQ;YAAI;QAC7C;IACF;;;AAGF,EAEA,qDAAqD;CACrD,mDAAmD","debugId":null}},
    {"offset": {"line": 418, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className,\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n));\nCardTitle.displayName = \"CardTitle\";\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\";\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n));\nCardFooter.displayName = \"CardFooter\";\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kIAAE,EACX,yDACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kIAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kIAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kIAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,kIAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kIAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 503, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants };\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,wKACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,IAAA,kIAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE","debugId":null}},
    {"offset": {"line": 545, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/constants/images.ts"],"sourcesContent":["export const NO_PHOTO_DATA_URI =\n  'data:image/svg+xml;utf8,' +\n  encodeURIComponent(\n    `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"600\" height=\"400\"><rect width=\"100%\" height=\"100%\" fill=\"#eee\"/><text x=\"50%\" y=\"50%\" dominant-baseline=\"middle\" text-anchor=\"middle\" font-family=\"system-ui,Arial\" font-size=\"24\" fill=\"#666\">No Photo</text></svg>`\n  );\n"],"names":[],"mappings":";;;;AAAO,MAAM,oBACX,6BACA,mBACE,CAAC,mQAAmQ,CAAC","debugId":null}},
    {"offset": {"line": 554, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/format.ts"],"sourcesContent":["/**\n * Formatting utilities for consistent display of missing/null values and dog data formatting\n */\n\nimport { calculateAge } from \"./utils/dog-utils\";\nimport { humanizeEnum } from \"./utils\";\nimport { Gender, DogSize } from \"@prisma/client\";\n\n/**\n * Returns the value if it's truthy and non-empty, otherwise returns the fallback\n */\nexport const missing = (value: string | null | undefined, fallback = 'N/A'): string =>\n  value && value.trim() !== '' ? value : fallback;\n\n/**\n * Format dog age for display\n */\nexport const formatDogAge = (dateOfBirth: Date | null): string => {\n  if (!dateOfBirth) return missing(null);\n  const age = calculateAge(dateOfBirth);\n  return age ? `${age} years` : missing(null);\n};\n\n/**\n * Format dog gender for display\n */\nexport const formatDogGender = (gender: Gender | null): string => {\n  return gender ? humanizeEnum(gender) : missing(null);\n};\n\n/**\n * Format dog size for display\n */\nexport const formatDogSize = (size: DogSize | null): string => {\n  return size ? humanizeEnum(size) : missing(null);\n};\n\n/**\n * Format dog weight for display\n */\nexport const formatDogWeight = (weightLbs: number | null): string => {\n  return weightLbs ? `${weightLbs} lbs` : missing(null);\n};\n\n/**\n * Format date for display (e.g., \"Jan 15, 2024\")\n */\nexport const formatDisplayDate = (date: Date): string => {\n  return new Date(date).toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  });\n};\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;AAED;AACA;AAAA;;;AAMO,MAAM,UAAU,CAAC,OAAkC,WAAW,KAAK,GACxE,SAAS,MAAM,IAAI,OAAO,KAAK,QAAQ;AAKlC,MAAM,eAAe,CAAC;IAC3B,IAAI,CAAC,aAAa,OAAO,QAAQ;IACjC,MAAM,MAAM,IAAA,4IAAY,EAAC;IACzB,OAAO,MAAM,GAAG,IAAI,MAAM,CAAC,GAAG,QAAQ;AACxC;AAKO,MAAM,kBAAkB,CAAC;IAC9B,OAAO,SAAS,IAAA,qIAAY,EAAC,UAAU,QAAQ;AACjD;AAKO,MAAM,gBAAgB,CAAC;IAC5B,OAAO,OAAO,IAAA,qIAAY,EAAC,QAAQ,QAAQ;AAC7C;AAKO,MAAM,kBAAkB,CAAC;IAC9B,OAAO,YAAY,GAAG,UAAU,IAAI,CAAC,GAAG,QAAQ;AAClD;AAKO,MAAM,oBAAoB,CAAC;IAChC,OAAO,IAAI,KAAK,MAAM,kBAAkB,CAAC,SAAS;QAChD,MAAM;QACN,OAAO;QACP,KAAK;IACP;AACF","debugId":null}},
    {"offset": {"line": 601, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/app/adopt/_components/DogGallery.tsx"],"sourcesContent":["import Image from \"next/image\";\nimport Link from \"next/link\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { NO_PHOTO_DATA_URI } from \"@/lib/constants/images\";\nimport { calculateAge, isSenior } from \"@/lib/utils/dog-utils\";\nimport { missing } from \"@/lib/format\";\nimport type { PublicDogListItem } from \"@/lib/types\";\n\nexport function DogGallery({ dogs }: { dogs: PublicDogListItem[] }) {\n  return (\n    <section data-testid=\"dog-cards-container\">\n      {dogs.length === 0 ? (\n        <p data-testid=\"dog-cards-empty\" className=\"text-center text-muted-foreground\">\n          All our dogs are currently in foster or pending adoption. Please check back soon!\n        </p>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {dogs.map((dog) => (\n            <Link key={dog.id} href={`/adopt/${dog.id}`} className=\"block\">\n              <Card data-dog-id={dog.mutt_id} data-testid=\"dog-card\" className=\"flex flex-col\">\n                <CardHeader>\n                  <CardTitle className=\"text-2xl\">{dog.name}</CardTitle>\n                  <CardDescription>\n                    {dog.breed}\n                    {calculateAge(dog.dateOfBirth) ? ` | ${calculateAge(dog.dateOfBirth)} years old` : \"\"}\n                    {(dog.gender || dog.size || dog.weight_lbs) && (\n                      <div className=\"mt-1 text-sm\">\n                        {[\n                          dog.gender && `${dog.gender === 'MALE' ? 'Male' : dog.gender === 'FEMALE' ? 'Female' : missing(null, 'Unknown')}`,\n                          dog.size && `${dog.size.charAt(0).toUpperCase() + dog.size.slice(1).toLowerCase()}`,\n                          dog.weight_lbs && `${dog.weight_lbs} lbs`\n                        ].filter(Boolean).join(' â€¢ ')}\n                      </div>\n                    )}\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"flex-1 flex flex-col justify-between\">\n                  <div>\n                    <div className=\"relative w-full h-48 bg-muted rounded-md mb-4 overflow-hidden\">\n                      <Image\n                        src={dog.primaryPhotoUrl || NO_PHOTO_DATA_URI}\n                        alt={`Photo of ${dog.name}`}\n                        fill\n                        sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n                        style={{ objectFit: 'cover' }}\n                        priority={dogs.indexOf(dog) < 3}\n                      />\n                    </div>\n\n                     {(dog.specialNeeds || isSenior(dog.dateOfBirth)) && (\n                      <Badge variant=\"destructive\" className=\"mb-2\">Special Needs</Badge>\n                    )}\n                     <p className=\"text-foreground mb-4 line-clamp-3\">\n                      {dog.bioPublic || \"No bio yet. Check back soon!\"}\n                    </p>\n                  </div>\n\n                  <div className=\"text-primary font-semibold hover:underline mt-auto\">\n                    Learn more about {dog.name}\n                  </div>\n                </CardContent>\n              </Card>\n            </Link>\n          ))}\n        </div>\n      )}\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AAGO,SAAS,WAAW,EAAE,IAAI,EAAiC;IAChE,qBACE,8OAAC;QAAQ,eAAY;kBAClB,KAAK,MAAM,KAAK,kBACf,8OAAC;YAAE,eAAY;YAAkB,WAAU;sBAAoC;;;;;iCAI/E,8OAAC;YAAI,WAAU;sBACZ,KAAK,GAAG,CAAC,CAAC,oBACT,8OAAC,0LAAI;oBAAc,MAAM,CAAC,OAAO,EAAE,IAAI,EAAE,EAAE;oBAAE,WAAU;8BACrD,cAAA,8OAAC,iIAAI;wBAAC,eAAa,IAAI,OAAO;wBAAE,eAAY;wBAAW,WAAU;;0CAC/D,8OAAC,uIAAU;;kDACT,8OAAC,sIAAS;wCAAC,WAAU;kDAAY,IAAI,IAAI;;;;;;kDACzC,8OAAC,4IAAe;;4CACb,IAAI,KAAK;4CACT,IAAA,4IAAY,EAAC,IAAI,WAAW,IAAI,CAAC,GAAG,EAAE,IAAA,4IAAY,EAAC,IAAI,WAAW,EAAE,UAAU,CAAC,GAAG;4CAClF,CAAC,IAAI,MAAM,IAAI,IAAI,IAAI,IAAI,IAAI,UAAU,mBACxC,8OAAC;gDAAI,WAAU;0DACZ;oDACC,IAAI,MAAM,IAAI,GAAG,IAAI,MAAM,KAAK,SAAS,SAAS,IAAI,MAAM,KAAK,WAAW,WAAW,IAAA,wHAAO,EAAC,MAAM,YAAY;oDACjH,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,WAAW,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,WAAW,IAAI;oDACnF,IAAI,UAAU,IAAI,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC;iDAC1C,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC;;;;;;;;;;;;;;;;;;0CAK/B,8OAAC,wIAAW;gCAAC,WAAU;;kDACrB,8OAAC;;0DACC,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC,wIAAK;oDACJ,KAAK,IAAI,eAAe,IAAI,+IAAiB;oDAC7C,KAAK,CAAC,SAAS,EAAE,IAAI,IAAI,EAAE;oDAC3B,IAAI;oDACJ,OAAM;oDACN,OAAO;wDAAE,WAAW;oDAAQ;oDAC5B,UAAU,KAAK,OAAO,CAAC,OAAO;;;;;;;;;;;4CAIhC,CAAC,IAAI,YAAY,IAAI,IAAA,wIAAQ,EAAC,IAAI,WAAW,CAAC,mBAC9C,8OAAC,mIAAK;gDAAC,SAAQ;gDAAc,WAAU;0DAAO;;;;;;0DAE/C,8OAAC;gDAAE,WAAU;0DACX,IAAI,SAAS,IAAI;;;;;;;;;;;;kDAItB,8OAAC;wCAAI,WAAU;;4CAAqD;4CAChD,IAAI,IAAI;;;;;;;;;;;;;;;;;;;mBAxCvB,IAAI,EAAE;;;;;;;;;;;;;;;AAkD7B","debugId":null}},
    {"offset": {"line": 772, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/app/adopt/_components/AdoptPagination.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/adopt/_components/AdoptPagination.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/adopt/_components/AdoptPagination.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA6S,GAC1U,2EACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 786, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/app/adopt/_components/AdoptPagination.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/adopt/_components/AdoptPagination.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/adopt/_components/AdoptPagination.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAyR,GACtT,uDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 800, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 808, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/app/adopt/_components/DogFilterUI.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/adopt/_components/DogFilterUI.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/adopt/_components/DogFilterUI.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAyS,GACtU,uEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 822, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/app/adopt/_components/DogFilterUI.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/adopt/_components/DogFilterUI.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/adopt/_components/DogFilterUI.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAqR,GAClT,mDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 836, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 844, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/components/testing/RouteReady.tsx"],"sourcesContent":["/**\n * RouteReady - A test sentinel component that marks when a route has finished loading.\n *\n * This component renders a visible element that Playwright can detect as visible,\n * while remaining visually unobtrusive to users. Used for E2E test synchronization.\n */\nexport function RouteReady({ route }: { route: string }) {\n  return (\n    <div\n      data-testid=\"route-ready\"\n      data-route={route}\n      aria-hidden=\"true\"\n      style={{\n        position: 'absolute',\n        width: 1,\n        height: 1,\n        top: 0,\n        left: 0,\n        opacity: 1, // Make visible for test detection\n        pointerEvents: 'none',\n        visibility: 'visible', // Ensure it's visible\n      }}\n    />\n  );\n}\n\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;;;AACM,SAAS,WAAW,EAAE,KAAK,EAAqB;IACrD,qBACE,8OAAC;QACC,eAAY;QACZ,cAAY;QACZ,eAAY;QACZ,OAAO;YACL,UAAU;YACV,OAAO;YACP,QAAQ;YACR,KAAK;YACL,MAAM;YACN,SAAS;YACT,eAAe;YACf,YAAY;QACd;;;;;;AAGN","debugId":null}},
    {"offset": {"line": 880, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/url.ts"],"sourcesContent":["// lib/url.ts\n// URL building utilities\n\n/**\n * Build URL query string from search parameters object\n */\nexport function buildQueryString(params: Record<string, string | undefined>): string {\n  const filteredParams = Object.entries(params)\n    .filter(([, value]) => value !== undefined && value !== '')\n    .reduce((acc, [key, value]) => {\n      acc[key] = value!;\n      return acc;\n    }, {} as Record<string, string>);\n\n  return new URLSearchParams(filteredParams).toString();\n}\n\n/**\n * Build full URL with query parameters\n */\nexport function buildUrl(baseUrl: string, params: Record<string, string | undefined>): string {\n  const queryString = buildQueryString(params);\n  return queryString ? `${baseUrl}?${queryString}` : baseUrl;\n}\n\n/**\n * Set or delete a parameter in URLSearchParams\n */\nexport const setParam = (\n  searchParams: URLSearchParams,\n  key: string,\n  value?: string | null,\n) => {\n  if (value && value.length > 0) {\n    searchParams.set(key, value);\n  } else {\n    searchParams.delete(key);\n  }\n};\n"],"names":[],"mappings":"AAAA,aAAa;AACb,yBAAyB;AAEzB;;CAEC;;;;;;;;AACM,SAAS,iBAAiB,MAA0C;IACzE,MAAM,iBAAiB,OAAO,OAAO,CAAC,QACnC,MAAM,CAAC,CAAC,GAAG,MAAM,GAAK,UAAU,aAAa,UAAU,IACvD,MAAM,CAAC,CAAC,KAAK,CAAC,KAAK,MAAM;QACxB,GAAG,CAAC,IAAI,GAAG;QACX,OAAO;IACT,GAAG,CAAC;IAEN,OAAO,IAAI,gBAAgB,gBAAgB,QAAQ;AACrD;AAKO,SAAS,SAAS,OAAe,EAAE,MAA0C;IAClF,MAAM,cAAc,iBAAiB;IACrC,OAAO,cAAc,GAAG,QAAQ,CAAC,EAAE,aAAa,GAAG;AACrD;AAKO,MAAM,WAAW,CACtB,cACA,KACA;IAEA,IAAI,SAAS,MAAM,MAAM,GAAG,GAAG;QAC7B,aAAa,GAAG,CAAC,KAAK;IACxB,OAAO;QACL,aAAa,MAAM,CAAC;IACtB;AACF","debugId":null}},
    {"offset": {"line": 914, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/url-pagination.ts"],"sourcesContent":["/**\n * Shared URL pagination utilities for consistent pagination across the application\n * Server-side utilities only - client-side hooks are in url-pagination-client.ts\n */\n\nimport { buildQueryString } from \"@/lib/url\";\n\nexport const PAGINATION_PARAMS = {\n  PAGE: \"page\",\n} as const;\n\n/**\n * Pagination data structure shared across the application\n */\nexport interface PaginationData {\n  currentPage: number;\n  totalPages: number;\n  totalCount: number;\n  hasNextPage: boolean;\n  hasPreviousPage: boolean;\n}\n\n/**\n * Utility function to parse page from search params with default value\n */\nexport function getCurrentPage(searchParams: URLSearchParams, defaultPage = 1): number {\n  const pageParam = searchParams.get(PAGINATION_PARAMS.PAGE);\n  if (!pageParam) return defaultPage;\n\n  const parsed = parseInt(pageParam, 10);\n  return isNaN(parsed) || parsed < 1 ? defaultPage : parsed;\n}\n\n/**\n * Generic helper for page parsing\n */\nexport function parsePageParam(raw: string | undefined, defaultPage = 1): number {\n  if (!raw) return defaultPage;\n  const parsed = parseInt(raw, 10);\n  return isNaN(parsed) || parsed < 1 ? defaultPage : parsed;\n}\n\n/**\n * Validated parameters for application filtering and pagination\n */\nexport interface ApplicationSearchParams {\n  page: number;\n  limit: number;\n  status?: string;\n  type?: string;\n  search?: string;\n  sortBy: string;\n  sortOrder: 'asc' | 'desc';\n}\n\n/**\n * Parse and validate application search parameters from URL search params\n */\nexport function parseApplicationSearchParams(searchParams: { [key: string]: string | undefined }): ApplicationSearchParams {\n  const validatedParams: ApplicationSearchParams = {\n    page: Math.max(1, parseInt(searchParams?.page || \"1\")),\n    limit: Math.min(100, Math.max(1, parseInt(searchParams?.limit || \"10\"))), // Max 100 per page\n    status: searchParams?.status,\n    type: searchParams?.type,\n    search: searchParams?.search?.trim(),\n    sortBy: searchParams?.sortBy || 'createdAt',\n    sortOrder: (searchParams?.sortOrder === 'asc' ? 'asc' : 'desc') as 'asc' | 'desc',\n  };\n\n  // Validate search term length to prevent abuse\n  if (validatedParams.search && validatedParams.search.length > 100) {\n    throw new Error(\"Search term too long\");\n  }\n\n  return validatedParams;\n}\n\n/**\n * Validated parameters for dog filtering and pagination\n */\nexport interface DogSearchParams {\n  page: number;\n  limit: number;\n  status?: string;\n  fosterProfileId?: string;\n  breed?: string;\n  gender?: string;\n  size?: string;\n  weightMin?: string;\n  weightMax?: string;\n  specialNeeds?: string;\n  hasPhotos?: string;\n  sortField: string;\n  sortDirection: 'asc' | 'desc';\n}\n\n/**\n * Convert Next.js searchParams (Promise) to plain object for dog queries\n * Handles the Promise<{ [key: string]: string | string[] | undefined }> format\n */\nexport function parseDogSearchParams(searchParams: { [key: string]: string | string[] | undefined }): { [key: string]: string } {\n  const result: { [key: string]: string } = {};\n\n  Object.entries(searchParams).forEach(([key, value]) => {\n    if (typeof value === 'string') {\n      result[key] = value;\n    } else if (Array.isArray(value) && value.length > 0) {\n      // Take the first value if it's an array (shouldn't happen for our use case)\n      result[key] = value[0];\n    }\n    // Skip undefined values\n  });\n\n  return result;\n}\n\n/**\n * Build query string for application export with all current filters\n */\nexport function buildApplicationExportQuery(params: ApplicationSearchParams, minimal: boolean): string {\n  const queryParams: Record<string, string | undefined> = {\n    page: params.page.toString(),\n    limit: params.limit.toString(),\n    status: params.status,\n    type: params.type,\n    search: params.search,\n    sortBy: params.sortBy,\n    sortOrder: params.sortOrder,\n  };\n\n  if (minimal) {\n    queryParams.minimal = 'true';\n  }\n\n  return buildQueryString(queryParams);\n}\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;;AAED;;AAEO,MAAM,oBAAoB;IAC/B,MAAM;AACR;AAgBO,SAAS,eAAe,YAA6B,EAAE,cAAc,CAAC;IAC3E,MAAM,YAAY,aAAa,GAAG,CAAC,kBAAkB,IAAI;IACzD,IAAI,CAAC,WAAW,OAAO;IAEvB,MAAM,SAAS,SAAS,WAAW;IACnC,OAAO,MAAM,WAAW,SAAS,IAAI,cAAc;AACrD;AAKO,SAAS,eAAe,GAAuB,EAAE,cAAc,CAAC;IACrE,IAAI,CAAC,KAAK,OAAO;IACjB,MAAM,SAAS,SAAS,KAAK;IAC7B,OAAO,MAAM,WAAW,SAAS,IAAI,cAAc;AACrD;AAkBO,SAAS,6BAA6B,YAAmD;IAC9F,MAAM,kBAA2C;QAC/C,MAAM,KAAK,GAAG,CAAC,GAAG,SAAS,cAAc,QAAQ;QACjD,OAAO,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,GAAG,SAAS,cAAc,SAAS;QACjE,QAAQ,cAAc;QACtB,MAAM,cAAc;QACpB,QAAQ,cAAc,QAAQ;QAC9B,QAAQ,cAAc,UAAU;QAChC,WAAY,cAAc,cAAc,QAAQ,QAAQ;IAC1D;IAEA,+CAA+C;IAC/C,IAAI,gBAAgB,MAAM,IAAI,gBAAgB,MAAM,CAAC,MAAM,GAAG,KAAK;QACjE,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT;AAyBO,SAAS,qBAAqB,YAA8D;IACjG,MAAM,SAAoC,CAAC;IAE3C,OAAO,OAAO,CAAC,cAAc,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM;QAChD,IAAI,OAAO,UAAU,UAAU;YAC7B,MAAM,CAAC,IAAI,GAAG;QAChB,OAAO,IAAI,MAAM,OAAO,CAAC,UAAU,MAAM,MAAM,GAAG,GAAG;YACnD,4EAA4E;YAC5E,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC,EAAE;QACxB;IACA,wBAAwB;IAC1B;IAEA,OAAO;AACT;AAKO,SAAS,4BAA4B,MAA+B,EAAE,OAAgB;IAC3F,MAAM,cAAkD;QACtD,MAAM,OAAO,IAAI,CAAC,QAAQ;QAC1B,OAAO,OAAO,KAAK,CAAC,QAAQ;QAC5B,QAAQ,OAAO,MAAM;QACrB,MAAM,OAAO,IAAI;QACjB,QAAQ,OAAO,MAAM;QACrB,QAAQ,OAAO,MAAM;QACrB,WAAW,OAAO,SAAS;IAC7B;IAEA,IAAI,SAAS;QACX,YAAY,OAAO,GAAG;IACxB;IAEA,OAAO,IAAA,8HAAgB,EAAC;AAC1B","debugId":null}},
    {"offset": {"line": 995, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/app/adopt/page.tsx"],"sourcesContent":["import { Suspense } from \"react\";\nimport { DogGallery } from \"./_components/DogGallery\";\nimport AdoptPagination from \"./_components/AdoptPagination\";\nimport { getAvailableDogs } from \"@/lib/actions/dog.actions\";\nimport { getUniqueBreeds, getUniqueGenders, getUniqueSizes } from \"@/lib/actions/dog.actions\";\nimport DogFilterUI from \"./_components/DogFilterUI\";\nimport { RouteReady } from \"@/components/testing/RouteReady\";\nimport { parseDogFilters } from \"@/lib/dog-filters\";\nimport { getCurrentPage } from \"@/lib/url-pagination\";\n\n\nexport default async function AdoptPage({ searchParams }: { searchParams: Promise<Record<string, string | undefined>> }) {\n  const rawParams = await searchParams;\n  const urlSearchParams = new URLSearchParams();\n  Object.entries(rawParams).forEach(([key, value]) => {\n    if (value) urlSearchParams.set(key, value);\n  });\n  const page = getCurrentPage(urlSearchParams);\n  const filters = parseDogFilters(urlSearchParams);\n\n  // Fetch data in parallel\n  const [\n    { dogs, pagination },\n    breeds,\n    sizes,\n    genders\n  ] = await Promise.all([\n    getAvailableDogs({ page, filters }),\n    getUniqueBreeds(),\n    getUniqueSizes(),\n    getUniqueGenders()\n  ]);\n\n  return (\n    <div className=\"mx-auto max-w-6xl px-4\">\n      {process.env.NEXT_PUBLIC_E2E === \"true\" && (\n        <RouteReady route=\"public/adopt\" />\n      )}\n      <h1 className=\"text-2xl font-semibold mb-4\">Meet Our Senior Dogs</h1>\n\n      <Suspense fallback={<div>Loading filters...</div>}>\n        <DogFilterUI breeds={breeds} sizes={sizes} genders={genders} />\n      </Suspense>\n\n      <DogGallery dogs={dogs} />\n      <AdoptPagination\n        currentPage={pagination.page}\n        totalPages={pagination.totalPages}\n        hasNextPage={pagination.hasNextPage}\n        hasPrevPage={pagination.hasPrevPage}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;AAGe,eAAe,UAAU,EAAE,YAAY,EAAiE;IACrH,MAAM,YAAY,MAAM;IACxB,MAAM,kBAAkB,IAAI;IAC5B,OAAO,OAAO,CAAC,WAAW,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM;QAC7C,IAAI,OAAO,gBAAgB,GAAG,CAAC,KAAK;IACtC;IACA,MAAM,OAAO,IAAA,0IAAc,EAAC;IAC5B,MAAM,UAAU,IAAA,wIAAe,EAAC;IAEhC,yBAAyB;IACzB,MAAM,CACJ,EAAE,IAAI,EAAE,UAAU,EAAE,EACpB,QACA,OACA,QACD,GAAG,MAAM,QAAQ,GAAG,CAAC;QACpB,IAAA,oJAAgB,EAAC;YAAE;YAAM;QAAQ;QACjC,IAAA,mJAAe;QACf,IAAA,kJAAc;QACd,IAAA,oJAAgB;KACjB;IAED,qBACE,8OAAC;QAAI,WAAU;;YACZ,QAAQ,GAAG,CAAC,eAAe,KAAK,wBAC/B,8OAAC,kJAAU;gBAAC,OAAM;;;;;;0BAEpB,8OAAC;gBAAG,WAAU;0BAA8B;;;;;;0BAE5C,8OAAC,iNAAQ;gBAAC,wBAAU,8OAAC;8BAAI;;;;;;0BACvB,cAAA,8OAAC,sJAAW;oBAAC,QAAQ;oBAAQ,OAAO;oBAAO,SAAS;;;;;;;;;;;0BAGtD,8OAAC,wJAAU;gBAAC,MAAM;;;;;;0BAClB,8OAAC,0JAAe;gBACd,aAAa,WAAW,IAAI;gBAC5B,YAAY,WAAW,UAAU;gBACjC,aAAa,WAAW,WAAW;gBACnC,aAAa,WAAW,WAAW;;;;;;;;;;;;AAI3C","debugId":null}}]
}