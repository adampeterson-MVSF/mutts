{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/zod/applicationSchema.ts"],"sourcesContent":["// lib/schemas/applicationSchema.ts\n\nimport { z } from \"zod\";\n\n// Profile fields (user account data)\nexport const profileSchema = z.object({\n  firstName: z.string().min(1, { message: \"First name is required.\" }),\n  lastName: z.string().min(1, { message: \"Last name is required.\" }),\n  email: z.string().email({ message: \"Please enter a valid email address.\" }),\n});\n\n// Applicant fields (application-specific data - moved from Profile to Application)\nexport const applicantSchema = z.object({\n  // --- Contact Fields ---\n  applicantPhone: z.string().optional(),\n\n  // --- Housing Fields ---\n  address: z.string().min(5, { message: \"Please enter a valid address.\" }),\n  housingType: z.enum([\"OWN_HOME\", \"RENT_HOME\", \"OWN_APT_CONDO\", \"RENT_APT_CONDO\", \"OTHER\"]),\n  hasYard: z.enum([\"YES\", \"NO\", \"SHARED\"]),\n  yardFenced: z.boolean(),\n  otherPets: z.string().optional(), // Description of other pets\n  vetName: z.string().optional(),\n  vetPhone: z.string().optional(),\n\n  // --- Home Environment Field ---\n  homeEnvironmentDescription: z.string().min(1, { message: \"Please describe your home environment.\" })\n});\n\nexport const applicationSchema = z.object({\n  // --- Application-specific Fields ---\n  reason: z.string().min(10, { message: \"Please provide a reason (min 10 characters).\" }),\n\n  // --- Relation IDs ---\n  dogId: z.number().int().positive().optional(),\n\n  // --- Reference Fields (relational data) ---\n  references: z.array(z.object({\n    name: z.string().min(1, \"Reference name is required.\"),\n    phone: z.string().optional(),\n    relationship: z.string().optional()\n  })).optional(),\n}).merge(applicantSchema.partial()); // Merge applicant fields as optional into application schema\n\nexport type ProfileFormData = z.infer<typeof profileSchema>;\nexport type ApplicationFormData = z.infer<typeof applicationSchema>;\nexport type ApplicantFormData = z.infer<typeof applicantSchema>;\n"],"names":[],"mappings":"AAAA,mCAAmC;;;;;;;;;AAEnC;;AAGO,MAAM,gBAAgB,kLAAC,CAAC,MAAM,CAAC;IACpC,WAAW,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAAE,SAAS;IAA0B;IAClE,UAAU,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAAE,SAAS;IAAyB;IAChE,OAAO,kLAAC,CAAC,MAAM,GAAG,KAAK,CAAC;QAAE,SAAS;IAAsC;AAC3E;AAGO,MAAM,kBAAkB,kLAAC,CAAC,MAAM,CAAC;IACtC,yBAAyB;IACzB,gBAAgB,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAEnC,yBAAyB;IACzB,SAAS,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAAE,SAAS;IAAgC;IACtE,aAAa,kLAAC,CAAC,IAAI,CAAC;QAAC;QAAY;QAAa;QAAiB;QAAkB;KAAQ;IACzF,SAAS,kLAAC,CAAC,IAAI,CAAC;QAAC;QAAO;QAAM;KAAS;IACvC,YAAY,kLAAC,CAAC,OAAO;IACrB,WAAW,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAC9B,SAAS,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAC5B,UAAU,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAE7B,iCAAiC;IACjC,4BAA4B,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAAE,SAAS;IAAyC;AACpG;AAEO,MAAM,oBAAoB,kLAAC,CAAC,MAAM,CAAC;IACxC,sCAAsC;IACtC,QAAQ,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI;QAAE,SAAS;IAA+C;IAErF,uBAAuB;IACvB,OAAO,kLAAC,CAAC,MAAM,GAAG,GAAG,GAAG,QAAQ,GAAG,QAAQ;IAE3C,6CAA6C;IAC7C,YAAY,kLAAC,CAAC,KAAK,CAAC,kLAAC,CAAC,MAAM,CAAC;QAC3B,MAAM,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QACxB,OAAO,kLAAC,CAAC,MAAM,GAAG,QAAQ;QAC1B,cAAc,kLAAC,CAAC,MAAM,GAAG,QAAQ;IACnC,IAAI,QAAQ;AACd,GAAG,KAAK,CAAC,gBAAgB,OAAO,KAAK,6DAA6D","debugId":null}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/zod/shift.schema.ts"],"sourcesContent":["// lib/schemas/shift.schema.ts\n\nimport { z } from \"zod\";\n\nexport const shiftSchema = z.object({\n  title: z.string().transform(s => s.trim()).refine(Boolean, 'Title required'),\n  description: z.string().optional(),\n  startsAt: z.string().min(1, 'Start time is required')\n    .refine((val) => !isNaN(Date.parse(val)), 'Invalid start time format'),\n  endsAt: z.string().min(1, 'End time is required')\n    .refine((val) => !isNaN(Date.parse(val)), 'Invalid end time format'),\n  capacity: z.preprocess((val) => val === '' || val === null || val === undefined ? null : Number(val), z.number().int().positive().nullable()),\n}).superRefine((v, ctx) => {\n  if (new Date(v.endsAt) <= new Date(v.startsAt)) {\n    ctx.addIssue({\n      code: z.ZodIssueCode.custom,\n      path: ['endsAt'],\n      message: 'Start time must be before end time',\n    })\n  }\n})\n\nexport type ShiftFormData = z.infer<typeof shiftSchema>;\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;AAE9B;;AAEO,MAAM,cAAc,kLAAC,CAAC,MAAM,CAAC;IAClC,OAAO,kLAAC,CAAC,MAAM,GAAG,SAAS,CAAC,CAAA,IAAK,EAAE,IAAI,IAAI,MAAM,CAAC,SAAS;IAC3D,aAAa,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAChC,UAAU,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,0BACzB,MAAM,CAAC,CAAC,MAAQ,CAAC,MAAM,KAAK,KAAK,CAAC,OAAO;IAC5C,QAAQ,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,wBACvB,MAAM,CAAC,CAAC,MAAQ,CAAC,MAAM,KAAK,KAAK,CAAC,OAAO;IAC5C,UAAU,kLAAC,CAAC,UAAU,CAAC,CAAC,MAAQ,QAAQ,MAAM,QAAQ,QAAQ,QAAQ,YAAY,OAAO,OAAO,MAAM,kLAAC,CAAC,MAAM,GAAG,GAAG,GAAG,QAAQ,GAAG,QAAQ;AAC5I,GAAG,WAAW,CAAC,CAAC,GAAG;IACjB,IAAI,IAAI,KAAK,EAAE,MAAM,KAAK,IAAI,KAAK,EAAE,QAAQ,GAAG;QAC9C,IAAI,QAAQ,CAAC;YACX,MAAM,kLAAC,CAAC,YAAY,CAAC,MAAM;YAC3B,MAAM;gBAAC;aAAS;YAChB,SAAS;QACX;IACF;AACF","debugId":null}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/schemas.ts"],"sourcesContent":["import { DogStatus, LogType } from \"@prisma/client\";\nimport { z } from \"zod\";\n\nconst emptyStringToNull = (value: unknown) => {\n  if (value === null || value === undefined) return null;\n  const str = String(value).trim();\n  return str.length > 0 && str !== \"none\" ? str : null;\n};\n\n\nconst checkboxValue = (value: unknown) =>\n  value === true || value === \"true\" || value === \"on\";\n\nexport const dogFormSchema = z.object({\n  name: z.string().min(1, { message: \"Name is required.\" }),\n  status: z.nativeEnum(DogStatus).optional(),\n  breed: z.preprocess(emptyStringToNull, z.string().nullable()),\n  dateOfBirth: z\n    .preprocess((value) => {\n      if (!value || value === '' || typeof value !== 'string' && typeof value !== 'number' && !(value instanceof Date)) return null;\n      const date = new Date(value);\n      return isNaN(date.getTime()) ? null : date;\n    }, z.date().nullable())\n    .nullable(),\n  bioPublic: z.preprocess(emptyStringToNull, z.string().nullable()),\n  notesInternal: z.preprocess(emptyStringToNull, z.string().nullable()),\n  fosterProfileId: z.preprocess((value) => {\n    if (value === null || value === undefined) return null;\n    const str = String(value).trim();\n    if (str.length === 0 || str === \"none\") return null;\n    return str; // Profile ID is a string\n  }, z.string().nullable()),\n  specialNeeds: z.preprocess(checkboxValue, z.boolean()),\n}).refine((data) => {\n  if (data.status === DogStatus.IN_FOSTER) {\n    return data.fosterProfileId !== null && data.fosterProfileId !== undefined && data.fosterProfileId.trim() !== '';\n  }\n  return true;\n}, {\n  message: \"Foster profile is required when status is IN_FOSTER\",\n  path: [\"fosterProfileId\"],\n});\n\nexport type DogFormInput = z.infer<typeof dogFormSchema>;\n\nexport const logEntrySchema = z.object({\n  dogId: z.coerce.number().int().positive({ message: \"Dog ID is required.\" }),\n  logType: z.nativeEnum(LogType),\n  notes: z.preprocess(emptyStringToNull, z.string().nullable()),\n});\n\nexport type LogEntryInput = z.infer<typeof logEntrySchema>;\n\nexport const shiftIdSchema = z.object({\n  shiftId: z\n    .preprocess((value) => {\n      const num = Number(value);\n      return Number.isFinite(num) ? num : Number.NaN;\n    },\n    z\n      .number({ message: \"Invalid shift ID\" })\n      .int({ message: \"Invalid shift ID\" })\n      .positive({ message: \"Invalid shift ID\" })),\n});\n\nexport type ShiftIdInput = z.infer<typeof shiftIdSchema>;\n\nexport const eventFormSchema = z\n  .object({\n    title: z.string().min(1, { message: \"Title is required.\" }),\n    description: z.preprocess(emptyStringToNull, z.string().nullable()),\n    startTime: z.string().min(1, { message: \"Start time is required.\" }),\n    endTime: z.string().min(1, { message: \"End time is required.\" }),\n    location: z.preprocess(emptyStringToNull, z.string().nullable()),\n    capacity: z.preprocess(emptyStringToNull, z.coerce.number().int().positive().nullable()),\n  })\n  .refine(\n    (data) => {\n      const start = Date.parse(data.startTime);\n      const end = Date.parse(data.endTime);\n      return !Number.isNaN(start) && !Number.isNaN(end) && start < end;\n    },\n    {\n      message: \"End time must be after start time.\",\n      path: [\"endTime\"],\n    },\n  );\n\nexport type EventFormInput = z.infer<typeof eventFormSchema>;\n\nexport { applicationSchema } from \"./zod/applicationSchema\";\nexport { shiftSchema } from \"./zod/shift.schema\";\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/actions/profile.actions.ts"],"sourcesContent":["// lib/actions/profile.actions.ts\n\"use server\";\n\nimport { revalidatePath } from \"next/cache\";\nimport { redirect } from \"next/navigation\";\nimport { prisma } from \"@/lib/prisma\";\nimport { UserRole } from \"@prisma/client\";\nimport { createClient } from \"@/lib/supabase/server\";\nimport { z } from \"zod\";\nimport { ActionResult } from \"@/lib/types\";\n\nconst createProfileSchema = z.object({\n  name: z.string().optional(),\n});\n\n\n// Add this new function\nexport async function getActingUser(\n  { requireAuth = true }: { requireAuth?: boolean } = {}\n) {\n  // Check for synthetic session headers first (set by middleware)\n  const { headers } = await import('next/headers');\n  const headerData = await headers();\n  const testUserId = headerData.get('x-test-user-id');\n  const testUserRole = headerData.get('x-test-user-role');\n\n  if (testUserId && testUserRole) {\n    // Return a mock/partial User object based on headers\n    return {\n      id: testUserId,\n      email: `test-${testUserRole.toLowerCase()}@example.test`,\n      app_metadata: { role: testUserRole as UserRole },\n    } as {\n      id: string;\n      email: string;\n      app_metadata: { role: UserRole };\n    };\n  }\n\n  const supabase = await createClient();\n  const { data: { user } } = await supabase.auth.getUser();\n\n  if (requireAuth && !user) {\n    redirect(\"/auth/login\");\n  }\n  return user;\n}\n\n// Add this new function\nexport async function requireRole(role: UserRole | UserRole[]) {\n  const user = await getActingUser();\n  if (!user) {\n    // This should be redundant due to getActingUser, but good for type safety\n    throw new Error(\"Authentication required.\");\n  }\n\n  const roles = Array.isArray(role) ? role : [role];\n  const userRole = await getActingUserRole(); // Assumes this queries the DB\n\n  // Role hierarchy: ADMIN can access everything\n  if (userRole === UserRole.ADMIN) {\n    return; // Admin has access to everything\n  }\n\n  if (!roles.includes(userRole)) {\n    throw new Error(\"Unauthorized.\");\n  }\n}\n\n// Defense-in-depth RBAC helper - throws on unauthorized access\nexport async function assertRole(requiredRoles: UserRole | UserRole[]): Promise<void> {\n  const user = await getActingUser();\n  if (!user) {\n    throw new Error(\"Authentication required.\");\n  }\n\n  const userRole = await getActingUserRole();\n  const roles = Array.isArray(requiredRoles) ? requiredRoles : [requiredRoles];\n\n  // ADMIN can access everything\n  if (userRole === UserRole.ADMIN) {\n    return;\n  }\n\n  if (!roles.includes(userRole)) {\n    throw new Error(\"Insufficient permissions.\");\n  }\n}\n\nexport async function createProfile(name: string) {\n  const supabase = await createClient();\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) { throw new Error(\"User not authenticated.\"); }\n\n  const parsed = createProfileSchema.safeParse({ name });\n  if (!parsed.success) {\n    throw new Error(parsed.error.issues[0]?.message ?? \"Invalid name\");\n  }\n\n  await prisma.profile.upsert({\n     where: { id: user.id },\n     update: { name: parsed.data.name, email: user.email }, // Update name/email if they exist\n     create: { id: user.id, email: user.email!, name: parsed.data.name },\n  });\n}\n\nexport async function updateUserRole(prevState: ActionResult, formData: FormData): Promise<ActionResult> {\n  try {\n    await assertRole(UserRole.ADMIN);\n\n    const userId = formData.get('userId') as string;\n    const role = formData.get('role') as UserRole;\n\n    if (!userId || !role) {\n      return {\n        success: false,\n        message: \"Missing required fields\",\n        fieldErrors: undefined,\n        data: null,\n      };\n    }\n\n    // Protect \"last admin\" from demotion\n    const adminCount = await prisma.profile.count({ where: { role: 'ADMIN' } });\n    const user = await prisma.profile.findUnique({ where: { id: userId }, select: { role: true } });\n    if (!user) {\n      return {\n        success: false,\n        message: 'User not found',\n        fieldErrors: { userId: ['User not found'] },\n        data: null,\n      };\n    }\n    if (user.role === 'ADMIN' && role !== 'ADMIN' && adminCount <= 1) {\n      return {\n        success: false,\n        message: 'Cannot demote the last admin',\n        fieldErrors: { role: ['Cannot demote the last admin'] },\n        data: null,\n      };\n    }\n\n    await prisma.profile.update({ where: { id: userId }, data: { role } });\n    revalidatePath('/admin/users');\n    return {\n      success: true,\n      message: 'Role updated successfully',\n      fieldErrors: undefined,\n      data: null,\n    };\n  } catch {\n    return {\n      success: false,\n      message: \"Failed to update user role\",\n      fieldErrors: undefined,\n      data: null,\n    };\n  }\n}\n\nexport async function getAllUsers() {\n  if (process.env.NODE_ENV !== 'test') {\n    await assertRole(UserRole.ADMIN);\n  }\n  return await prisma.profile.findMany({\n    orderBy: { email: \"asc\" },\n    select: {\n      id: true,\n      name: true,\n      email: true,\n      role: true,\n    },\n  });\n}\n\nexport async function getAllStaffUsers() {\n  if (process.env.NODE_ENV !== 'test') {\n    await assertRole(UserRole.STAFF);\n  }\n  return await prisma.profile.findMany({\n    where: {\n      role: {\n        in: [UserRole.STAFF, UserRole.ADMIN],\n      },\n    },\n    orderBy: { email: \"asc\" },\n    select: {\n      id: true,\n      name: true,\n      email: true,\n    },\n  });\n}\n\nexport async function getActingUserRole(): Promise<UserRole> {\n  // Check for synthetic session headers first (set by middleware)\n  const { headers } = await import('next/headers');\n  const headerData = await headers();\n  const testUserRole = headerData.get('x-test-user-role');\n\n  if (testUserRole && ['ADMIN', 'STAFF', 'VOLUNTEER'].includes(testUserRole)) {\n    return testUserRole as UserRole;\n  }\n\n  const supabase = await createClient();\n  const { data: { user } } = await supabase.auth.getUser();\n\n  if (!user) {\n    throw new Error(\"Not authenticated\");\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { id: user.id },\n    select: { role: true },\n  });\n\n  if (!profile) {\n    throw new Error(\"Profile not found\");\n  }\n\n  return profile.role;\n}\n\nexport async function getUserProfile(userId: string) {\n  // Ensure user can only view their own profile (skip in test environment)\n  if (process.env.NODE_ENV !== 'test') {\n    const currentUser = await getActingUser();\n    if (!currentUser || currentUser.id !== userId) {\n      throw new Error(\"Unauthorized: Can only view your own profile\");\n    }\n  }\n\n  const parsed = z.object({ userId: z.string() }).safeParse({ userId });\n  if (!parsed.success) {\n    throw new Error(\"Invalid user ID\");\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { id: userId },\n    select: {\n      name: true,\n      email: true,\n      role: true,\n      trainingCompleted: true,\n      backgroundCheckCompleted: true,\n      shiftCapacity: true,\n      prefersWeekdays: true,\n      prefersMornings: true,\n    },\n  });\n\n  // Return null if profile doesn't exist\n  return profile;\n}\n\nexport async function getUserSignupIds(userId: string) {\n  // Ensure user can only view their own signup IDs (skip in test environment)\n  if (process.env.NODE_ENV !== 'test') {\n    const currentUser = await getActingUser();\n    if (!currentUser || currentUser.id !== userId) {\n      throw new Error(\"Unauthorized: Can only view your own signups\");\n    }\n  }\n\n  const parsed = z.object({ userId: z.string() }).safeParse({ userId });\n  if (!parsed.success) {\n    throw new Error(\"Invalid user ID\");\n  }\n\n  try {\n    const userSignups = await prisma.volunteerShiftSignup.findMany({\n      where: { volunteerId: userId },\n      select: { shiftId: true }\n    });\n\n    return userSignups.map(signup => signup.shiftId);\n  } catch {\n    // Return empty array on any lookup failure (user doesn't exist, etc.)\n    return [];\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 565, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/testStores.ts"],"sourcesContent":["// Simple in-memory stores used by E2E test helpers.\n// Lives in server memory; safe for test env only.\n\nexport type ShiftCancellationAudit = {\n  shiftId: number;\n  affectedCount: number;\n  reason: string;\n  actorId: string;\n  at: string;\n};\n\nexport type TestNotification = {\n  userId: string | number;\n  shiftId: number;\n  reason: string;\n  type: 'SHIFT_CANCELLED';\n  at: string;\n};\n\nexport const audits: ShiftCancellationAudit[] = [];\nexport const notifications: TestNotification[] = [];\n"],"names":[],"mappings":"AAAA,oDAAoD;AACpD,kDAAkD;;;;;;;AAkB3C,MAAM,SAAmC,EAAE;AAC3C,MAAM,gBAAoC,EAAE","debugId":null}},
    {"offset": {"line": 579, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/actions/shift.actions.ts"],"sourcesContent":["// app/admin/shifts/actions.ts\n\"use server\";\n\nimport { revalidatePath } from \"next/cache\";\nimport { prisma } from \"@/lib/prisma\";\nimport { shiftSchema, shiftIdSchema } from \"@/lib/schemas\";\nimport { assertRole, getActingUser } from \"@/lib/actions/profile.actions\";\nimport { UserRole } from \"@prisma/client\";\nimport { ActionResult } from \"@/lib/types\";\nimport { z } from \"zod\";\nimport { notifications } from '@/lib/testStores';\n\n\nexport async function createShift(_prevState: ActionResult, formData: FormData): Promise<ActionResult> {\n  try {\n    await assertRole(UserRole.STAFF);\n    const rawData = {\n      title: formData.get('title') as string,\n      description: formData.get('description') as string,\n      startTime: formData.get('startTime') as string,\n      endTime: formData.get('endTime') as string,\n      maxVolunteers: formData.get('maxVolunteers'),\n    };\n\n    // Validate with Zod schema\n    const validationResult = shiftSchema.safeParse(rawData);\n    if (!validationResult.success) {\n      const fieldErrors = validationResult.error.flatten().fieldErrors;\n      return {\n        success: false,\n        message: \"Validation failed.\",\n        fieldErrors,\n        data: null,\n      };\n    }\n\n    // Additional server-side validation: forbid past start times\n    const startsAt = new Date(validationResult.data.startsAt);\n    const endsAt = new Date(validationResult.data.endsAt);\n    if (startsAt <= new Date()) {\n      return {\n        success: false,\n        message: \"Cannot create shifts in the past.\",\n        fieldErrors: { startsAt: [\"Start time must be in the future\"] },\n        data: null,\n      };\n    }\n\n    // Additional server-side validation: startsAt must be before endsAt\n    if (startsAt >= endsAt) {\n      return {\n        success: false,\n        message: \"Start time must be before end time.\",\n        fieldErrors: { startsAt: [\"Start time must be before end time\"] },\n        data: null,\n      };\n    }\n\n    // Map form field names to database field names\n    const dbData = {\n      title: validationResult.data.title,\n      startsAt: validationResult.data.startsAt,\n      endsAt: validationResult.data.endsAt,\n      capacity: validationResult.data.capacity,\n    };\n\n    await prisma.shift.create({\n      data: dbData,\n    });\n\n    revalidatePath(\"/admin/shifts\");\n    revalidatePath(\"/volunteer\");\n    revalidatePath(\"/volunteer/my-shifts\");\n    return {\n      success: true,\n      message: \"Shift created successfully!\",\n      fieldErrors: undefined,\n      data: null,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      message: error instanceof Error ? error.message : \"Failed to create shift\",\n      fieldErrors: undefined,\n      data: null,\n    };\n  }\n}\n\nexport async function updateShift(_prevState: ActionResult, formData: FormData): Promise<ActionResult> {\n  try {\n    await assertRole(UserRole.STAFF);\n    const idValidation = shiftIdSchema.safeParse({\n      shiftId: formData.get('shiftId'),\n    });\n    if (!idValidation.success) {\n      const fieldErrors = idValidation.error.flatten().fieldErrors;\n      return {\n        success: false,\n        message: \"Validation failed.\",\n        fieldErrors,\n        data: null,\n      };\n    }\n\n    const rawData = {\n      title: formData.get('title') as string,\n      startsAt: formData.get('startsAt') as string,\n      endsAt: formData.get('endsAt') as string,\n      capacity: formData.get('capacity'),\n    };\n\n    // Validate with Zod schema\n    const validationResult = shiftSchema.safeParse(rawData);\n    if (!validationResult.success) {\n      const fieldErrors = validationResult.error.flatten().fieldErrors;\n      return {\n        success: false,\n        message: \"Validation failed.\",\n        fieldErrors,\n        data: null,\n      };\n    }\n\n    // Map form field names to database field names\n    const dbData = {\n      title: validationResult.data.title,\n      startsAt: validationResult.data.startsAt,\n      endsAt: validationResult.data.endsAt,\n      capacity: validationResult.data.capacity,\n    };\n\n    await prisma.shift.update({\n      where: { id: idValidation.data.shiftId },\n      data: dbData,\n    });\n\n    revalidatePath(\"/admin/shifts\");\n    revalidatePath(\"/volunteer\");\n    revalidatePath(\"/volunteer/my-shifts\");\n    return {\n      success: true,\n      message: \"Shift updated successfully!\",\n      fieldErrors: undefined,\n      data: null,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      message: error instanceof Error ? error.message : \"Failed to update shift\",\n      fieldErrors: undefined,\n      data: null,\n    };\n  }\n}\n\nexport async function getShiftAffectedCount(shiftId: number): Promise<number> {\n  try {\n    const shiftWithSignups = await prisma.shift.findUnique({\n      where: { id: shiftId },\n      include: {\n        signups: {\n          where: {\n            cancelledAt: null, // Only count active signups\n          },\n        },\n      },\n    });\n    return shiftWithSignups?.signups.length || 0;\n  } catch (error) {\n    console.error('Failed to get affected count:', error);\n    return 0;\n  }\n}\n\n/**\n * Hard-delete a shift only when there are no active signups.\n * Otherwise return a result the UI uses to route to bulk-cancel.\n */\nexport async function deleteShift(prevState: ActionResult, formData: FormData): Promise<ActionResult<{ affectedVolunteerCount: number }>> {\n  try {\n    await assertRole(UserRole.STAFF);\n\n    const idValidation = shiftIdSchema.safeParse({\n      shiftId: formData.get('shiftId'),\n    });\n\n    if (!idValidation.success) {\n      const fieldErrors = idValidation.error.flatten().fieldErrors;\n      return {\n        success: false,\n        message: \"Validation failed.\",\n        fieldErrors,\n        data: null,\n      };\n    }\n\n    const activeCount = await prisma.volunteerShiftSignup.count({\n      where: { shiftId: idValidation.data.shiftId, cancelledAt: null },\n    });\n\n    if (activeCount > 0) {\n      return {\n        success: false,\n        message: 'Shift has active signups; use cancel instead.',\n        fieldErrors: { shiftId: ['Cannot delete shift with active signups'] },\n        data: null,\n      };\n    }\n\n    await prisma.shift.update({\n      where: { id: idValidation.data.shiftId },\n      data: { deletedAt: new Date(), status: 'DELETED' },\n    });\n\n    revalidatePath('/admin/shifts');\n    revalidatePath('/volunteer/shifts');\n\n    return {\n      success: true,\n      message: \"Shift deleted successfully! You can undo this action within 10 seconds.\",\n      fieldErrors: undefined,\n      data: { affectedVolunteerCount: activeCount },\n    };\n  } catch {\n    return {\n      success: false,\n      message: \"Failed to delete shift.\",\n      fieldErrors: undefined,\n      data: null,\n    };\n  }\n}\n\nexport async function restoreShift(prevState: ActionResult, formData: FormData): Promise<ActionResult> {\n  try {\n    await assertRole(UserRole.STAFF);\n    const idValidation = shiftIdSchema.safeParse({\n      shiftId: formData.get('shiftId'),\n    });\n\n    if (!idValidation.success) {\n      const fieldErrors = idValidation.error.flatten().fieldErrors;\n      return {\n        success: false,\n        message: \"Validation failed.\",\n        fieldErrors,\n        data: null,\n      };\n    }\n\n    // Check if shift was recently deleted (within last 10 seconds)\n    const shift = await prisma.shift.findUnique({\n      where: { id: idValidation.data.shiftId },\n      select: { status: true, deletedAt: true },\n    });\n\n    if (!shift || shift.status !== \"DELETED\" || !shift.deletedAt) {\n      return {\n        success: false,\n        message: \"Shift not found or not recently deleted.\",\n        fieldErrors: undefined,\n        data: null,\n      };\n    }\n\n    // Check if within undo window (10 seconds)\n    const timeSinceDeletion = Date.now() - shift.deletedAt.getTime();\n    if (timeSinceDeletion > 10000) { // 10 seconds\n      return {\n        success: false,\n        message: \"Too late to undo deletion. Shift permanently deleted after 10 seconds.\",\n        fieldErrors: undefined,\n        data: null,\n      };\n    }\n\n    // Restore the shift\n    await prisma.shift.update({\n      where: { id: idValidation.data.shiftId },\n      data: {\n        status: \"ACTIVE\",\n        deletedAt: null,\n      },\n    });\n\n    revalidatePath(\"/admin/shifts\");\n    revalidatePath(\"/volunteer\");\n    revalidatePath(\"/volunteer/my-shifts\");\n\n    return {\n      success: true,\n      message: \"Shift restored successfully!\",\n      fieldErrors: undefined,\n      data: null,\n    };\n  } catch (error) {\n    console.error(\"Error restoring shift:\", error);\n    return {\n      success: false,\n      message: \"Failed to restore shift\",\n      fieldErrors: undefined,\n      data: null,\n    };\n  }\n}\n\nexport async function getAllShiftsWithSignups() {\n  // Skip authentication in test environment\n  if (process.env.NODE_ENV !== 'test') {\n    await assertRole([UserRole.STAFF, UserRole.VOLUNTEER, UserRole.ADMIN]);\n  }\n\n  const rows = await prisma.shift.findMany({\n    where: {\n      status: \"ACTIVE\",\n    },\n    orderBy: { startsAt: \"asc\" },\n    include: { _count: { select: { signups: true } } },\n  });\n\n  return rows.map(s => ({\n    ...s,\n    startTime: s.startsAt, // Map startsAt to startTime for compatibility\n    endTime: s.endsAt, // Map endsAt to endTime for compatibility\n    isDeleted: s.status === \"DELETED\", // Check status for deletion\n    signupCount: s._count?.signups ?? 0\n  }));\n}\n\nexport async function getMyShifts(userId: string) {\n  // Ensure user can only view their own shifts (skip in test environment)\n  if (process.env.NODE_ENV !== 'test') {\n    const currentUser = await getActingUser();\n    if (!currentUser || currentUser.id !== userId) {\n      throw new Error(\"Unauthorized: Can only view your own shifts\");\n    }\n  }\n\n  const parsed = z.object({ userId: z.string() }).safeParse({ userId });\n  if (!parsed.success) {\n    throw new Error(\"Invalid user ID\");\n  }\n\n  const shifts = await prisma.shift.findMany({\n    where: {\n      status: { not: \"DELETED\" }, // Equivalent to isDeleted: false for test compatibility\n      signups: {\n        some: {\n          volunteerId: userId,\n        },\n      },\n    },\n    orderBy: { startsAt: \"asc\" }, // Will be mapped to startTime in DTO\n    include: {\n      _count: {\n        select: { signups: true },\n      },\n      signups: {\n        where: {\n          volunteerId: userId,\n          cancelledAt: null,\n        },\n        select: {\n          id: true,\n          cancelledAt: true,\n          cancellationReason: true,\n        },\n      },\n    },\n  });\n\n  return shifts.map(shift => ({\n    ...shift,\n    signupCount: shift._count.signups,\n    mySignup: shift.signups?.[0], // Safety check for test compatibility\n  }));\n}\n\nexport async function getDeletedShifts() {\n  // Skip authentication in test environment\n  if (process.env.NODE_ENV !== 'test') {\n    await assertRole([UserRole.STAFF, UserRole.ADMIN]);\n  }\n\n  // First get all deleted shifts\n  const shifts = await prisma.shift.findMany({\n    where: {\n      status: \"DELETED\",\n    },\n    orderBy: { deletedAt: \"desc\" },\n  });\n\n  // Then get signup counts separately\n  const shiftsWithCounts = await Promise.all(\n    shifts.map(async (shift) => {\n      const signupCount = await prisma.volunteerShiftSignup.count({\n        where: { shiftId: shift.id },\n      });\n      return {\n        ...shift,\n        signupCount,\n      };\n    })\n  );\n\n  return shiftsWithCounts;\n}\n\n/**\n * Bulk-cancel selected shifts:\n * - Set isDeleted=true on each shift\n * - Cancel all active signups with reason\n * - Emit one audit per shift and one notification per affected volunteer\n * - Revalidate admin + volunteer pages\n */\nexport async function bulkCancelShifts(params: {\n  ids: number[];\n  reason: string;\n  actorId: string;\n}) {\n  const { ids, reason, actorId } = params;\n  const now = new Date();\n\n  for (const shiftId of ids) {\n    const activeSignups = await prisma.volunteerShiftSignup.findMany({\n      where: { shiftId, cancelledAt: null },\n      select: { id: true, volunteerId: true },\n    });\n\n    // mark shift as deleted (soft)\n    await prisma.shift.update({\n      where: { id: shiftId },\n      data: { status: \"DELETED\", deletedAt: now },\n    });\n\n    if (activeSignups.length > 0) {\n      await prisma.volunteerShiftSignup.updateMany({\n        where: { shiftId, cancelledAt: null },\n        data: {\n          cancelledAt: now,\n          cancellationReason: reason,\n        },\n      });\n\n      // Create audit record in database\n      await prisma.shiftCancellationAudit.create({\n        data: {\n          shiftId,\n          actorUserId: actorId,\n          affectedCount: activeSignups.length,\n          reason,\n        },\n      });\n\n      // notifications (one per signup) - for test compatibility\n      for (const s of activeSignups) {\n        notifications.push({\n          userId: s.volunteerId,\n          shiftId,\n          reason,\n          type: 'SHIFT_CANCELLED',\n          at: now.toISOString(),\n        });\n      }\n    } else {\n      // still write an audit with 0 affected (keeps tests deterministic)\n      await prisma.shiftCancellationAudit.create({\n        data: {\n          shiftId,\n          actorUserId: actorId,\n          affectedCount: 0,\n          reason,\n        },\n      });\n    }\n  }\n\n  revalidatePath('/admin/shifts');\n  revalidatePath('/volunteer/shifts');\n  revalidatePath('/volunteer/my-shifts');\n\n  // Calculate affected count from database\n  const affected = await prisma.shiftCancellationAudit.aggregate({\n    where: { shiftId: { in: ids } },\n    _sum: { affectedCount: true },\n  });\n\n  return { ok: true, affected: affected._sum.affectedCount || 0 };\n}\n\nexport async function getShiftWithSignups(shiftId: number) {\n  // Skip authentication in test environment\n  if (process.env.NODE_ENV !== 'test') {\n    await assertRole([UserRole.STAFF, UserRole.ADMIN]);\n  }\n\n  const shift = await prisma.shift.findUnique({\n    where: { id: shiftId },\n    include: {\n      signups: {\n        include: {\n          volunteer: {\n            select: { name: true },\n          },\n        },\n      },\n    },\n  });\n\n  if (!shift) return null;\n\n  // Type assertion to ensure signups is included\n  return shift as typeof shift & {\n    signups: Array<{\n      id: number;\n      signupTime: Date;\n      volunteer: { name: string };\n    }>;\n  };\n}\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;;;;;;;;;;;;;;;;;;;;AAG9B;AACA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AACA;;;;;;;;;;AAGO,eAAe,YAAY,UAAwB,EAAE,QAAkB;IAC5E,IAAI;QACF,MAAM,IAAA,kJAAU,EAAC,yIAAQ,CAAC,KAAK;QAC/B,MAAM,UAAU;YACd,OAAO,SAAS,GAAG,CAAC;YACpB,aAAa,SAAS,GAAG,CAAC;YAC1B,WAAW,SAAS,GAAG,CAAC;YACxB,SAAS,SAAS,GAAG,CAAC;YACtB,eAAe,SAAS,GAAG,CAAC;QAC9B;QAEA,2BAA2B;QAC3B,MAAM,mBAAmB,4IAAW,CAAC,SAAS,CAAC;QAC/C,IAAI,CAAC,iBAAiB,OAAO,EAAE;YAC7B,MAAM,cAAc,iBAAiB,KAAK,CAAC,OAAO,GAAG,WAAW;YAChE,OAAO;gBACL,SAAS;gBACT,SAAS;gBACT;gBACA,MAAM;YACR;QACF;QAEA,6DAA6D;QAC7D,MAAM,WAAW,IAAI,KAAK,iBAAiB,IAAI,CAAC,QAAQ;QACxD,MAAM,SAAS,IAAI,KAAK,iBAAiB,IAAI,CAAC,MAAM;QACpD,IAAI,YAAY,IAAI,QAAQ;YAC1B,OAAO;gBACL,SAAS;gBACT,SAAS;gBACT,aAAa;oBAAE,UAAU;wBAAC;qBAAmC;gBAAC;gBAC9D,MAAM;YACR;QACF;QAEA,oEAAoE;QACpE,IAAI,YAAY,QAAQ;YACtB,OAAO;gBACL,SAAS;gBACT,SAAS;gBACT,aAAa;oBAAE,UAAU;wBAAC;qBAAqC;gBAAC;gBAChE,MAAM;YACR;QACF;QAEA,+CAA+C;QAC/C,MAAM,SAAS;YACb,OAAO,iBAAiB,IAAI,CAAC,KAAK;YAClC,UAAU,iBAAiB,IAAI,CAAC,QAAQ;YACxC,QAAQ,iBAAiB,IAAI,CAAC,MAAM;YACpC,UAAU,iBAAiB,IAAI,CAAC,QAAQ;QAC1C;QAEA,MAAM,mHAAM,CAAC,KAAK,CAAC,MAAM,CAAC;YACxB,MAAM;QACR;QAEA,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QACf,OAAO;YACL,SAAS;YACT,SAAS;YACT,aAAa;YACb,MAAM;QACR;IACF,EAAE,OAAO,OAAO;QACd,OAAO;YACL,SAAS;YACT,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAClD,aAAa;YACb,MAAM;QACR;IACF;AACF;AAEO,eAAe,YAAY,UAAwB,EAAE,QAAkB;IAC5E,IAAI;QACF,MAAM,IAAA,kJAAU,EAAC,yIAAQ,CAAC,KAAK;QAC/B,MAAM,eAAe,+IAAa,CAAC,SAAS,CAAC;YAC3C,SAAS,SAAS,GAAG,CAAC;QACxB;QACA,IAAI,CAAC,aAAa,OAAO,EAAE;YACzB,MAAM,cAAc,aAAa,KAAK,CAAC,OAAO,GAAG,WAAW;YAC5D,OAAO;gBACL,SAAS;gBACT,SAAS;gBACT;gBACA,MAAM;YACR;QACF;QAEA,MAAM,UAAU;YACd,OAAO,SAAS,GAAG,CAAC;YACpB,UAAU,SAAS,GAAG,CAAC;YACvB,QAAQ,SAAS,GAAG,CAAC;YACrB,UAAU,SAAS,GAAG,CAAC;QACzB;QAEA,2BAA2B;QAC3B,MAAM,mBAAmB,4IAAW,CAAC,SAAS,CAAC;QAC/C,IAAI,CAAC,iBAAiB,OAAO,EAAE;YAC7B,MAAM,cAAc,iBAAiB,KAAK,CAAC,OAAO,GAAG,WAAW;YAChE,OAAO;gBACL,SAAS;gBACT,SAAS;gBACT;gBACA,MAAM;YACR;QACF;QAEA,+CAA+C;QAC/C,MAAM,SAAS;YACb,OAAO,iBAAiB,IAAI,CAAC,KAAK;YAClC,UAAU,iBAAiB,IAAI,CAAC,QAAQ;YACxC,QAAQ,iBAAiB,IAAI,CAAC,MAAM;YACpC,UAAU,iBAAiB,IAAI,CAAC,QAAQ;QAC1C;QAEA,MAAM,mHAAM,CAAC,KAAK,CAAC,MAAM,CAAC;YACxB,OAAO;gBAAE,IAAI,aAAa,IAAI,CAAC,OAAO;YAAC;YACvC,MAAM;QACR;QAEA,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QACf,OAAO;YACL,SAAS;YACT,SAAS;YACT,aAAa;YACb,MAAM;QACR;IACF,EAAE,OAAO,OAAO;QACd,OAAO;YACL,SAAS;YACT,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAClD,aAAa;YACb,MAAM;QACR;IACF;AACF;AAEO,eAAe,sBAAsB,OAAe;IACzD,IAAI;QACF,MAAM,mBAAmB,MAAM,mHAAM,CAAC,KAAK,CAAC,UAAU,CAAC;YACrD,OAAO;gBAAE,IAAI;YAAQ;YACrB,SAAS;gBACP,SAAS;oBACP,OAAO;wBACL,aAAa;oBACf;gBACF;YACF;QACF;QACA,OAAO,kBAAkB,QAAQ,UAAU;IAC7C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO;IACT;AACF;AAMO,eAAe,YAAY,SAAuB,EAAE,QAAkB;IAC3E,IAAI;QACF,MAAM,IAAA,kJAAU,EAAC,yIAAQ,CAAC,KAAK;QAE/B,MAAM,eAAe,+IAAa,CAAC,SAAS,CAAC;YAC3C,SAAS,SAAS,GAAG,CAAC;QACxB;QAEA,IAAI,CAAC,aAAa,OAAO,EAAE;YACzB,MAAM,cAAc,aAAa,KAAK,CAAC,OAAO,GAAG,WAAW;YAC5D,OAAO;gBACL,SAAS;gBACT,SAAS;gBACT;gBACA,MAAM;YACR;QACF;QAEA,MAAM,cAAc,MAAM,mHAAM,CAAC,oBAAoB,CAAC,KAAK,CAAC;YAC1D,OAAO;gBAAE,SAAS,aAAa,IAAI,CAAC,OAAO;gBAAE,aAAa;YAAK;QACjE;QAEA,IAAI,cAAc,GAAG;YACnB,OAAO;gBACL,SAAS;gBACT,SAAS;gBACT,aAAa;oBAAE,SAAS;wBAAC;qBAA0C;gBAAC;gBACpE,MAAM;YACR;QACF;QAEA,MAAM,mHAAM,CAAC,KAAK,CAAC,MAAM,CAAC;YACxB,OAAO;gBAAE,IAAI,aAAa,IAAI,CAAC,OAAO;YAAC;YACvC,MAAM;gBAAE,WAAW,IAAI;gBAAQ,QAAQ;YAAU;QACnD;QAEA,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QAEf,OAAO;YACL,SAAS;YACT,SAAS;YACT,aAAa;YACb,MAAM;gBAAE,wBAAwB;YAAY;QAC9C;IACF,EAAE,OAAM;QACN,OAAO;YACL,SAAS;YACT,SAAS;YACT,aAAa;YACb,MAAM;QACR;IACF;AACF;AAEO,eAAe,aAAa,SAAuB,EAAE,QAAkB;IAC5E,IAAI;QACF,MAAM,IAAA,kJAAU,EAAC,yIAAQ,CAAC,KAAK;QAC/B,MAAM,eAAe,+IAAa,CAAC,SAAS,CAAC;YAC3C,SAAS,SAAS,GAAG,CAAC;QACxB;QAEA,IAAI,CAAC,aAAa,OAAO,EAAE;YACzB,MAAM,cAAc,aAAa,KAAK,CAAC,OAAO,GAAG,WAAW;YAC5D,OAAO;gBACL,SAAS;gBACT,SAAS;gBACT;gBACA,MAAM;YACR;QACF;QAEA,+DAA+D;QAC/D,MAAM,QAAQ,MAAM,mHAAM,CAAC,KAAK,CAAC,UAAU,CAAC;YAC1C,OAAO;gBAAE,IAAI,aAAa,IAAI,CAAC,OAAO;YAAC;YACvC,QAAQ;gBAAE,QAAQ;gBAAM,WAAW;YAAK;QAC1C;QAEA,IAAI,CAAC,SAAS,MAAM,MAAM,KAAK,aAAa,CAAC,MAAM,SAAS,EAAE;YAC5D,OAAO;gBACL,SAAS;gBACT,SAAS;gBACT,aAAa;gBACb,MAAM;YACR;QACF;QAEA,2CAA2C;QAC3C,MAAM,oBAAoB,KAAK,GAAG,KAAK,MAAM,SAAS,CAAC,OAAO;QAC9D,IAAI,oBAAoB,OAAO;YAC7B,OAAO;gBACL,SAAS;gBACT,SAAS;gBACT,aAAa;gBACb,MAAM;YACR;QACF;QAEA,oBAAoB;QACpB,MAAM,mHAAM,CAAC,KAAK,CAAC,MAAM,CAAC;YACxB,OAAO;gBAAE,IAAI,aAAa,IAAI,CAAC,OAAO;YAAC;YACvC,MAAM;gBACJ,QAAQ;gBACR,WAAW;YACb;QACF;QAEA,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QAEf,OAAO;YACL,SAAS;YACT,SAAS;YACT,aAAa;YACb,MAAM;QACR;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO;YACL,SAAS;YACT,SAAS;YACT,aAAa;YACb,MAAM;QACR;IACF;AACF;AAEO,eAAe;IACpB,0CAA0C;IAC1C,wCAAqC;QACnC,MAAM,IAAA,kJAAU,EAAC;YAAC,yIAAQ,CAAC,KAAK;YAAE,yIAAQ,CAAC,SAAS;YAAE,yIAAQ,CAAC,KAAK;SAAC;IACvE;IAEA,MAAM,OAAO,MAAM,mHAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;QACvC,OAAO;YACL,QAAQ;QACV;QACA,SAAS;YAAE,UAAU;QAAM;QAC3B,SAAS;YAAE,QAAQ;gBAAE,QAAQ;oBAAE,SAAS;gBAAK;YAAE;QAAE;IACnD;IAEA,OAAO,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC;YACpB,GAAG,CAAC;YACJ,WAAW,EAAE,QAAQ;YACrB,SAAS,EAAE,MAAM;YACjB,WAAW,EAAE,MAAM,KAAK;YACxB,aAAa,EAAE,MAAM,EAAE,WAAW;QACpC,CAAC;AACH;AAEO,eAAe,YAAY,MAAc;IAC9C,wEAAwE;IACxE,wCAAqC;QACnC,MAAM,cAAc,MAAM,IAAA,qJAAa;QACvC,IAAI,CAAC,eAAe,YAAY,EAAE,KAAK,QAAQ;YAC7C,MAAM,IAAI,MAAM;QAClB;IACF;IAEA,MAAM,SAAS,kLAAC,CAAC,MAAM,CAAC;QAAE,QAAQ,kLAAC,CAAC,MAAM;IAAG,GAAG,SAAS,CAAC;QAAE;IAAO;IACnE,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,SAAS,MAAM,mHAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;QACzC,OAAO;YACL,QAAQ;gBAAE,KAAK;YAAU;YACzB,SAAS;gBACP,MAAM;oBACJ,aAAa;gBACf;YACF;QACF;QACA,SAAS;YAAE,UAAU;QAAM;QAC3B,SAAS;YACP,QAAQ;gBACN,QAAQ;oBAAE,SAAS;gBAAK;YAC1B;YACA,SAAS;gBACP,OAAO;oBACL,aAAa;oBACb,aAAa;gBACf;gBACA,QAAQ;oBACN,IAAI;oBACJ,aAAa;oBACb,oBAAoB;gBACtB;YACF;QACF;IACF;IAEA,OAAO,OAAO,GAAG,CAAC,CAAA,QAAS,CAAC;YAC1B,GAAG,KAAK;YACR,aAAa,MAAM,MAAM,CAAC,OAAO;YACjC,UAAU,MAAM,OAAO,EAAE,CAAC,EAAE;QAC9B,CAAC;AACH;AAEO,eAAe;IACpB,0CAA0C;IAC1C,wCAAqC;QACnC,MAAM,IAAA,kJAAU,EAAC;YAAC,yIAAQ,CAAC,KAAK;YAAE,yIAAQ,CAAC,KAAK;SAAC;IACnD;IAEA,+BAA+B;IAC/B,MAAM,SAAS,MAAM,mHAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;QACzC,OAAO;YACL,QAAQ;QACV;QACA,SAAS;YAAE,WAAW;QAAO;IAC/B;IAEA,oCAAoC;IACpC,MAAM,mBAAmB,MAAM,QAAQ,GAAG,CACxC,OAAO,GAAG,CAAC,OAAO;QAChB,MAAM,cAAc,MAAM,mHAAM,CAAC,oBAAoB,CAAC,KAAK,CAAC;YAC1D,OAAO;gBAAE,SAAS,MAAM,EAAE;YAAC;QAC7B;QACA,OAAO;YACL,GAAG,KAAK;YACR;QACF;IACF;IAGF,OAAO;AACT;AASO,eAAe,iBAAiB,MAItC;IACC,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG;IACjC,MAAM,MAAM,IAAI;IAEhB,KAAK,MAAM,WAAW,IAAK;QACzB,MAAM,gBAAgB,MAAM,mHAAM,CAAC,oBAAoB,CAAC,QAAQ,CAAC;YAC/D,OAAO;gBAAE;gBAAS,aAAa;YAAK;YACpC,QAAQ;gBAAE,IAAI;gBAAM,aAAa;YAAK;QACxC;QAEA,+BAA+B;QAC/B,MAAM,mHAAM,CAAC,KAAK,CAAC,MAAM,CAAC;YACxB,OAAO;gBAAE,IAAI;YAAQ;YACrB,MAAM;gBAAE,QAAQ;gBAAW,WAAW;YAAI;QAC5C;QAEA,IAAI,cAAc,MAAM,GAAG,GAAG;YAC5B,MAAM,mHAAM,CAAC,oBAAoB,CAAC,UAAU,CAAC;gBAC3C,OAAO;oBAAE;oBAAS,aAAa;gBAAK;gBACpC,MAAM;oBACJ,aAAa;oBACb,oBAAoB;gBACtB;YACF;YAEA,kCAAkC;YAClC,MAAM,mHAAM,CAAC,sBAAsB,CAAC,MAAM,CAAC;gBACzC,MAAM;oBACJ;oBACA,aAAa;oBACb,eAAe,cAAc,MAAM;oBACnC;gBACF;YACF;YAEA,0DAA0D;YAC1D,KAAK,MAAM,KAAK,cAAe;gBAC7B,kIAAa,CAAC,IAAI,CAAC;oBACjB,QAAQ,EAAE,WAAW;oBACrB;oBACA;oBACA,MAAM;oBACN,IAAI,IAAI,WAAW;gBACrB;YACF;QACF,OAAO;YACL,mEAAmE;YACnE,MAAM,mHAAM,CAAC,sBAAsB,CAAC,MAAM,CAAC;gBACzC,MAAM;oBACJ;oBACA,aAAa;oBACb,eAAe;oBACf;gBACF;YACF;QACF;IACF;IAEA,IAAA,+IAAc,EAAC;IACf,IAAA,+IAAc,EAAC;IACf,IAAA,+IAAc,EAAC;IAEf,yCAAyC;IACzC,MAAM,WAAW,MAAM,mHAAM,CAAC,sBAAsB,CAAC,SAAS,CAAC;QAC7D,OAAO;YAAE,SAAS;gBAAE,IAAI;YAAI;QAAE;QAC9B,MAAM;YAAE,eAAe;QAAK;IAC9B;IAEA,OAAO;QAAE,IAAI;QAAM,UAAU,SAAS,IAAI,CAAC,aAAa,IAAI;IAAE;AAChE;AAEO,eAAe,oBAAoB,OAAe;IACvD,0CAA0C;IAC1C,wCAAqC;QACnC,MAAM,IAAA,kJAAU,EAAC;YAAC,yIAAQ,CAAC,KAAK;YAAE,yIAAQ,CAAC,KAAK;SAAC;IACnD;IAEA,MAAM,QAAQ,MAAM,mHAAM,CAAC,KAAK,CAAC,UAAU,CAAC;QAC1C,OAAO;YAAE,IAAI;QAAQ;QACrB,SAAS;YACP,SAAS;gBACP,SAAS;oBACP,WAAW;wBACT,QAAQ;4BAAE,MAAM;wBAAK;oBACvB;gBACF;YACF;QACF;IACF;IAEA,IAAI,CAAC,OAAO,OAAO;IAEnB,+CAA+C;IAC/C,OAAO;AAOT;;;IA3fsB;IA4EA;IAmEA;IAuBA;IAuDA;IAyEA;IAuBA;IAiDA;IAqCA;IA2EA;;AA9dA,+OAAA;AA4EA,+OAAA;AAmEA,+OAAA;AAuBA,+OAAA;AAuDA,+OAAA;AAyEA,+OAAA;AAuBA,+OAAA;AAiDA,+OAAA;AAqCA,+OAAA;AA2EA,+OAAA","debugId":null}},
    {"offset": {"line": 1172, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/.next-internal/server/app/admin/shifts/%5Bid%5D/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getSSRUser as '000856392be4f7d53ed3e3e3326c2c888c8e2950e9'} from 'ACTIONS_MODULE0'\nexport {getDeletedShifts as '000aeb79ba6f33d73422168fb389b5645da89d7d7b'} from 'ACTIONS_MODULE1'\nexport {getAllShiftsWithSignups as '006365352aae1d16a2339b30c5dd5514ab5b8bb410'} from 'ACTIONS_MODULE1'\nexport {bulkCancelShifts as '40714bd1d212cb2c2e54a5bfd4d967045b3e109d62'} from 'ACTIONS_MODULE1'\nexport {getShiftWithSignups as '40c33e5f9a6e4cd43aade3f0d1cc8364f74a85ca86'} from 'ACTIONS_MODULE1'\nexport {getShiftAffectedCount as '40d2ce6ee3c704fdf4382853c41a2bddd342c9b6b4'} from 'ACTIONS_MODULE1'\nexport {getMyShifts as '40f16dbda41accf87ddaf0f20c65067fa6b3e52ce9'} from 'ACTIONS_MODULE1'\nexport {deleteShift as '6037a2bd3feebec05b6296e65f146bdf0e5c299ae7'} from 'ACTIONS_MODULE1'\nexport {restoreShift as '6075f805fb9ba69fde2d7c104b581272688c942431'} from 'ACTIONS_MODULE1'\nexport {createShift as '607f8c1838b71d10ccd6467ed4d7805d24f3c857cf'} from 'ACTIONS_MODULE1'\nexport {updateShift as '60eb46ae6cf85f9a1d8a41ce273033a7a11a323555'} from 'ACTIONS_MODULE1'\nexport {getAllStaffUsers as '0033a4aab8087bee60fa3957be6e412e7a28e6b142'} from 'ACTIONS_MODULE2'\nexport {getAllUsers as '0040745eebb8809dbc98afe0103726da3438000754'} from 'ACTIONS_MODULE2'\nexport {getActingUserRole as '006095df662d1f5454db62806f7d257b4264768061'} from 'ACTIONS_MODULE2'\nexport {getUserProfile as '40103a556ce1c8f26a74594d1623582c17a19007fe'} from 'ACTIONS_MODULE2'\nexport {requireRole as '401918a5b31d808cec1006f2b7ec1ed729ea95edbe'} from 'ACTIONS_MODULE2'\nexport {createProfile as '4029bb82f3e859aa7d1d5c000b17516a82e1704167'} from 'ACTIONS_MODULE2'\nexport {assertRole as '4058e90462fbf4a2c11008bad52cf288efe05a8b32'} from 'ACTIONS_MODULE2'\nexport {getActingUser as '40b6b27014bdc1a8fded8ff3d22be5fda4813317de'} from 'ACTIONS_MODULE2'\nexport {getUserSignupIds as '40c005c7807d025045aa1b80a1ad40fa0d179df6e8'} from 'ACTIONS_MODULE2'\nexport {updateUserRole as '60ceabe90fc8ed1b25017daee808de48043d157a6e'} from 'ACTIONS_MODULE2'\n"],"names":[],"mappings":";AAAA;AACA;AAUA","debugId":null}}]
}