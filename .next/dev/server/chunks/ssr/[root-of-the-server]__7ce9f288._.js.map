{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/utils/index.ts"],"sourcesContent":["// lib/utils/index.ts\n// Shared utility functions for the application\n\nimport { AppStatus, AppType } from \"@prisma/client\";\n\n/**\n * Humanize enum values by replacing underscores with spaces and capitalizing words\n */\nexport const humanizeEnum = (value: string): string => {\n  return value\n    .toLowerCase()\n    .replace(/_/g, ' ')\n    .replace(/\\b\\w/g, l => l.toUpperCase());\n};\n\n/**\n * Status variant functions for consistent badge styling\n */\nexport const getAppStatusVariant = (status: AppStatus) => {\n  switch (status) {\n    case \"APPROVED\": return \"default\";\n    case \"SUBMITTED\": case \"IN_REVIEW\": return \"secondary\";\n    case \"REJECTED\": return \"destructive\";\n    default: return \"outline\";\n  }\n};\n\n/**\n * Get allowed status transitions for applications\n */\nexport const getAllowedStatuses = (applicationType: AppType, currentStatus?: AppStatus): AppStatus[] => {\n  const allStatuses = Object.values(AppStatus);\n\n  // For foster applications, restrict some status transitions\n  if (applicationType === AppType.FOSTER) {\n    // Fosters can be approved (creates foster profile) or rejected\n    // Can't be marked as \"IN_REVIEW\" inappropriately\n    return allStatuses.filter(status =>\n      status !== AppStatus.IN_REVIEW || currentStatus === AppStatus.IN_REVIEW\n    );\n  }\n\n  // For adoption applications, all statuses are allowed\n  return allStatuses;\n};\n\n/**\n * Check if status change notes are required for a given status\n */\nexport const areStatusNotesRequired = (status: AppStatus): boolean => {\n  return status === AppStatus.APPROVED || status === AppStatus.REJECTED;\n};\n"],"names":[],"mappings":"AAAA,qBAAqB;AACrB,+CAA+C;;;;;;;;;;;AAE/C;;AAKO,MAAM,eAAe,CAAC;IAC3B,OAAO,MACJ,WAAW,GACX,OAAO,CAAC,MAAM,KACd,OAAO,CAAC,SAAS,CAAA,IAAK,EAAE,WAAW;AACxC;AAKO,MAAM,sBAAsB,CAAC;IAClC,OAAQ;QACN,KAAK;YAAY,OAAO;QACxB,KAAK;QAAa,KAAK;YAAa,OAAO;QAC3C,KAAK;YAAY,OAAO;QACxB;YAAS,OAAO;IAClB;AACF;AAKO,MAAM,qBAAqB,CAAC,iBAA0B;IAC3D,MAAM,cAAc,OAAO,MAAM,CAAC,0IAAS;IAE3C,4DAA4D;IAC5D,IAAI,oBAAoB,wIAAO,CAAC,MAAM,EAAE;QACtC,+DAA+D;QAC/D,iDAAiD;QACjD,OAAO,YAAY,MAAM,CAAC,CAAA,SACxB,WAAW,0IAAS,CAAC,SAAS,IAAI,kBAAkB,0IAAS,CAAC,SAAS;IAE3E;IAEA,sDAAsD;IACtD,OAAO;AACT;AAKO,MAAM,yBAAyB,CAAC;IACrC,OAAO,WAAW,0IAAS,CAAC,QAAQ,IAAI,WAAW,0IAAS,CAAC,QAAQ;AACvE","debugId":null}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { AppStatus, AppType, DogStatus } from \"@prisma/client\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\n\n// This check can be removed, it is just for tutorial purposes\nexport const hasEnvVars =\n  !!(process.env.NEXT_PUBLIC_SUPABASE_URL &&\n     process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);\n\n\nexport const getDogStatusVariant = (status: DogStatus) => {\n  switch (status) {\n    case \"ADOPTED\": return \"default\";\n    case \"AVAILABLE\": return \"secondary\";\n    case \"MEDICAL_HOLD\": return \"destructive\";\n    case \"PENDING\": case \"IN_FOSTER\": return \"outline\";\n    default: return \"secondary\";\n  }\n};\n\n// Date formatting utilities\nexport const formatDateTime = (date: Date) =>\n  new Intl.DateTimeFormat(\"en-US\", {\n    month: \"short\",\n    day: \"numeric\",\n    year: \"numeric\",\n    hour: \"numeric\",\n    minute: \"2-digit\",\n  }).format(date);\n\nexport const formatDateRange = (start: Date, end: Date) => {\n  const sameDay =\n    start.getFullYear() === end.getFullYear() &&\n    start.getMonth() === end.getMonth() &&\n    start.getDate() === end.getDate();\n\n  if (sameDay) {\n    return `${formatDateTime(start)} – ${new Intl.DateTimeFormat(\"en-US\", {\n      hour: \"numeric\",\n      minute: \"2-digit\",\n    }).format(end)}`;\n  }\n\n  return `${formatDateTime(start)} → ${formatDateTime(end)}`;\n};\n\nexport const formatShiftTime = (start: Date, end: Date): string => {\n  const startDate = start.toLocaleDateString();\n  const startTime = start.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });\n  const endTime = end.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });\n\n  if (startDate === end.toLocaleDateString()) {\n    return `${startDate}, ${startTime} - ${endTime}`;\n  }\n  return `${startDate}, ${startTime} - ${end.toLocaleDateString()}, ${endTime}`;\n};\n\nexport const formatAdoptionDate = (date: Date) =>\n  new Intl.DateTimeFormat(\"en-US\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n  }).format(date);\n\n// Re-export shared utilities\nexport { humanizeEnum, getAppStatusVariant, getAllowedStatuses, areStatusNotesRequired } from './utils/index';\n\n// Test endpoint validation - allow in test environment or with test secret header\nexport function validateTestEndpoint(request: Request): { isValid: boolean; response?: Response } {\n  const isTestEnv = process.env.NODE_ENV === 'test' && process.env.EXPOSE_TEST_API === '1';\n\n  const testSecret = request.headers.get('x-test-secret');\n  const expectedSecret = process.env.TEST_SECRET || 'test-secret-default';\n  const hasValidTestSecret = testSecret === expectedSecret;\n\n  if (!isTestEnv || !hasValidTestSecret) {\n    return {\n      isValid: false,\n      response: new Response(null, { status: 404 })\n    };\n  }\n\n  return { isValid: true };\n}\n\n// Route definitions have been moved to lib/routes.ts\n// Import route functions from @/lib/routes instead\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AAqEA,6BAA6B;AAC7B;;;AAlEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB;AAIO,MAAM,aACX,CAAC,CAAC,CAAC,kKACyC;AAGvC,MAAM,sBAAsB,CAAC;IAClC,OAAQ;QACN,KAAK;YAAW,OAAO;QACvB,KAAK;YAAa,OAAO;QACzB,KAAK;YAAgB,OAAO;QAC5B,KAAK;QAAW,KAAK;YAAa,OAAO;QACzC;YAAS,OAAO;IAClB;AACF;AAGO,MAAM,iBAAiB,CAAC,OAC7B,IAAI,KAAK,cAAc,CAAC,SAAS;QAC/B,OAAO;QACP,KAAK;QACL,MAAM;QACN,MAAM;QACN,QAAQ;IACV,GAAG,MAAM,CAAC;AAEL,MAAM,kBAAkB,CAAC,OAAa;IAC3C,MAAM,UACJ,MAAM,WAAW,OAAO,IAAI,WAAW,MACvC,MAAM,QAAQ,OAAO,IAAI,QAAQ,MACjC,MAAM,OAAO,OAAO,IAAI,OAAO;IAEjC,IAAI,SAAS;QACX,OAAO,GAAG,eAAe,OAAO,GAAG,EAAE,IAAI,KAAK,cAAc,CAAC,SAAS;YACpE,MAAM;YACN,QAAQ;QACV,GAAG,MAAM,CAAC,MAAM;IAClB;IAEA,OAAO,GAAG,eAAe,OAAO,GAAG,EAAE,eAAe,MAAM;AAC5D;AAEO,MAAM,kBAAkB,CAAC,OAAa;IAC3C,MAAM,YAAY,MAAM,kBAAkB;IAC1C,MAAM,YAAY,MAAM,kBAAkB,CAAC,EAAE,EAAE;QAAE,MAAM;QAAW,QAAQ;IAAU;IACpF,MAAM,UAAU,IAAI,kBAAkB,CAAC,EAAE,EAAE;QAAE,MAAM;QAAW,QAAQ;IAAU;IAEhF,IAAI,cAAc,IAAI,kBAAkB,IAAI;QAC1C,OAAO,GAAG,UAAU,EAAE,EAAE,UAAU,GAAG,EAAE,SAAS;IAClD;IACA,OAAO,GAAG,UAAU,EAAE,EAAE,UAAU,GAAG,EAAE,IAAI,kBAAkB,GAAG,EAAE,EAAE,SAAS;AAC/E;AAEO,MAAM,qBAAqB,CAAC,OACjC,IAAI,KAAK,cAAc,CAAC,SAAS;QAC/B,MAAM;QACN,OAAO;QACP,KAAK;IACP,GAAG,MAAM,CAAC;;AAML,SAAS,qBAAqB,OAAgB;IACnD,MAAM,YAAY,oDAAyB,UAAU,QAAQ,GAAG,CAAC,eAAe,KAAK;IAErF,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;IACvC,MAAM,iBAAiB,QAAQ,GAAG,CAAC,WAAW,IAAI;IAClD,MAAM,qBAAqB,eAAe;IAE1C,wCAAuC;QACrC,OAAO;YACL,SAAS;YACT,UAAU,IAAI,SAAS,MAAM;gBAAE,QAAQ;YAAI;QAC7C;IACF;;;AAGF,EAEA,qDAAqD;CACrD,mDAAmD","debugId":null}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  type = \"button\",\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      type={Comp === \"button\" ? type : undefined}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,OAAO,QAAQ,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kIAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,MAAM,SAAS,WAAW,OAAO;QAChC,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 256, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/env.ts"],"sourcesContent":["import { z } from \"zod\";\n\n// Client-safe environment variables (can be imported by client code)\nconst ClientEnvSchema = z.object({\n  NEXT_PUBLIC_SUPABASE_URL: z.string().url(),\n  NEXT_PUBLIC_SUPABASE_ANON_KEY: z.string().min(1).optional(),\n  NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY: z.string().min(1).optional(),\n  NEXT_PUBLIC_SITE_URL: z.string().url(),\n});\n\n// Validate client-safe environment variables\nexport const clientEnv = ClientEnvSchema.parse({\n  NEXT_PUBLIC_SUPABASE_URL: process.env.NEXT_PUBLIC_SUPABASE_URL,\n  NEXT_PUBLIC_SUPABASE_ANON_KEY: process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,\n  NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY: process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY,\n  NEXT_PUBLIC_SITE_URL: process.env.NEXT_PUBLIC_SITE_URL,\n});\n\n// Helper to get the Supabase anon key (supports both naming conventions)\nexport const getSupabaseAnonKey = () => clientEnv.NEXT_PUBLIC_SUPABASE_ANON_KEY || clientEnv.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY!;\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,qEAAqE;AACrE,MAAM,kBAAkB,kLAAC,CAAC,MAAM,CAAC;IAC/B,0BAA0B,kLAAC,CAAC,MAAM,GAAG,GAAG;IACxC,+BAA+B,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,QAAQ;IACzD,sCAAsC,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,QAAQ;IAChE,sBAAsB,kLAAC,CAAC,MAAM,GAAG,GAAG;AACtC;AAGO,MAAM,YAAY,gBAAgB,KAAK,CAAC;IAC7C,wBAAwB;IACxB,6BAA6B;IAC7B,oCAAoC;IACpC,oBAAoB;AACtB;AAGO,MAAM,qBAAqB,IAAM,UAAU,6BAA6B,IAAI,UAAU,oCAAoC","debugId":null}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\";\nimport { cookies } from \"next/headers\";\nimport { getSupabaseAnonKey } from \"@/lib/env\";\n\n// Type for test mock client\ntype MockSupabaseClient = {\n  auth: {\n    getUser: () => Promise<{ data: { user: null }; error: null }>;\n    verifyOtp: () => Promise<{ data: { user: null; session: null }; error: null }>;\n    signInWithPassword: () => Promise<{ error: null }>;\n  };\n  storage: {\n    from: () => {\n      upload: () => Promise<{ error: null }>;\n      download: () => Promise<{ data: null; error: null }>;\n      remove: () => Promise<{ error: null }>;\n      getPublicUrl: () => { data: { publicUrl: string } };\n      createSignedUrl: () => Promise<{ data: { signedUrl: string }; error: null }>;\n      createSignedUploadUrl: () => Promise<{ data: { signedUrl: string }; error: null }>;\n      list: () => Promise<{ data: unknown[]; error: null }>;\n    };\n  };\n};\n\n/**\n * Especially important if using Fluid compute: Don't put this client in a\n * global variable. Always create a new client within each function when using\n * it.\n */\nexport async function createClient() {\n  const cookieStore = await cookies();\n\n  // In test environment, return a mock client to prevent Supabase errors\n  // The test authentication is handled via headers, not cookies\n  if (process.env.NODE_ENV === 'test') {\n    return {\n      auth: {\n        getUser: async () => ({\n          data: { user: null },\n          error: null\n        }),\n        verifyOtp: async () => ({\n          data: { user: null, session: null },\n          error: null\n        }),\n        signInWithPassword: async () => ({ error: null })\n      },\n      storage: {\n        from: () => ({\n          upload: async () => ({ error: null }),\n          download: async () => ({ data: null, error: null }),\n          remove: async () => ({ error: null }),\n          getPublicUrl: () => ({ data: { publicUrl: '' } }),\n          createSignedUrl: async () => ({ data: { signedUrl: '' }, error: null }),\n          createSignedUploadUrl: async () => ({ data: { signedUrl: '' }, error: null }),\n          list: async () => ({ data: [], error: null })\n        })\n      }\n    } as MockSupabaseClient;\n  }\n\n  return createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    getSupabaseAnonKey(),\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll();\n        },\n        setAll(cookiesToSet) {\n          try {\n            cookiesToSet.forEach(({ name, value, options }) =>\n              cookieStore.set(name, value, options),\n            );\n          } catch {\n            // The `setAll` method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    },\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;;;;AA2BO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,uEAAuE;IACvE,8DAA8D;IAC9D;;IA2BA,OAAO,IAAA,+LAAkB,gFAEvB,IAAA,gIAAkB,KAClB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ","debugId":null}},
    {"offset": {"line": 320, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/env-server.ts"],"sourcesContent":["import { z } from \"zod\";\n\nconst ServerEnvSchema = z.object({\n  NODE_ENV: z.enum([\"development\", \"test\", \"production\"]),\n  ALLOW_TEST_ENDPOINTS: z.string().optional(), // must be '1' AND NODE_ENV==='test'\n\n  // Database\n  DATABASE_URL: z.string().url(),\n\n  // Supabase\n  SUPABASE_SERVICE_ROLE_KEY: z.string().min(1),\n\n  // Optional monitoring\n  SENTRY_DSN: z.string().url().optional(),\n\n  // Test configuration\n  TEST_SECRET: z.string().optional(),\n\n  // PII encryption\n  FIELD_ENCRYPTION_KEY: z.string().min(1, \"FIELD_ENCRYPTION_KEY is required for PII encryption\"),\n  FIELD_ENCRYPTION_SALT: z.string().optional(),\n}).superRefine((env, ctx) => {\n  // Validate FIELD_ENCRYPTION_KEY format (should be base64-encoded 32 bytes)\n  if (env.FIELD_ENCRYPTION_KEY) {\n    try {\n      const key = Buffer.from(env.FIELD_ENCRYPTION_KEY, 'base64');\n      if (key.length !== 32) {\n        ctx.addIssue({\n          code: z.ZodIssueCode.custom,\n          message: \"FIELD_ENCRYPTION_KEY must be a base64-encoded 32-byte key\"\n        });\n      }\n    } catch {\n      ctx.addIssue({\n        code: z.ZodIssueCode.custom,\n        message: \"FIELD_ENCRYPTION_KEY must be valid base64\"\n      });\n    }\n  }\n\n  // Test affordances can only be enabled in test environment OR when explicitly allowed\n  // This allows test endpoints to work during E2E testing even if NODE_ENV != test\n  if (env.NODE_ENV !== \"test\" && env.ALLOW_TEST_ENDPOINTS !== \"1\") {\n    ctx.addIssue({\n      code: z.ZodIssueCode.custom,\n      message: \"Test affordances cannot be enabled outside test environment unless ALLOW_TEST_ENDPOINTS=1\"\n    });\n  }\n\n  // Test secret should only be set in development/test or when test affordances are enabled\n  if (env.NODE_ENV === \"production\" && env.TEST_SECRET && env.ALLOW_TEST_ENDPOINTS !== \"1\") {\n    ctx.addIssue({\n      code: z.ZodIssueCode.custom,\n      message: \"TEST_SECRET should not be set in production unless ALLOW_TEST_ENDPOINTS=1\"\n    });\n  }\n});\n\n// Validate server-side environment variables\nexport const serverEnv = ServerEnvSchema.parse({\n  ...process.env,\n  NODE_ENV: process.env.NODE_ENV || \"development\",\n});\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB,kLAAC,CAAC,MAAM,CAAC;IAC/B,UAAU,kLAAC,CAAC,IAAI,CAAC;QAAC;QAAe;QAAQ;KAAa;IACtD,sBAAsB,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAEzC,WAAW;IACX,cAAc,kLAAC,CAAC,MAAM,GAAG,GAAG;IAE5B,WAAW;IACX,2BAA2B,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IAE1C,sBAAsB;IACtB,YAAY,kLAAC,CAAC,MAAM,GAAG,GAAG,GAAG,QAAQ;IAErC,qBAAqB;IACrB,aAAa,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAEhC,iBAAiB;IACjB,sBAAsB,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxC,uBAAuB,kLAAC,CAAC,MAAM,GAAG,QAAQ;AAC5C,GAAG,WAAW,CAAC,CAAC,KAAK;IACnB,2EAA2E;IAC3E,IAAI,IAAI,oBAAoB,EAAE;QAC5B,IAAI;YACF,MAAM,MAAM,OAAO,IAAI,CAAC,IAAI,oBAAoB,EAAE;YAClD,IAAI,IAAI,MAAM,KAAK,IAAI;gBACrB,IAAI,QAAQ,CAAC;oBACX,MAAM,kLAAC,CAAC,YAAY,CAAC,MAAM;oBAC3B,SAAS;gBACX;YACF;QACF,EAAE,OAAM;YACN,IAAI,QAAQ,CAAC;gBACX,MAAM,kLAAC,CAAC,YAAY,CAAC,MAAM;gBAC3B,SAAS;YACX;QACF;IACF;IAEA,sFAAsF;IACtF,iFAAiF;IACjF,IAAI,IAAI,QAAQ,KAAK,UAAU,IAAI,oBAAoB,KAAK,KAAK;QAC/D,IAAI,QAAQ,CAAC;YACX,MAAM,kLAAC,CAAC,YAAY,CAAC,MAAM;YAC3B,SAAS;QACX;IACF;IAEA,0FAA0F;IAC1F,IAAI,IAAI,QAAQ,KAAK,gBAAgB,IAAI,WAAW,IAAI,IAAI,oBAAoB,KAAK,KAAK;QACxF,IAAI,QAAQ,CAAC;YACX,MAAM,kLAAC,CAAC,YAAY,CAAC,MAAM;YAC3B,SAAS;QACX;IACF;AACF;AAGO,MAAM,YAAY,gBAAgB,KAAK,CAAC;IAC7C,GAAG,QAAQ,GAAG;IACd,UAAU,mDAAwB;AACpC","debugId":null}},
    {"offset": {"line": 386, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\nimport { serverEnv } from './env-server'\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],\n    datasources: {\n      db: {\n        url: `${serverEnv.DATABASE_URL}?connection_limit=5&pool_timeout=20`,\n      },\n    },\n  })\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;IAC3E,aAAa;QACX,IAAI;YACF,KAAK,GAAG,iIAAS,CAAC,YAAY,CAAC,mCAAmC,CAAC;QACrE;IACF;AACF;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 412, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/prisma.ts"],"sourcesContent":["export { prisma } from './db'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 419, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/auth/session.server.ts"],"sourcesContent":["\"use server\";\n\nimport { UserRole } from \"@prisma/client\";\nimport { createClient } from \"@/lib/supabase/server\";\nimport { prisma } from \"@/lib/prisma\";\n\n/**\n * Get SSR-safe user info for middleware/guards\n * Returns { id, role } | null without throwing redirects\n */\nexport async function getSSRUser(): Promise<{ id: string; role: UserRole } | null> {\n  try {\n    // Check real session\n    const supabase = await createClient();\n    const { data } = await supabase.auth.getUser();\n    const user = data?.user;\n\n    if (!user) {\n      return null;\n    }\n\n    // Get role from profile\n    const profile = await prisma.profile.findUnique({\n      where: { id: user.id },\n      select: { role: true },\n    });\n\n    if (!profile) {\n      return null;\n    }\n\n    return {\n      id: user.id,\n      role: profile.role,\n    };\n  } catch {\n    // Return null on any error to avoid SSR failures\n    return null;\n  }\n}"],"names":[],"mappings":";;;;;AAGA;AACA;AAAA;;;;;AAMO,eAAe;IACpB,IAAI;QACF,qBAAqB;QACrB,MAAM,WAAW,MAAM,IAAA,yIAAY;QACnC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;QAC5C,MAAM,OAAO,MAAM;QAEnB,IAAI,CAAC,MAAM;YACT,OAAO;QACT;QAEA,wBAAwB;QACxB,MAAM,UAAU,MAAM,mHAAM,CAAC,OAAO,CAAC,UAAU,CAAC;YAC9C,OAAO;gBAAE,IAAI,KAAK,EAAE;YAAC;YACrB,QAAQ;gBAAE,MAAM;YAAK;QACvB;QAEA,IAAI,CAAC,SAAS;YACZ,OAAO;QACT;QAEA,OAAO;YACL,IAAI,KAAK,EAAE;YACX,MAAM,QAAQ,IAAI;QACpB;IACF,EAAE,OAAM;QACN,iDAAiD;QACjD,OAAO;IACT;AACF;;;IA7BsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 470, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/app/admin/layout.tsx"],"sourcesContent":["// app/admin/layout.tsx\n\nimport { redirect, notFound } from \"next/navigation\";\nimport { UserRole } from \"@prisma/client\";\nimport Link from \"next/link\";\nimport { Button } from \"@/components/ui/button\";\nimport { getSSRUser } from \"@/lib/auth/session.server\";\n\nexport default async function AdminLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const user = await getSSRUser();\n  if (!user) {\n    redirect(\"/auth/login?reason=authentication_required&returnTo=\" + encodeURIComponent(\"/admin\"));\n  }\n\n  // Check for STAFF or ADMIN (as before for general admin access)\n  if (user.role !== UserRole.ADMIN && user.role !== UserRole.STAFF) {\n    notFound(); // Use 404 instead of redirect for insufficient role\n  }\n\n  // Check if the user is specifically an ADMIN for the Users link\n  const isAdmin = user.role === UserRole.ADMIN;\n\n  return (\n    <div className=\"flex flex-col min-h-screen\">\n      <nav className=\"w-full flex justify-center border-b border-b-foreground/10 h-16\">\n        <div className=\"w-full max-w-6xl flex justify-between items-center p-3 px-8 text-sm\">\n          <div className=\"flex gap-6 items-center\">\n            <Link href=\"/\" className=\"font-bold\">\n              Senior Dog Rescue\n            </Link>\n            <Button variant=\"ghost\" asChild>\n              <Link href=\"/admin\" data-testid=\"nav-dogs\">Dashboard</Link>\n            </Button>\n            <Button variant=\"ghost\" asChild>\n              <Link href=\"/admin/add-dog\">Add Dog</Link>\n            </Button>\n            <Button variant=\"ghost\" asChild>\n              <Link href=\"/admin/fosters\" data-testid=\"nav-fosters\">Fosters</Link>\n            </Button>\n            {/* --- NEW Applications Link --- */}\n            <Button variant=\"ghost\" asChild>\n              <Link href=\"/admin/applications\" data-testid=\"nav-applications\">Applications</Link>\n            </Button>\n            {/* --- NEW Shifts Link --- */}\n            <Button variant=\"ghost\" asChild>\n              <Link href=\"/admin/shifts\" data-testid=\"nav-shifts\">Manage Shifts</Link>\n            </Button>\n            <Button variant=\"ghost\" asChild>\n              <Link href=\"/admin/events\" data-testid=\"nav-events\">Events</Link>\n            </Button>\n\n            {/* --- Conditionally Render Manage Users Link --- */}\n            {isAdmin && (\n                <Button variant=\"ghost\" asChild>\n                    <Link href=\"/admin/users\" data-testid=\"nav-users\">Manage Users</Link>\n                </Button>\n            )}\n          </div>\n          {/* We could put an AuthButton here too if needed */}\n        </div>\n      </nav>\n      <main className=\"flex-1 w-full\">\n        {children}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;;;AAEvB;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAEe,eAAe,YAAY,EACxC,QAAQ,EAGT;IACC,MAAM,OAAO,MAAM,IAAA,8IAAU;IAC7B,IAAI,CAAC,MAAM;QACT,IAAA,iMAAQ,EAAC,yDAAyD,mBAAmB;IACvF;IAEA,gEAAgE;IAChE,IAAI,KAAK,IAAI,KAAK,yIAAQ,CAAC,KAAK,IAAI,KAAK,IAAI,KAAK,yIAAQ,CAAC,KAAK,EAAE;QAChE,IAAA,iMAAQ,KAAI,oDAAoD;IAClE;IAEA,gEAAgE;IAChE,MAAM,UAAU,KAAK,IAAI,KAAK,yIAAQ,CAAC,KAAK;IAE5C,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,0LAAI;gCAAC,MAAK;gCAAI,WAAU;0CAAY;;;;;;0CAGrC,8OAAC,qIAAM;gCAAC,SAAQ;gCAAQ,OAAO;0CAC7B,cAAA,8OAAC,0LAAI;oCAAC,MAAK;oCAAS,eAAY;8CAAW;;;;;;;;;;;0CAE7C,8OAAC,qIAAM;gCAAC,SAAQ;gCAAQ,OAAO;0CAC7B,cAAA,8OAAC,0LAAI;oCAAC,MAAK;8CAAiB;;;;;;;;;;;0CAE9B,8OAAC,qIAAM;gCAAC,SAAQ;gCAAQ,OAAO;0CAC7B,cAAA,8OAAC,0LAAI;oCAAC,MAAK;oCAAiB,eAAY;8CAAc;;;;;;;;;;;0CAGxD,8OAAC,qIAAM;gCAAC,SAAQ;gCAAQ,OAAO;0CAC7B,cAAA,8OAAC,0LAAI;oCAAC,MAAK;oCAAsB,eAAY;8CAAmB;;;;;;;;;;;0CAGlE,8OAAC,qIAAM;gCAAC,SAAQ;gCAAQ,OAAO;0CAC7B,cAAA,8OAAC,0LAAI;oCAAC,MAAK;oCAAgB,eAAY;8CAAa;;;;;;;;;;;0CAEtD,8OAAC,qIAAM;gCAAC,SAAQ;gCAAQ,OAAO;0CAC7B,cAAA,8OAAC,0LAAI;oCAAC,MAAK;oCAAgB,eAAY;8CAAa;;;;;;;;;;;4BAIrD,yBACG,8OAAC,qIAAM;gCAAC,SAAQ;gCAAQ,OAAO;0CAC3B,cAAA,8OAAC,0LAAI;oCAAC,MAAK;oCAAe,eAAY;8CAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAOhE,8OAAC;gBAAK,WAAU;0BACb;;;;;;;;;;;;AAIT","debugId":null}}]
}