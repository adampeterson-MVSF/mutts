{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/utils/index.ts"],"sourcesContent":["// lib/utils/index.ts\n// Shared utility functions for the application\n\nimport { AppStatus, AppType } from \"@prisma/client\";\n\n/**\n * Humanize enum values by replacing underscores with spaces and capitalizing words\n */\nexport const humanizeEnum = (value: string): string => {\n  return value\n    .toLowerCase()\n    .replace(/_/g, ' ')\n    .replace(/\\b\\w/g, l => l.toUpperCase());\n};\n\n/**\n * Status variant functions for consistent badge styling\n */\nexport const getAppStatusVariant = (status: AppStatus) => {\n  switch (status) {\n    case \"APPROVED\": return \"default\";\n    case \"SUBMITTED\": case \"IN_REVIEW\": return \"secondary\";\n    case \"REJECTED\": return \"destructive\";\n    default: return \"outline\";\n  }\n};\n\n/**\n * Get allowed status transitions for applications\n */\nexport const getAllowedStatuses = (applicationType: AppType, currentStatus?: AppStatus): AppStatus[] => {\n  const allStatuses = Object.values(AppStatus);\n\n  // For foster applications, restrict some status transitions\n  if (applicationType === AppType.FOSTER) {\n    // Fosters can be approved (creates foster profile) or rejected\n    // Can't be marked as \"IN_REVIEW\" inappropriately\n    return allStatuses.filter(status =>\n      status !== AppStatus.IN_REVIEW || currentStatus === AppStatus.IN_REVIEW\n    );\n  }\n\n  // For adoption applications, all statuses are allowed\n  return allStatuses;\n};\n\n/**\n * Check if status change notes are required for a given status\n */\nexport const areStatusNotesRequired = (status: AppStatus): boolean => {\n  return status === AppStatus.APPROVED || status === AppStatus.REJECTED;\n};\n"],"names":[],"mappings":"AAAA,qBAAqB;AACrB,+CAA+C;;;;;;;;;;;AAE/C;;AAKO,MAAM,eAAe,CAAC;IAC3B,OAAO,MACJ,WAAW,GACX,OAAO,CAAC,MAAM,KACd,OAAO,CAAC,SAAS,CAAA,IAAK,EAAE,WAAW;AACxC;AAKO,MAAM,sBAAsB,CAAC;IAClC,OAAQ;QACN,KAAK;YAAY,OAAO;QACxB,KAAK;QAAa,KAAK;YAAa,OAAO;QAC3C,KAAK;YAAY,OAAO;QACxB;YAAS,OAAO;IAClB;AACF;AAKO,MAAM,qBAAqB,CAAC,iBAA0B;IAC3D,MAAM,cAAc,OAAO,MAAM,CAAC,sKAAS;IAE3C,4DAA4D;IAC5D,IAAI,oBAAoB,oKAAO,CAAC,MAAM,EAAE;QACtC,+DAA+D;QAC/D,iDAAiD;QACjD,OAAO,YAAY,MAAM,CAAC,CAAA,SACxB,WAAW,sKAAS,CAAC,SAAS,IAAI,kBAAkB,sKAAS,CAAC,SAAS;IAE3E;IAEA,sDAAsD;IACtD,OAAO;AACT;AAKO,MAAM,yBAAyB,CAAC;IACrC,OAAO,WAAW,sKAAS,CAAC,QAAQ,IAAI,WAAW,sKAAS,CAAC,QAAQ;AACvE","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { AppStatus, AppType, DogStatus } from \"@prisma/client\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\n\n// This check can be removed, it is just for tutorial purposes\nexport const hasEnvVars =\n  !!(process.env.NEXT_PUBLIC_SUPABASE_URL &&\n     process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);\n\n\nexport const getDogStatusVariant = (status: DogStatus) => {\n  switch (status) {\n    case \"ADOPTED\": return \"default\";\n    case \"AVAILABLE\": return \"secondary\";\n    case \"MEDICAL_HOLD\": return \"destructive\";\n    case \"PENDING\": case \"IN_FOSTER\": return \"outline\";\n    default: return \"secondary\";\n  }\n};\n\n// Date formatting utilities\nexport const formatDateTime = (date: Date) =>\n  new Intl.DateTimeFormat(\"en-US\", {\n    month: \"short\",\n    day: \"numeric\",\n    year: \"numeric\",\n    hour: \"numeric\",\n    minute: \"2-digit\",\n  }).format(date);\n\nexport const formatDateRange = (start: Date, end: Date) => {\n  const sameDay =\n    start.getFullYear() === end.getFullYear() &&\n    start.getMonth() === end.getMonth() &&\n    start.getDate() === end.getDate();\n\n  if (sameDay) {\n    return `${formatDateTime(start)} ‚Äì ${new Intl.DateTimeFormat(\"en-US\", {\n      hour: \"numeric\",\n      minute: \"2-digit\",\n    }).format(end)}`;\n  }\n\n  return `${formatDateTime(start)} ‚Üí ${formatDateTime(end)}`;\n};\n\nexport const formatShiftTime = (start: Date, end: Date): string => {\n  const startDate = start.toLocaleDateString();\n  const startTime = start.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });\n  const endTime = end.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });\n\n  if (startDate === end.toLocaleDateString()) {\n    return `${startDate}, ${startTime} - ${endTime}`;\n  }\n  return `${startDate}, ${startTime} - ${end.toLocaleDateString()}, ${endTime}`;\n};\n\nexport const formatAdoptionDate = (date: Date) =>\n  new Intl.DateTimeFormat(\"en-US\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n  }).format(date);\n\n// Re-export shared utilities\nexport { humanizeEnum, getAppStatusVariant, getAllowedStatuses, areStatusNotesRequired } from './utils/index';\n\n// Test endpoint validation - allow in test environment or with test secret header\nexport function validateTestEndpoint(request: Request): { isValid: boolean; response?: Response } {\n  const isTestEnv = process.env.NODE_ENV === 'test' && process.env.EXPOSE_TEST_API === '1';\n\n  const testSecret = request.headers.get('x-test-secret');\n  const expectedSecret = process.env.TEST_SECRET || 'test-secret-default';\n  const hasValidTestSecret = testSecret === expectedSecret;\n\n  if (!isTestEnv || !hasValidTestSecret) {\n    return {\n      isValid: false,\n      response: new Response(null, { status: 404 })\n    };\n  }\n\n  return { isValid: true };\n}\n\n// Route definitions have been moved to lib/routes.ts\n// Import route functions from @/lib/routes instead\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAYK;AAZL;AACA;AAqEA,6BAA6B;AAC7B;;;AAlEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB;AAIO,MAAM,aACX,CAAC,CAAC,CAAC,kKACyC;AAGvC,MAAM,sBAAsB,CAAC;IAClC,OAAQ;QACN,KAAK;YAAW,OAAO;QACvB,KAAK;YAAa,OAAO;QACzB,KAAK;YAAgB,OAAO;QAC5B,KAAK;QAAW,KAAK;YAAa,OAAO;QACzC;YAAS,OAAO;IAClB;AACF;AAGO,MAAM,iBAAiB,CAAC,OAC7B,IAAI,KAAK,cAAc,CAAC,SAAS;QAC/B,OAAO;QACP,KAAK;QACL,MAAM;QACN,MAAM;QACN,QAAQ;IACV,GAAG,MAAM,CAAC;AAEL,MAAM,kBAAkB,CAAC,OAAa;IAC3C,MAAM,UACJ,MAAM,WAAW,OAAO,IAAI,WAAW,MACvC,MAAM,QAAQ,OAAO,IAAI,QAAQ,MACjC,MAAM,OAAO,OAAO,IAAI,OAAO;IAEjC,IAAI,SAAS;QACX,OAAO,GAAG,eAAe,OAAO,GAAG,EAAE,IAAI,KAAK,cAAc,CAAC,SAAS;YACpE,MAAM;YACN,QAAQ;QACV,GAAG,MAAM,CAAC,MAAM;IAClB;IAEA,OAAO,GAAG,eAAe,OAAO,GAAG,EAAE,eAAe,MAAM;AAC5D;AAEO,MAAM,kBAAkB,CAAC,OAAa;IAC3C,MAAM,YAAY,MAAM,kBAAkB;IAC1C,MAAM,YAAY,MAAM,kBAAkB,CAAC,EAAE,EAAE;QAAE,MAAM;QAAW,QAAQ;IAAU;IACpF,MAAM,UAAU,IAAI,kBAAkB,CAAC,EAAE,EAAE;QAAE,MAAM;QAAW,QAAQ;IAAU;IAEhF,IAAI,cAAc,IAAI,kBAAkB,IAAI;QAC1C,OAAO,GAAG,UAAU,EAAE,EAAE,UAAU,GAAG,EAAE,SAAS;IAClD;IACA,OAAO,GAAG,UAAU,EAAE,EAAE,UAAU,GAAG,EAAE,IAAI,kBAAkB,GAAG,EAAE,EAAE,SAAS;AAC/E;AAEO,MAAM,qBAAqB,CAAC,OACjC,IAAI,KAAK,cAAc,CAAC,SAAS;QAC/B,MAAM;QACN,OAAO;QACP,KAAK;IACP,GAAG,MAAM,CAAC;;AAML,SAAS,qBAAqB,OAAgB;IACnD,MAAM,YAAY,oDAAyB,UAAU,2KAAO,CAAC,GAAG,CAAC,eAAe,KAAK;IAErF,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;IACvC,MAAM,iBAAiB,2KAAO,CAAC,GAAG,CAAC,WAAW,IAAI;IAClD,MAAM,qBAAqB,eAAe;IAE1C,wCAAuC;QACrC,OAAO;YACL,SAAS;YACT,UAAU,IAAI,SAAS,MAAM;gBAAE,QAAQ;YAAI;QAC7C;IACF;;;AAGF,EAEA,qDAAqD;CACrD,mDAAmD","debugId":null}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  type = \"button\",\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      type={Comp === \"button\" ? type : undefined}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,OAAO,QAAQ,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qIAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,MAAM,SAAS,WAAW,OAAO;QAChC,GAAG,KAAK;;;;;;AAGf;KArBS","debugId":null}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/components/testing/RouteReady.tsx"],"sourcesContent":["/**\n * RouteReady - A test sentinel component that marks when a route has finished loading.\n *\n * This component renders a visible element that Playwright can detect as visible,\n * while remaining visually unobtrusive to users. Used for E2E test synchronization.\n */\nexport function RouteReady({ route }: { route: string }) {\n  return (\n    <div\n      data-testid=\"route-ready\"\n      data-route={route}\n      aria-hidden=\"true\"\n      style={{\n        position: 'absolute',\n        width: 1,\n        height: 1,\n        top: 0,\n        left: 0,\n        opacity: 1, // Make visible for test detection\n        pointerEvents: 'none',\n        visibility: 'visible', // Ensure it's visible\n      }}\n    />\n  );\n}\n\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;;;AACM,SAAS,WAAW,EAAE,KAAK,EAAqB;IACrD,qBACE,6LAAC;QACC,eAAY;QACZ,cAAY;QACZ,eAAY;QACZ,OAAO;YACL,UAAU;YACV,OAAO;YACP,QAAQ;YACR,KAAK;YACL,MAAM;YACN,SAAS;YACT,eAAe;YACf,YAAY;QACd;;;;;;AAGN;KAlBgB","debugId":null}},
    {"offset": {"line": 269, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className,\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nInput.displayName = \"Input\";\n\nexport { Input };\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,IAAA,qIAAE,EACX,2WACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 304, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,6LAAC,4KAAmB;QAClB,aAAU;QACV,WAAW,IAAA,qIAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 337, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/dog-filters.ts"],"sourcesContent":["/**\n * Dog filters DTO and URL helpers for consistent filtering across dog-related components\n */\n\nimport { DogSize, Gender, DogStatus } from \"@prisma/client\";\n\n/**\n * Canonical parameter names for dog filter URL search parameters\n */\nexport const DOG_FILTER_PARAMS = {\n  BREED: \"breed\",\n  AGE_MIN: \"ageMin\",\n  AGE_MAX: \"ageMax\",\n  SPECIAL_NEEDS: \"specialNeeds\",\n  SIZE: \"size\",\n  GENDER: \"gender\",\n  HAS_PHOTOS: \"hasPhotos\",\n} as const;\n\n/**\n * Canonical parameter names for admin dog filter URL search parameters\n */\nexport const ADMIN_DOG_FILTER_PARAMS = {\n  STATUS: \"status\",\n  FOSTER_PROFILE_ID: \"fosterProfileId\",\n  BREED: \"breed\",\n  GENDER: \"gender\",\n  SIZE: \"size\",\n  WEIGHT_MIN: \"weightMin\",\n  WEIGHT_MAX: \"weightMax\",\n  SPECIAL_NEEDS: \"specialNeeds\",\n  HAS_PHOTOS: \"hasPhotos\",\n} as const;\n\n/**\n * Magic values for foster filtering (kept at edge layers)\n */\nexport const FOSTER_FILTER_VALUES = {\n  ALL: \"all\",\n  NONE: \"none\", // URL layer sentinel for \"no foster assigned\"\n  NO_FOSTER_FORM: \"\", // Form layer sentinel for \"no foster assigned\" (empty string)\n} as const;\n\n/**\n * Dog filters DTO - data transfer object for dog filtering (adopt page)\n */\nexport type DogFilters = {\n  breed?: string;\n  gender?: Gender;\n  size?: DogSize;\n  specialNeeds?: \"true\";\n  hasPhotos?: \"true\";\n};\n\n/**\n * Admin dog filters DTO - data transfer object for admin dog filtering\n */\nexport type AdminDogFilters = {\n  status?: DogStatus | \"all\";\n  fosterProfileId?: string;\n  breed?: string;\n  gender?: Gender | \"all\";\n  size?: DogSize | \"all\";\n  weightMin?: string;\n  weightMax?: string;\n  specialNeeds?: \"all\" | \"true\" | \"false\";\n  hasPhotos?: \"all\" | \"true\" | \"false\";\n};\n\n/**\n * Type guard to check if a foster filter value means \"no foster assigned\"\n */\nexport function isNoFosterFilter(value: string): boolean {\n  return value === FOSTER_FILTER_VALUES.NONE;\n}\n\n/**\n * Parse a foster filter value into a typed union or enum.\n * Returns the profile ID string if it's a specific foster, null if \"no foster\", or undefined if \"all\".\n */\nexport function parseFosterFilterValue(value: string): string | null | undefined {\n  if (value === FOSTER_FILTER_VALUES.ALL) return undefined;\n  if (value === FOSTER_FILTER_VALUES.NONE) return null;\n  return value; // Specific foster profile ID\n}\n\n/**\n * Parse dog filters from URL search parameters\n */\nexport function parseDogFilters(searchParams: URLSearchParams): DogFilters {\n  return {\n    breed: searchParams.get(DOG_FILTER_PARAMS.BREED) || undefined,\n    specialNeeds: searchParams.get(DOG_FILTER_PARAMS.SPECIAL_NEEDS) === \"true\" ? \"true\" : undefined,\n    size: searchParams.get(DOG_FILTER_PARAMS.SIZE) as DogSize || undefined,\n    gender: searchParams.get(DOG_FILTER_PARAMS.GENDER) as Gender || undefined,\n    hasPhotos: searchParams.get(DOG_FILTER_PARAMS.HAS_PHOTOS) === \"true\" ? \"true\" : undefined,\n  };\n}\n\n/**\n * Serialize dog filters to URL search parameters\n */\nexport function serializeDogFilters(filters: DogFilters): URLSearchParams {\n  const params = new URLSearchParams();\n\n  if (filters.breed) params.set(DOG_FILTER_PARAMS.BREED, filters.breed);\n  if (filters.specialNeeds) params.set(DOG_FILTER_PARAMS.SPECIAL_NEEDS, \"true\");\n  if (filters.size) params.set(DOG_FILTER_PARAMS.SIZE, filters.size);\n  if (filters.gender) params.set(DOG_FILTER_PARAMS.GENDER, filters.gender);\n  if (filters.hasPhotos) params.set(DOG_FILTER_PARAMS.HAS_PHOTOS, \"true\");\n\n  return params;\n}\n\n/**\n * Encode dog filters to URL search string\n */\nexport function encodeDogFilters(filters: DogFilters): string {\n  return serializeDogFilters(filters).toString();\n}\n\n/**\n * Check if any filters are active\n */\nexport function hasActiveFilters(filters: DogFilters): boolean {\n  return !!(\n    filters.breed ||\n    filters.specialNeeds ||\n    filters.size ||\n    filters.gender ||\n    filters.hasPhotos\n  );\n}\n\n/**\n * Create empty dog filters\n */\nexport function createEmptyDogFilters(): DogFilters {\n  return {};\n}\n\n/**\n * Get dog filters from URL search parameters with Next.js router\n */\nexport function getDogFiltersFromSearchParams(searchParams: URLSearchParams): DogFilters {\n  return parseDogFilters(searchParams);\n}\n\n/**\n * Update dog filters in URL using Next.js router\n */\nexport function updateDogFiltersInUrl(\n  router: { push: (url: string) => void }, // Next.js App Router useRouter\n  pathname: string,\n  currentFilters: DogFilters,\n  patch: Partial<DogFilters>\n): void {\n  const newFilters = { ...currentFilters, ...patch };\n  const params = serializeDogFilters(newFilters);\n  router.push(`${pathname}?${params.toString()}`);\n}\n\n/**\n * Parse admin dog filters from URL search parameters\n */\nexport function parseAdminDogFilters(searchParams: URLSearchParams): AdminDogFilters {\n  return {\n    status: searchParams.get(ADMIN_DOG_FILTER_PARAMS.STATUS) as DogStatus || \"all\",\n    fosterProfileId: searchParams.get(ADMIN_DOG_FILTER_PARAMS.FOSTER_PROFILE_ID) || \"all\",\n    breed: searchParams.get(ADMIN_DOG_FILTER_PARAMS.BREED) || \"all\",\n    gender: searchParams.get(ADMIN_DOG_FILTER_PARAMS.GENDER) as Gender || \"all\",\n    size: searchParams.get(ADMIN_DOG_FILTER_PARAMS.SIZE) as DogSize || \"all\",\n    weightMin: searchParams.get(ADMIN_DOG_FILTER_PARAMS.WEIGHT_MIN) || \"\",\n    weightMax: searchParams.get(ADMIN_DOG_FILTER_PARAMS.WEIGHT_MAX) || \"\",\n    specialNeeds: searchParams.get(ADMIN_DOG_FILTER_PARAMS.SPECIAL_NEEDS) as \"all\" | \"true\" | \"false\" || \"all\",\n    hasPhotos: searchParams.get(ADMIN_DOG_FILTER_PARAMS.HAS_PHOTOS) as \"all\" | \"true\" | \"false\" || \"all\",\n  };\n}\n\n/**\n * Serialize admin dog filters to URL search parameters\n */\nexport function serializeAdminDogFilters(filters: AdminDogFilters): URLSearchParams {\n  const params = new URLSearchParams();\n\n  if (filters.status && filters.status !== \"all\") params.set(ADMIN_DOG_FILTER_PARAMS.STATUS, filters.status);\n  if (filters.fosterProfileId && filters.fosterProfileId !== \"all\") params.set(ADMIN_DOG_FILTER_PARAMS.FOSTER_PROFILE_ID, filters.fosterProfileId);\n  if (filters.breed && filters.breed !== \"all\") params.set(ADMIN_DOG_FILTER_PARAMS.BREED, filters.breed);\n  if (filters.gender && filters.gender !== \"all\") params.set(ADMIN_DOG_FILTER_PARAMS.GENDER, filters.gender);\n  if (filters.size && filters.size !== \"all\") params.set(ADMIN_DOG_FILTER_PARAMS.SIZE, filters.size);\n  if (filters.weightMin && filters.weightMin !== \"\") params.set(ADMIN_DOG_FILTER_PARAMS.WEIGHT_MIN, filters.weightMin);\n  if (filters.weightMax && filters.weightMax !== \"\") params.set(ADMIN_DOG_FILTER_PARAMS.WEIGHT_MAX, filters.weightMax);\n  if (filters.specialNeeds && filters.specialNeeds !== \"all\") params.set(ADMIN_DOG_FILTER_PARAMS.SPECIAL_NEEDS, filters.specialNeeds);\n  if (filters.hasPhotos && filters.hasPhotos !== \"all\") params.set(ADMIN_DOG_FILTER_PARAMS.HAS_PHOTOS, filters.hasPhotos);\n\n  return params;\n}\n\n/**\n * Encode admin dog filters to URL search string\n */\nexport function encodeAdminDogFilters(filters: AdminDogFilters): string {\n  return serializeAdminDogFilters(filters).toString();\n}\n\n/**\n * Check if any admin dog filters are active\n */\nexport function hasActiveAdminDogFilters(filters: AdminDogFilters): boolean {\n  return !!(\n    (filters.status && filters.status !== \"all\") ||\n    (filters.fosterProfileId && filters.fosterProfileId !== \"all\") ||\n    (filters.breed && filters.breed !== \"all\") ||\n    (filters.gender && filters.gender !== \"all\") ||\n    (filters.size && filters.size !== \"all\") ||\n    (filters.weightMin && filters.weightMin !== \"\") ||\n    (filters.weightMax && filters.weightMax !== \"\") ||\n    (filters.specialNeeds && filters.specialNeeds !== \"all\") ||\n    (filters.hasPhotos && filters.hasPhotos !== \"all\")\n  );\n}\n\n/**\n * Create empty admin dog filters\n */\nexport function createEmptyAdminDogFilters(): AdminDogFilters {\n  return {\n    status: \"all\",\n    fosterProfileId: \"all\",\n    breed: \"all\",\n    gender: \"all\",\n    size: \"all\",\n    weightMin: \"\",\n    weightMax: \"\",\n    specialNeeds: \"all\",\n    hasPhotos: \"all\",\n  };\n}\n\n/**\n * Get admin dog filters from URL search parameters with Next.js router\n */\nexport function getAdminDogFiltersFromSearchParams(searchParams: URLSearchParams): AdminDogFilters {\n  return parseAdminDogFilters(searchParams);\n}\n\n/**\n * Update admin dog filters in URL using Next.js router\n */\nexport function updateAdminDogFiltersInUrl(\n  router: { push: (url: string) => void }, // Next.js App Router useRouter\n  pathname: string,\n  currentFilters: AdminDogFilters,\n  patch: Partial<AdminDogFilters>\n): void {\n  const newFilters = { ...currentFilters, ...patch };\n  const params = serializeAdminDogFilters(newFilters);\n  // Reset to page 1 when filtering\n  params.set(\"page\", \"1\");\n  router.push(`${pathname}?${params.toString()}`);\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 515, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/app/admin/dogs/_components/DogFilters.tsx"],"sourcesContent":["\"use client\";\n\nimport { useSearchParams, useRouter, usePathname } from \"next/navigation\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { humanizeEnum } from \"@/lib/utils\";\nimport { DogStatus, Gender, DogSize } from \"@prisma/client\";\nimport {\n  parseAdminDogFilters,\n  updateAdminDogFiltersInUrl,\n  FOSTER_FILTER_VALUES\n} from \"@/lib/dog-filters\";\n\ntype FosterProfile = {\n  id: string;\n  name: string | null;\n  email: string;\n};\n\ninterface DogFiltersProps {\n  fosters: FosterProfile[];\n  uniqueGenders: Gender[];\n  uniqueSizes: DogSize[];\n  uniqueBreeds: string[];\n  uniqueStatuses: DogStatus[];\n}\n\nexport function DogFilters({\n  fosters,\n  uniqueGenders,\n  uniqueSizes,\n  uniqueBreeds,\n  uniqueStatuses,\n}: DogFiltersProps) {\n  const router = useRouter();\n  const pathname = usePathname();\n  const searchParams = useSearchParams();\n\n  // Get filter values from URL using helpers\n  const filters = parseAdminDogFilters(searchParams);\n\n  // Use the complete list of fosters passed from server\n  const uniqueFosters = fosters;\n\n  /**\n   * Updates URL search parameters for filtering the admin dogs page using helpers.\n   */\n  const updateFilters = (patch: Partial<typeof filters>) => {\n    updateAdminDogFiltersInUrl(router, pathname, filters, patch);\n  };\n\n  return (\n    <div className=\"mb-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-7 gap-4\">\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"status-filter\">Status</Label>\n        <select\n          value={filters.status}\n          onChange={(e) => updateFilters({ status: e.target.value as DogStatus | \"all\" })}\n          data-testid=\"status-filter\"\n          className=\"h-10 rounded-md border border-input bg-transparent px-3 py-2 text-sm\"\n        >\n          <option value=\"all\">All Statuses</option>\n          {uniqueStatuses.map((status) => (\n            <option key={status} value={status}>\n              {humanizeEnum(status)}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"foster-filter\">Foster</Label>\n        <select\n          value={filters.fosterProfileId}\n          onChange={(e) => updateFilters({ fosterProfileId: e.target.value })}\n          data-testid=\"foster-filter\"\n          className=\"h-10 rounded-md border border-input bg-transparent px-3 py-2 text-sm\"\n        >\n          <option value={FOSTER_FILTER_VALUES.ALL}>All Fosters</option>\n          <option value={FOSTER_FILTER_VALUES.NONE}>No Foster</option>\n          {uniqueFosters.map((foster) => (\n            <option key={foster.id} value={foster.id}>\n              {foster.name || foster.email}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"breed-filter\">Breed</Label>\n        <select\n          value={filters.breed}\n          onChange={(e) => updateFilters({ breed: e.target.value })}\n          data-testid=\"breed-filter\"\n          className=\"h-10 rounded-md border border-input bg-transparent px-3 py-2 text-sm\"\n        >\n          <option value=\"all\">All Breeds</option>\n          {uniqueBreeds.map((breed) => (\n            <option key={breed} value={breed}>\n              {breed}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"gender-filter\">Gender</Label>\n        <select\n          value={filters.gender}\n          onChange={(e) => updateFilters({ gender: e.target.value as Gender | \"all\" })}\n          data-testid=\"gender-filter\"\n          className=\"h-10 rounded-md border border-input bg-transparent px-3 py-2 text-sm\"\n        >\n          <option value=\"all\">All Genders</option>\n          {uniqueGenders.map((gender) => (\n            <option key={gender} value={gender}>\n              {humanizeEnum(gender)}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"size-filter\">Size</Label>\n        <select\n          value={filters.size}\n          onChange={(e) => updateFilters({ size: e.target.value as DogSize | \"all\" })}\n          data-testid=\"size-filter\"\n          className=\"h-10 rounded-md border border-input bg-transparent px-3 py-2 text-sm\"\n        >\n          <option value=\"all\">All Sizes</option>\n          {uniqueSizes.map((size) => (\n            <option key={size} value={size}>\n              {humanizeEnum(size)}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"weight-min\">Weight Min (lbs)</Label>\n        <Input\n          id=\"weight-min\"\n          type=\"number\"\n          placeholder=\"Min weight\"\n          value={filters.weightMin}\n          onChange={(e) => updateFilters({ weightMin: e.target.value })}\n          className=\"h-10\"\n        />\n      </div>\n\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"weight-max\">Weight Max (lbs)</Label>\n        <Input\n          id=\"weight-max\"\n          type=\"number\"\n          placeholder=\"Max weight\"\n          value={filters.weightMax}\n          onChange={(e) => updateFilters({ weightMax: e.target.value })}\n          className=\"h-10\"\n        />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 880, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/components/ui/table.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Table({ className, ...props }: React.ComponentProps<\"table\">) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn(\"w-full caption-bottom text-sm\", className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<\"thead\">) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn(\"[&_tr]:border-b\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<\"tbody\">) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn(\"[&_tr:last-child]:border-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<\"tfoot\">) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        \"bg-muted/50 border-t font-medium [&>tr]:last:border-b-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<\"tr\">) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        \"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<\"th\">) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        \"text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<\"td\">) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        \"p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<\"caption\">) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn(\"text-muted-foreground mt-4 text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAIA;AAJA;;;AAMA,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAsC;IACnE,qBACE,6LAAC;QACC,aAAU;QACV,WAAU;kBAEV,cAAA,6LAAC;YACC,aAAU;YACV,WAAW,IAAA,qIAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIjB;KAbS;AAeT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qIAAE,EAAC,mBAAmB;QAChC,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAsC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qIAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qIAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAmC;IACnE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qIAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qIAAE,EACX,sJACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qIAAE,EACX,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OAC6B;IAChC,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qIAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS","debugId":null}},
    {"offset": {"line": 1024, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/log.ts"],"sourcesContent":["// lib/log.ts\n/**\n * Structured logging with Pino for production observability\n *\n * Replaces console.log with structured JSON logging for:\n * - Metrics aggregation (rate_limit.rejections, auth.redirects, etc.)\n * - Alerting (SLO violations)\n * - Debugging (correlated request tracing)\n */\n\nimport pino from \"pino\";\n\n// Configure Pino with production-safe settings\nconst inEdge = typeof (globalThis as { EdgeRuntime?: unknown }).EdgeRuntime !== \"undefined\";\nconst useTransport =\n  !inEdge &&\n  process.env.PINO_TRANSPORT !== \"none\" &&\n  process.env.NODE_ENV === \"production\"; // use worker only in prod\n\nexport const log = pino({\n  level: process.env.LOG_LEVEL ?? \"info\",\n  redact: {\n    paths: [\n      \"req.headers.authorization\",\n      \"req.headers.cookie\",\n      \"req.body.password\",\n      \"req.body.confirmPassword\",\n      \"password\",\n      \"token\"\n    ],\n    censor: \"[redacted]\"\n  },\n  // Add hostname and service name for multi-service correlation\n  base: {\n    service: \"senior-dog-rescue\",\n    hostname: process.env.HOSTNAME || \"unknown\",\n  },\n  // Pretty print in development for readability (but avoid worker transport)\n  ...(useTransport && {\n    transport: {\n      target: \"pino-pretty\",\n      options: {\n        colorize: true,\n        translateTime: \"SYS:standard\",\n        ignore: \"hostname,pid\",\n      },\n    },\n  }),\n});\n\n// Metric helpers for SLO tracking\nexport const metrics = {\n  // Rate limiting metrics\n  rateLimitRejection: (route: string, ipHash: string, userId?: string) =>\n    log.warn({\n      metric: \"rate_limit.rejections\",\n      route,\n      ipHash,\n      userId,\n      value: 1,\n    }, \"Rate limit exceeded\"),\n\n  // Authentication metrics\n  authRedirect: (route: string, reason: \"no_session\" | \"insufficient_role\", userRole?: string) =>\n    log.info({\n      metric: \"auth.redirects\",\n      route,\n      reason,\n      userRole,\n      value: 1,\n    }, \"Authentication redirect\"),\n\n  // Image security metrics\n  unknownImageHostRejection: (host: string, route: string) =>\n    log.warn({\n      metric: \"unknown_image_host_rejections\",\n      host,\n      route,\n      value: 1,\n    }, \"Unknown image host rejected\"),\n\n  // API latency metrics (p50/p95 tracking)\n  apiLatency: (route: string, method: string, statusCode: number, durationMs: number, userRole?: string) =>\n    log.info({\n      metric: \"api.latency_ms\",\n      route,\n      method,\n      statusCode,\n      durationMs,\n      userRole,\n      value: durationMs,\n    }, \"API request completed\"),\n\n  // Error metrics\n  serverError: (route: string, error: string, statusCode: number) =>\n    log.error({\n      metric: \"server.errors\",\n      route,\n      error,\n      statusCode,\n      value: 1,\n    }, \"Server error occurred\"),\n};\n\n// Helper to create child loggers with context\nexport function createRequestLogger(requestId: string, route: string) {\n  return log.child({\n    requestId,\n    route,\n  });\n}\n"],"names":[],"mappings":"AAAA,aAAa;AACb;;;;;;;CAOC;;;;;;;;AAQC;AANF;;AAEA,+CAA+C;AAC/C,MAAM,SAAS,OAAO,AAAC,WAAyC,WAAW,KAAK;AAChF,MAAM,eACJ,CAAC,UACD,2KAAO,CAAC,GAAG,CAAC,cAAc,KAAK,UAC/B,oDAAyB,cAAc,0BAA0B;AAE5D,MAAM,MAAM,IAAA,6IAAI,EAAC;IACtB,OAAO,2KAAO,CAAC,GAAG,CAAC,SAAS,IAAI;IAChC,QAAQ;QACN,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;SACD;QACD,QAAQ;IACV;IACA,8DAA8D;IAC9D,MAAM;QACJ,SAAS;QACT,UAAU,2KAAO,CAAC,GAAG,CAAC,QAAQ,IAAI;IACpC;IACA,2EAA2E;IAC3E,GAAI,gBAAgB;QAClB,WAAW;YACT,QAAQ;YACR,SAAS;gBACP,UAAU;gBACV,eAAe;gBACf,QAAQ;YACV;QACF;IACF,CAAC;AACH;AAGO,MAAM,UAAU;IACrB,wBAAwB;IACxB,oBAAoB,CAAC,OAAe,QAAgB,SAClD,IAAI,IAAI,CAAC;YACP,QAAQ;YACR;YACA;YACA;YACA,OAAO;QACT,GAAG;IAEL,yBAAyB;IACzB,cAAc,CAAC,OAAe,QAA4C,WACxE,IAAI,IAAI,CAAC;YACP,QAAQ;YACR;YACA;YACA;YACA,OAAO;QACT,GAAG;IAEL,yBAAyB;IACzB,2BAA2B,CAAC,MAAc,QACxC,IAAI,IAAI,CAAC;YACP,QAAQ;YACR;YACA;YACA,OAAO;QACT,GAAG;IAEL,yCAAyC;IACzC,YAAY,CAAC,OAAe,QAAgB,YAAoB,YAAoB,WAClF,IAAI,IAAI,CAAC;YACP,QAAQ;YACR;YACA;YACA;YACA;YACA;YACA,OAAO;QACT,GAAG;IAEL,gBAAgB;IAChB,aAAa,CAAC,OAAe,OAAe,aAC1C,IAAI,KAAK,CAAC;YACR,QAAQ;YACR;YACA;YACA;YACA,OAAO;QACT,GAAG;AACP;AAGO,SAAS,oBAAoB,SAAiB,EAAE,KAAa;IAClE,OAAO,IAAI,KAAK,CAAC;QACf;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 1132, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/image-loader.ts"],"sourcesContent":["// lib/image-loader.ts\n// Custom Next.js Image loader with telemetry for domain validation\n\nimport { metrics } from \"@/lib/log\";\n\n// Allowed domains from next.config.ts for reference\nconst ALLOWED_DOMAINS = [\n  'via.placeholder.com',\n  'picsum.photos',\n  'scontent.xx.fbcdn.net',\n  'external.xx.fbcdn.net',\n  'dl5zpyw5k3jeb.cloudfront.net',\n  'assets.adoptapet.com',\n  'muttville.org',\n  // Supabase domain will be added dynamically below\n];\n\nexport default function imageLoader({ src, width, quality }: {\n  src: string;\n  width: number;\n  quality?: number;\n}) {\n  // Extract hostname from src URL for telemetry\n  try {\n    const url = new URL(src);\n    const hostname = url.hostname;\n\n    // Get Supabase hostname if available\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\n    let supabaseHostname: string | null = null;\n    if (supabaseUrl) {\n      try {\n        supabaseHostname = new URL(supabaseUrl).hostname;\n      } catch {\n        // Invalid Supabase URL\n      }\n    }\n\n    const allAllowedDomains = supabaseHostname\n      ? [...ALLOWED_DOMAINS, supabaseHostname]\n      : ALLOWED_DOMAINS;\n\n    // Check if domain is in allowlist\n    const isAllowed = allAllowedDomains.some(allowed => {\n      if (allowed.includes('xx')) {\n        // Handle Facebook's region-specific domains\n        return hostname.includes('fbcdn.net');\n      }\n      return hostname === allowed || hostname === 'localhost'; // Allow localhost for development\n    });\n\n    if (!isAllowed) {\n      // Emit SLO metric for unknown image host rejections\n      metrics.unknownImageHostRejection(hostname, 'image-loader');\n\n      const errorMsg = `[ImageLoader] üö´ Domain not allowed: ${hostname}. Add to next.config.ts remotePatterns if legitimate.`;\n      console.error(errorMsg);\n      console.error(`[ImageLoader] Allowed domains: ${allAllowedDomains.join(', ')}`);\n      console.error(`[ImageLoader] Image source: ${src}`);\n\n      // In development, this will help catch configuration issues early\n      if (process.env.NODE_ENV === 'development') {\n        console.error(`[ImageLoader] To fix: Add '${hostname}' to remotePatterns in next.config.ts`);\n      }\n    } else {\n      // Log allowed domain usage for monitoring\n      console.log(`[ImageLoader] ‚úÖ Loading image from allowed domain: ${hostname}`);\n    }\n\n    // In development, warn about potentially problematic sources\n    if (process.env.NODE_ENV === 'development') {\n      const suspiciousPatterns = ['http:', 'localhost', '127.0.0.1', '0.0.0.0'];\n      const isSuspicious = suspiciousPatterns.some(pattern => src.includes(pattern));\n\n      if (isSuspicious) {\n        console.warn(`[ImageLoader] ‚ö†Ô∏è  Suspicious image source (allowed but review): ${src}`);\n      }\n    }\n  } catch (error) {\n    // If URL parsing fails, log the error for debugging\n    console.error(`[ImageLoader] Failed to parse image URL: ${src}`, error);\n  }\n\n  // Use Next.js default loader behavior\n  return `${src}?w=${width}&q=${quality || 75}`;\n}\n"],"names":[],"mappings":"AAAA,sBAAsB;AACtB,mEAAmE;;;;;AA2B3C;AAzBxB;;AAEA,oDAAoD;AACpD,MAAM,kBAAkB;IACtB;IACA;IACA;IACA;IACA;IACA;IACA;CAED;AAEc,SAAS,YAAY,EAAE,GAAG,EAAE,KAAK,EAAE,OAAO,EAIxD;IACC,8CAA8C;IAC9C,IAAI;QACF,MAAM,MAAM,IAAI,IAAI;QACpB,MAAM,WAAW,IAAI,QAAQ;QAE7B,qCAAqC;QACrC,MAAM;QACN,IAAI,mBAAkC;QACtC,wCAAiB;YACf,IAAI;gBACF,mBAAmB,IAAI,IAAI,aAAa,QAAQ;YAClD,EAAE,OAAM;YACN,uBAAuB;YACzB;QACF;QAEA,MAAM,oBAAoB,mBACtB;eAAI;YAAiB;SAAiB,GACtC;QAEJ,kCAAkC;QAClC,MAAM,YAAY,kBAAkB,IAAI,CAAC,CAAA;YACvC,IAAI,QAAQ,QAAQ,CAAC,OAAO;gBAC1B,4CAA4C;gBAC5C,OAAO,SAAS,QAAQ,CAAC;YAC3B;YACA,OAAO,aAAa,WAAW,aAAa,aAAa,kCAAkC;QAC7F;QAEA,IAAI,CAAC,WAAW;YACd,oDAAoD;YACpD,wHAAO,CAAC,yBAAyB,CAAC,UAAU;YAE5C,MAAM,WAAW,CAAC,qCAAqC,EAAE,SAAS,qDAAqD,CAAC;YACxH,QAAQ,KAAK,CAAC;YACd,QAAQ,KAAK,CAAC,CAAC,+BAA+B,EAAE,kBAAkB,IAAI,CAAC,OAAO;YAC9E,QAAQ,KAAK,CAAC,CAAC,4BAA4B,EAAE,KAAK;YAElD,kEAAkE;YAClE,wCAA4C;gBAC1C,QAAQ,KAAK,CAAC,CAAC,2BAA2B,EAAE,SAAS,qCAAqC,CAAC;YAC7F;QACF,OAAO;YACL,0CAA0C;YAC1C,QAAQ,GAAG,CAAC,CAAC,mDAAmD,EAAE,UAAU;QAC9E;QAEA,6DAA6D;QAC7D,wCAA4C;YAC1C,MAAM,qBAAqB;gBAAC;gBAAS;gBAAa;gBAAa;aAAU;YACzE,MAAM,eAAe,mBAAmB,IAAI,CAAC,CAAA,UAAW,IAAI,QAAQ,CAAC;YAErE,IAAI,cAAc;gBAChB,QAAQ,IAAI,CAAC,CAAC,gEAAgE,EAAE,KAAK;YACvF;QACF;IACF,EAAE,OAAO,OAAO;QACd,oDAAoD;QACpD,QAAQ,KAAK,CAAC,CAAC,yCAAyC,EAAE,KAAK,EAAE;IACnE;IAEA,sCAAsC;IACtC,OAAO,GAAG,IAAI,GAAG,EAAE,MAAM,GAAG,EAAE,WAAW,IAAI;AAC/C","debugId":null}},
    {"offset": {"line": 1220, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants };\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,wKACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,IAAA,qIAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS","debugId":null}},
    {"offset": {"line": 1268, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Textarea({ className, ...props }: React.ComponentProps<\"textarea\">) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        \"border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qIAAE,EACX,ucACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS","debugId":null}},
    {"offset": {"line": 1298, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/components/ui/alert-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nfunction AlertDialog({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Root>) {\n  return <AlertDialogPrimitive.Root data-slot=\"alert-dialog\" {...props} />\n}\n\nfunction AlertDialogTrigger({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Trigger>) {\n  return (\n    <AlertDialogPrimitive.Trigger data-slot=\"alert-dialog-trigger\" {...props} />\n  )\n}\n\nfunction AlertDialogPortal({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Portal>) {\n  return (\n    <AlertDialogPrimitive.Portal data-slot=\"alert-dialog-portal\" {...props} />\n  )\n}\n\nfunction AlertDialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Overlay>) {\n  return (\n    <AlertDialogPrimitive.Overlay\n      data-slot=\"alert-dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Content>) {\n  return (\n    <AlertDialogPortal>\n      <AlertDialogOverlay />\n      <AlertDialogPrimitive.Content\n        data-slot=\"alert-dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      />\n    </AlertDialogPortal>\n  )\n}\n\nfunction AlertDialogHeader({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"alert-dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogFooter({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"alert-dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Title>) {\n  return (\n    <AlertDialogPrimitive.Title\n      data-slot=\"alert-dialog-title\"\n      className={cn(\"text-lg font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Description>) {\n  return (\n    <AlertDialogPrimitive.Description\n      data-slot=\"alert-dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogAction({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Action>) {\n  return (\n    <AlertDialogPrimitive.Action\n      className={cn(buttonVariants(), className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogCancel({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Cancel>) {\n  return (\n    <AlertDialogPrimitive.Cancel\n      className={cn(buttonVariants({ variant: \"outline\" }), className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AAEA;AACA;AANA;;;;;AAQA,SAAS,YAAY,EACnB,GAAG,OACoD;IACvD,qBAAO,6LAAC,sLAAyB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AACtE;KAJS;AAMT,SAAS,mBAAmB,EAC1B,GAAG,OACuD;IAC1D,qBACE,6LAAC,yLAA4B;QAAC,aAAU;QAAwB,GAAG,KAAK;;;;;;AAE5E;MANS;AAQT,SAAS,kBAAkB,EACzB,GAAG,OACsD;IACzD,qBACE,6LAAC,wLAA2B;QAAC,aAAU;QAAuB,GAAG,KAAK;;;;;;AAE1E;MANS;AAQT,SAAS,mBAAmB,EAC1B,SAAS,EACT,GAAG,OACuD;IAC1D,qBACE,6LAAC,yLAA4B;QAC3B,aAAU;QACV,WAAW,IAAA,qIAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,mBAAmB,EAC1B,SAAS,EACT,GAAG,OACuD;IAC1D,qBACE,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,yLAA4B;gBAC3B,aAAU;gBACV,WAAW,IAAA,qIAAE,EACX,+WACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIjB;MAjBS;AAmBT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qIAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qIAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACqD;IACxD,qBACE,6LAAC,uLAA0B;QACzB,aAAU;QACV,WAAW,IAAA,qIAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,6LAAC,6LAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,qIAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,6LAAC,wLAA2B;QAC1B,WAAW,IAAA,qIAAE,EAAC,IAAA,gJAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;AAGf;MAVS;AAYT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,6LAAC,wLAA2B;QAC1B,WAAW,IAAA,qIAAE,EAAC,IAAA,gJAAc,EAAC;YAAE,SAAS;QAAU,IAAI;QACrD,GAAG,KAAK;;;;;;AAGf;OAVS","debugId":null}},
    {"offset": {"line": 1493, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/actions/dog.actions.ts"],"sourcesContent":["// lib/actions/dog.actions.ts\n\"use server\";\n\nimport { revalidatePath } from \"next/cache\";\nimport { redirect } from \"next/navigation\";\nimport { prisma } from \"@/lib/prisma\";\nimport { Dog, DogStatus, Gender, DogSize, Prisma, AuditAction } from \"@prisma/client\";\nimport { createClient } from \"@/lib/supabase/server\";\nimport { assertRole } from \"@/lib/actions/profile.actions\";\nimport { UserRole } from \"@prisma/client\";\nimport { ActionResult } from \"@/lib/types\";\nimport { calculateAge } from \"@/lib/utils/dog-utils\";\nimport { dogFormSchema } from \"@/lib/schemas\";\nimport { z } from \"zod\";\nimport { withAudit, getCurrentUserId, captureAuditState } from \"./audit.actions\";\nimport { getMedicalRecords, getMedicalDocuments } from \"./medical.actions\";\nimport { FOSTER_FILTER_VALUES } from \"@/lib/dog-filters\";\n\nconst deleteDogSchema = z.object({\n  dogId: z.coerce.number().int().positive({ message: \"Invalid dog ID\" }),\n  reason: z.string().min(10, { message: \"Reason must be at least 10 characters long\" }).max(1000, { message: \"Reason must be less than 1000 characters\" }),\n});\n\nconst uploadImageSchema = z.object({\n  dogId: z.coerce.number().int().positive({ message: \"Invalid dog ID\" }),\n  // File validation will be handled separately after dogId validation\n});\n\nconst getAllDogsSchema = z.object({\n  page: z.coerce.number().int().min(1).optional().default(1),\n  limit: z.coerce.number().int().min(1).max(100).optional().default(10),\n  status: z.enum([\"all\", ...Object.values(DogStatus)]).optional().default(\"all\"),\n  fosterProfileId: z.enum([FOSTER_FILTER_VALUES.ALL, FOSTER_FILTER_VALUES.NONE]).or(z.string()).optional().default(FOSTER_FILTER_VALUES.ALL), // Profile ID (string) or \"none\"\n  breed: z.string().optional().default(\"all\"),\n  gender: z.enum([\"all\", ...Object.values(Gender)]).optional().default(\"all\"),\n  size: z.enum([\"all\", ...Object.values(DogSize)]).optional().default(\"all\"),\n  weightMin: z.string().regex(/^\\d*$/, { message: \"Weight must be a number\" }).optional(),\n  weightMax: z.string().regex(/^\\d*$/, { message: \"Weight must be a number\" }).optional(),\n  specialNeeds: z.string().optional().default(\"all\"),\n  hasPhotos: z.string().optional().default(\"all\"),\n  sortField: z.enum([\"name\", \"status\", \"breed\"]).optional().default(\"name\"),\n  sortDirection: z.enum([\"asc\", \"desc\"]).optional().default(\"asc\"),\n});\n\n// Shared photo upload function\nasync function uploadDogPhoto(file: File): Promise<string> {\n  const supabase = await createClient();\n  const timestamp = Date.now();\n  const sanitizedFileName = file.name.replace(/\\s+/g, \"-\");\n  const storagePath = `dog-${timestamp}-${sanitizedFileName}`;\n\n  const { error: uploadError } = await supabase.storage\n    .from(\"dog-photos\")\n    .upload(storagePath, file, {\n      upsert: false,\n    });\n\n  if (uploadError) {\n    throw new Error(`Storage Error: ${uploadError.message}`);\n  }\n\n  const { data: urlData } = supabase.storage\n    .from(\"dog-photos\")\n    .getPublicUrl(storagePath);\n\n  const publicUrl = urlData.publicUrl;\n  if (!publicUrl) {\n    throw new Error(\"Unable to generate public URL for uploaded photo\");\n  }\n\n  return publicUrl;\n}\n\nexport async function createDog(formData: FormData): Promise<ActionResult<Dog> | never> {\n  try {\n    await assertRole(UserRole.STAFF);\n\n    const parsed = dogFormSchema.safeParse(Object.fromEntries(formData.entries()));\n    if (!parsed.success) {\n      const fieldErrors = parsed.error.flatten().fieldErrors;\n      return {\n        success: false,\n        message: \"Validation failed.\",\n        fieldErrors,\n        data: null,\n      };\n    }\n\n    const {\n      name,\n      status,\n      breed,\n      dateOfBirth,\n      bioPublic,\n      notesInternal,\n      fosterProfileId,\n      specialNeeds,\n    } = parsed.data;\n\n    const finalStatus = status ?? DogStatus.INTAKE;\n\n    // Handle primary photo upload if provided\n    let primaryPhotoUrl = \"https://picsum.photos/300/200?random=1\"; // Default placeholder\n    const file = formData.get(\"file\");\n\n    if (file instanceof File && file.size > 0) {\n      try {\n        primaryPhotoUrl = await uploadDogPhoto(file);\n      } catch (error) {\n        // For now, we'll continue with the default placeholder if upload fails\n        // In production, you might want to return an error instead\n        console.error(\"Failed to upload dog photo:\", error);\n      }\n    }\n\n    await prisma.dog.create({\n      data: {\n        name,\n        status: finalStatus,\n        breed,\n        dateOfBirth,\n        bioPublic,\n        notesInternal,\n        specialNeeds,\n        fosterProfileId: finalStatus === DogStatus.IN_FOSTER ? fosterProfileId : null,\n        primaryPhotoUrl,\n      },\n    });\n\n    revalidatePath(\"/admin/dogs\");\n    revalidatePath(\"/adopt\");\n    redirect(\"/admin/dogs\");\n  } catch (error) {\n    return {\n      success: false,\n      message: error instanceof Error ? error.message : \"An unexpected error occurred.\",\n      fieldErrors: undefined,\n      data: null,\n    };\n  }\n}\n\nexport async function updateDog(dogId: number, formData: FormData): Promise<ActionResult> {\n  try {\n    await assertRole(UserRole.STAFF);\n    const userId = await getCurrentUserId();\n\n    const file = formData.get('file') as File | null;\n    let newPhotoUrl: string | undefined = undefined;\n\n    if (file && file.size > 0) {\n      try {\n        newPhotoUrl = await uploadDogPhoto(file);\n      } catch (error) {\n        return {\n          success: false,\n          message: error instanceof Error ? error.message : \"Failed to upload photo\",\n          fieldErrors: undefined,\n          data: null,\n        };\n      }\n    }\n\n    const parsed = dogFormSchema.safeParse(Object.fromEntries(formData.entries()));\n    if (!parsed.success) {\n      const fieldErrors = parsed.error.flatten().fieldErrors;\n      return {\n        success: false,\n        message: \"Validation failed.\",\n        fieldErrors,\n        data: null,\n      };\n    }\n\n    const {\n      name,\n      status,\n      breed,\n      dateOfBirth,\n      bioPublic,\n      notesInternal,\n      fosterProfileId,\n      specialNeeds,\n    } = parsed.data;\n\n    const finalStatus = status ?? DogStatus.INTAKE;\n\n    // Capture before state for audit\n    const beforeState = await captureAuditState('dog', dogId);\n\n    const updateData: {\n      name: string;\n      status: DogStatus;\n      breed: string | null;\n      dateOfBirth: Date | null;\n      bioPublic: string | null;\n      notesInternal: string | null;\n      specialNeeds: boolean;\n      fosterProfileId: string | null;\n      primaryPhotoUrl?: string;\n    } = {\n      name,\n      status: finalStatus,\n      breed,\n      dateOfBirth,\n      bioPublic,\n      notesInternal,\n      specialNeeds,\n      fosterProfileId: finalStatus === DogStatus.IN_FOSTER ? fosterProfileId : null,\n    };\n\n    if (newPhotoUrl) {\n      updateData.primaryPhotoUrl = newPhotoUrl;\n    }\n\n    await withAudit(\n      \"updateDog\",\n      userId,\n      async () => {\n        const updatedDog = await prisma.dog.update({\n          where: { id: dogId },\n          data: updateData,\n        });\n\n        revalidatePath(\"/admin\");\n        revalidatePath(`/admin/edit-dog/${dogId}`);\n        revalidatePath(\"/adopt\");\n        revalidatePath(`/adopt/${dogId}`);\n\n        return updatedDog;\n      },\n      {\n        action: AuditAction.DOG_EDIT,\n        entityType: 'dog',\n        entityId: dogId,\n        before: beforeState || undefined,\n        after: beforeState ? { ...beforeState, ...updateData } : undefined,\n        note: `Updated dog: ${name}`,\n      }\n    );\n\n    return {\n      success: true,\n      message: \"Dog updated successfully!\",\n      fieldErrors: undefined,\n      data: null,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      message: error instanceof Error ? error.message : \"An unexpected error occurred.\",\n      fieldErrors: undefined,\n      data: null,\n    };\n  }\n}\n\nexport async function uploadAndSetDogImage(prevState: { message: string | null; newImageUrl: string | null }, formData: FormData) {\n  try {\n    await assertRole(UserRole.STAFF);\n  } catch (error) {\n    return { message: error instanceof Error ? error.message : \"Not authorized\", newImageUrl: null };\n  }\n\n  const parsed = uploadImageSchema.safeParse(Object.fromEntries(formData.entries()));\n  if (!parsed.success) {\n    return { message: parsed.error.issues.map(issue => `${issue.path.join('.')}: ${issue.message}`).join(', '), newImageUrl: null };\n  }\n\n  const { dogId } = parsed.data;\n  const file = formData.get(\"file\") as File;\n  if (!file || file.size === 0) {\n    return { message: \"No file provided.\", newImageUrl: null };\n  }\n\n  const supabase = await createClient();\n  const filePath = `dogs/${dogId}-${file.name}-${Date.now()}`;\n\n  try {\n    const { error: uploadError } = await supabase.storage\n      .from(\"images\") // BUCKET NAME - YOU MUST CREATE THIS IN SUPABASE\n      .upload(filePath, file);\n\n    if (uploadError) {\n      throw new Error(`Storage Error: ${uploadError.message}`);\n    }\n\n    const { data: { publicUrl } } = supabase.storage\n      .from(\"images\")\n      .getPublicUrl(filePath);\n\n    if (!publicUrl) {\n      throw new Error(\"Could not get public URL.\");\n    }\n\n    await prisma.dog.update({\n      where: { id: dogId },\n      data: { primaryPhotoUrl: publicUrl },\n    });\n\n    revalidatePath(\"/admin\");\n    revalidatePath(`/admin/edit-dog/${dogId}`);\n    revalidatePath(\"/adopt\");\n    revalidatePath(`/adopt/${dogId}`);\n\n    return { message: null, newImageUrl: publicUrl };\n\n  } catch (error) {\n    console.error(\"Upload failed:\", error);\n    return { message: error instanceof Error ? error.message : \"Upload failed.\", newImageUrl: null };\n  }\n}\n\nexport async function deleteDog(dogId: number, reason: string): Promise<ActionResult> {\n  try {\n    await assertRole(UserRole.STAFF);\n    const userId = await getCurrentUserId();\n\n    const parsed = deleteDogSchema.safeParse({ dogId, reason });\n    if (!parsed.success) {\n      const fieldErrors = parsed.error.flatten().fieldErrors;\n      return {\n        success: false,\n        message: \"Validation failed.\",\n        fieldErrors,\n        data: null,\n      };\n    }\n\n    // Capture before state for audit\n    const beforeState = await captureAuditState('dog', parsed.data.dogId);\n\n    await withAudit(\n      \"deleteDog\",\n      userId,\n      async () => {\n        await prisma.dog.delete({ where: { id: parsed.data.dogId } });\n        revalidatePath(\"/admin/dogs\");\n        revalidatePath(\"/adopt\");\n        return null;\n      },\n      {\n        action: AuditAction.DOG_EDIT,\n        entityType: 'dog',\n        entityId: parsed.data.dogId,\n        before: beforeState || undefined,\n        after: undefined,\n        note: `Deleted dog. Reason: ${parsed.data.reason}`,\n      }\n    );\n\n    return {\n      success: true,\n      message: \"Dog deleted successfully! Redirecting...\",\n      fieldErrors: undefined,\n      data: null,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      message: error instanceof Error ? error.message : \"An unexpected error occurred.\",\n      fieldErrors: undefined,\n      data: null,\n    };\n  }\n}\n\nexport async function getDogById(id: number) {\n  const parsed = z.object({ id: z.coerce.number().int().positive() }).safeParse({ id });\n  if (!parsed.success) {\n    throw new Error(\"Invalid dog ID\");\n  }\n\n  const dog = await prisma.dog.findUnique({\n    where: { id },\n    include: {\n      fosterProfile: {\n        select: {\n          profileId: true,\n          profile: {\n            select: {\n              name: true,\n              email: true,\n            },\n          },\n        },\n      },\n    },\n  });\n\n  if (!dog) {\n    throw new Error(\"Dog not found\");\n  }\n\n  // Compute derived values on the fly\n  const isSenior = calculateAge(dog.dateOfBirth) ? calculateAge(dog.dateOfBirth)! >= 8 : false;\n  const hasPhotos = dog.primaryPhotoUrl ? !dog.primaryPhotoUrl.includes('placeholder') : false;\n\n  return {\n    ...dog,\n    isSenior, // Runtime property\n    hasPhotos, // Runtime property\n  };\n}\n\nexport async function getAllDogs(searchParams?: { [key: string]: string | undefined }) {\n  await assertRole(UserRole.STAFF);\n\n  const parsed = getAllDogsSchema.safeParse(searchParams || {});\n  if (!parsed.success) {\n    throw new Error(\"Invalid search parameters\");\n  }\n\n  const { page, limit } = parsed.data;\n  const offset = (page - 1) * limit;\n\n  // Build where clause for filtering\n  const where: Prisma.DogWhereInput = {};\n\n  if (parsed.data.status && parsed.data.status !== \"all\") {\n    where.status = parsed.data.status;\n  }\n\n  if (parsed.data.fosterProfileId && parsed.data.fosterProfileId !== FOSTER_FILTER_VALUES.ALL) {\n    if (parsed.data.fosterProfileId === FOSTER_FILTER_VALUES.NONE) {\n      // Filter for dogs with no foster assigned\n      where.fosterProfileId = null;\n    } else {\n      // Filter for specific foster\n      where.fosterProfileId = parsed.data.fosterProfileId;\n    }\n  }\n\n  if (parsed.data.breed && parsed.data.breed !== \"all\" && parsed.data.breed !== \"\") {\n    where.breed = {\n      contains: parsed.data.breed,\n      mode: 'insensitive' as const,\n    };\n  }\n\n  if (parsed.data.gender && parsed.data.gender !== \"all\") {\n    where.gender = parsed.data.gender;\n  }\n\n  if (parsed.data.size && parsed.data.size !== \"all\") {\n    where.size = parsed.data.size;\n  }\n\n  if (parsed.data.weightMin && parsed.data.weightMin !== \"\") {\n    const weightMin = parseInt(parsed.data.weightMin, 10);\n    if (!Number.isNaN(weightMin)) {\n      where.weight_lbs = { gte: weightMin };\n    }\n  }\n\n  if (parsed.data.weightMax && parsed.data.weightMax !== \"\") {\n    const weightMax = parseInt(parsed.data.weightMax, 10);\n    if (!Number.isNaN(weightMax)) {\n      where.weight_lbs = where.weight_lbs ? { ...(where.weight_lbs as object), lte: weightMax } : { lte: weightMax };\n    }\n  }\n\n\n  if (parsed.data.specialNeeds && parsed.data.specialNeeds !== \"all\") {\n    where.specialNeeds = parsed.data.specialNeeds === \"true\";\n  }\n\n  if (parsed.data.hasPhotos && parsed.data.hasPhotos !== \"all\") {\n    if (parsed.data.hasPhotos === \"true\") {\n      where.primaryPhotoUrl = { not: null };\n    } else {\n      where.primaryPhotoUrl = null;\n    }\n  }\n\n  // Build orderBy clause for sorting\n  const orderBy: Prisma.DogOrderByWithRelationInput = {};\n  const sortField = parsed.data.sortField;\n  const sortDirection = parsed.data.sortDirection;\n\n  switch (sortField) {\n    case \"name\":\n      orderBy.name = sortDirection;\n      break;\n    case \"status\":\n      orderBy.status = sortDirection;\n      break;\n    case \"breed\":\n      orderBy.breed = sortDirection;\n      break;\n    default:\n      orderBy.name = \"asc\";\n  }\n\n  const [dogs, totalCount] = await Promise.all([\n    prisma.dog.findMany({\n      where,\n      orderBy,\n      skip: offset,\n      take: limit,\n      select: {\n        id: true,\n        mutt_id: true,\n        name: true,\n        breed: true,\n        dateOfBirth: true,\n        status: true,\n        primaryPhotoUrl: true,\n        gender: true,\n        weight_lbs: true,\n        size: true,\n        specialNeeds: true,\n        bioPublic: true,\n        createdAt: true,\n        fosterProfile: {\n          select: {\n            profile: {\n              select: {\n                name: true,\n                email: true,\n              },\n            },\n          },\n        },\n      },\n    }),\n    prisma.dog.count({ where }),\n  ]);\n\n  const totalPages = Math.ceil(totalCount / limit);\n\n  // Flatten foster profile data and compute derived fields\n  const dogsWithFlattenedFoster = dogs.map(dog => ({\n    ...dog,\n    fosterProfile: dog.fosterProfile ? {\n      ...dog.fosterProfile,\n      name: dog.fosterProfile.profile?.name,\n      email: dog.fosterProfile.profile?.email,\n    } : null,\n    // Compute derived values on the fly\n    isSenior: calculateAge(dog.dateOfBirth) ? calculateAge(dog.dateOfBirth)! >= 8 : false,\n    hasPhotos: dog.primaryPhotoUrl ? !dog.primaryPhotoUrl.includes('placeholder') : false,\n  }));\n\n  return {\n    dogs: dogsWithFlattenedFoster,\n    pagination: {\n      currentPage: page,\n      totalPages,\n      totalCount,\n      hasNextPage: page < totalPages,\n      hasPreviousPage: page > 1,\n    },\n  };\n}\n\nexport type DogFilters = {\n  breed?: string;\n  specialNeeds?: string;\n  size?: string;\n  gender?: string;\n  hasPhotos?: string;\n};\n\nconst coerceBoolean = (value?: string) => {\n  if (value === undefined) return undefined;\n  if (value === \"true\") return true;\n  if (value === \"false\") return false;\n  return undefined;\n};\n\nexport async function getDogs({ page = 1, pageSize = 12 }: { page?: number; pageSize?: number } = {}) {\n  const take = pageSize;\n  const skip = (Math.max(1, page) - 1) * take;\n\n  const where: Prisma.DogWhereInput = {\n    status: DogStatus.AVAILABLE,\n  };\n\n  const [dogs, total] = await Promise.all([\n    prisma.dog.findMany({\n      where,\n      orderBy: [\n        { primaryPhotoUrl: 'desc' }, // Photos first\n        { createdAt: 'desc' }, // Then by recency\n      ],\n      take,\n      skip,\n      select: {\n        id: true,\n        name: true,\n        breed: true,\n        dateOfBirth: true,\n        bioPublic: true,\n        specialNeeds: true,\n        primaryPhotoUrl: true,\n        gender: true,\n        weight_lbs: true,\n        size: true,\n        mutt_id: true,\n        status: true,\n        createdAt: true,\n      },\n    }),\n    prisma.dog.count({ where }),\n  ]);\n\n  // Compute derived values on the fly\n  const dogsWithDerived = dogs.map(dog => ({\n    ...dog,\n    isSenior: calculateAge(dog.dateOfBirth) ? calculateAge(dog.dateOfBirth)! >= 8 : false,\n    hasPhotos: dog.primaryPhotoUrl ? !dog.primaryPhotoUrl.includes('placeholder') : false,\n  }));\n\n  return { dogs: dogsWithDerived, total };\n}\n\nexport async function getAvailableDogs({ page = 1, filters = {} }: { page?: number; filters?: DogFilters } = {}) {\n  const take = 12;\n  const skip = (Math.max(1, page) - 1) * take;\n\n  const where: Prisma.DogWhereInput = {\n    status: DogStatus.AVAILABLE,\n  };\n\n  if (filters.breed) {\n    where.breed = {\n      contains: filters.breed,\n      mode: \"insensitive\",\n    };\n  }\n\n  if (filters.size) {\n    where.size = filters.size as DogSize;\n  }\n\n  if (filters.gender) {\n    where.gender = filters.gender as Gender;\n  }\n\n\n  const specialNeedsFilter = coerceBoolean(filters.specialNeeds);\n  if (specialNeedsFilter !== undefined) {\n    where.specialNeeds = specialNeedsFilter;\n  }\n\n\n  const [dogs, totalCount] = await Promise.all([\n    prisma.dog.findMany({\n      where,\n      orderBy: [\n        { primaryPhotoUrl: 'desc' }, // Photos first\n        { createdAt: 'desc' }, // Then by recency\n      ],\n      take,\n      skip,\n      select: {\n        id: true,\n        name: true,\n        breed: true,\n        dateOfBirth: true,\n        bioPublic: true,\n        specialNeeds: true,\n        primaryPhotoUrl: true,\n        gender: true,\n        weight_lbs: true,\n        size: true,\n        mutt_id: true,\n        status: true,\n        createdAt: true,\n      },\n    }),\n    prisma.dog.count({ where }),\n  ]);\n\n  // Compute derived values on the fly\n  const dogsWithDerived = dogs.map(dog => ({\n    ...dog,\n    isSenior: calculateAge(dog.dateOfBirth) ? calculateAge(dog.dateOfBirth)! >= 8 : false,\n    hasPhotos: dog.primaryPhotoUrl ? !dog.primaryPhotoUrl.includes('placeholder') : false,\n  }));\n\n  const totalPages = Math.ceil(totalCount / take);\n\n  return {\n    dogs: dogsWithDerived,\n    pagination: {\n      page,\n      limit: take,\n      totalCount,\n      totalPages,\n      hasNextPage: page < totalPages,\n      hasPrevPage: page > 1,\n    },\n  };\n}\n\nexport async function getShelterDogs() {\n  const dogs = await prisma.dog.findMany({\n    where: {\n      status: {\n        not: \"ADOPTED\",\n      },\n    },\n    orderBy: {\n      createdAt: \"desc\",\n    },\n    select: {\n      id: true,\n      name: true,\n      breed: true,\n      dateOfBirth: true,\n      status: true,\n      primaryPhotoUrl: true,\n      createdAt: true,\n    },\n  });\n\n  // Compute derived values on the fly\n  return dogs.map(dog => ({\n    ...dog,\n    isSenior: calculateAge(dog.dateOfBirth) ? calculateAge(dog.dateOfBirth)! >= 8 : false,\n    hasPhotos: dog.primaryPhotoUrl ? !dog.primaryPhotoUrl.includes('placeholder') : false,\n  }));\n}\n\nexport async function getPotentialFosters() {\n  const fosterProfiles = await prisma.fosterProfile.findMany({\n    select: {\n      profileId: true,\n      profile: {\n        select: {\n          name: true,\n          email: true,\n        }\n      }\n    },\n    orderBy: [\n      {\n        profile: {\n          name: \"asc\",\n        },\n      },\n      {\n        profile: {\n          email: \"asc\",\n        },\n      },\n    ],\n  });\n\n  return fosterProfiles\n    .filter((fp) => fp.profile)\n    .map((fp) => ({\n      id: fp.profileId,\n      name: fp.profile?.name ?? null,\n      email: fp.profile?.email ?? \"\",\n    }));\n}\n\nexport async function getUniqueBreeds() {\n  const breeds = await prisma.dog.findMany({\n    where: { breed: { not: null } },\n    select: { breed: true },\n    distinct: ['breed'],\n    orderBy: { breed: 'asc' },\n  });\n  return [...new Set(breeds.map((b) => b.breed!).filter(Boolean))];\n}\n\nexport async function getUniqueStatuses() {\n  const statuses = await prisma.dog.findMany({\n    select: { status: true },\n    distinct: ['status'],\n  });\n  return [...new Set(statuses.map((s) => s.status))];\n}\n\nexport async function getUniqueGenders() {\n  const genders = await prisma.dog.findMany({\n    select: {\n      gender: true,\n    },\n    distinct: [\"gender\"],\n    orderBy: {\n      gender: \"asc\",\n    },\n  });\n\n  return genders\n    .map((entry) => entry.gender)\n    .filter((gender): gender is Gender => gender !== null);\n}\n\nexport async function getUniqueSizes() {\n  const sizes = await prisma.dog.findMany({\n    select: {\n      size: true,\n    },\n    distinct: [\"size\"],\n    orderBy: {\n      size: \"asc\",\n    },\n  });\n\n  return sizes\n    .map((entry) => entry.size)\n    .filter((size): size is DogSize => size !== null);\n}\n\nexport async function getRelatedDogs(dogId: number, limit = 4) {\n  // First get the current dog's size and dateOfBirth\n  const currentDog = await prisma.dog.findUnique({\n    where: { id: dogId },\n    select: { size: true, dateOfBirth: true },\n  });\n\n  if (!currentDog) {\n    return [];\n  }\n\n  // Calculate current dog's age\n  const currentAge = currentDog.dateOfBirth ? calculateAge(currentDog.dateOfBirth) : null;\n\n  // Get dogs with same size and similar age (¬±2 years), excluding current dog\n  // Convert age range to date range: if current dog is X years old, find dogs born within ¬±2 years of that age\n  const now = new Date();\n  const ageMin = Math.max(0, (currentAge || 0) - 2);\n  const ageMax = (currentAge || 0) + 2;\n\n  // Convert age range to date range (older dogs have earlier birth dates)\n  const dateMax = new Date(now.getTime() - ageMin * 365 * 24 * 60 * 60 * 1000);\n  const dateMin = new Date(now.getTime() - ageMax * 365 * 24 * 60 * 60 * 1000);\n\n  const dogs = await prisma.dog.findMany({\n    where: {\n      AND: [\n        { id: { not: dogId } },\n        { status: DogStatus.AVAILABLE },\n        { size: currentDog.size },\n        {\n          dateOfBirth: {\n            gte: dateMin,\n            lte: dateMax,\n          },\n        },\n      ],\n    },\n    orderBy: [\n      { primaryPhotoUrl: 'desc' }, // Photos first\n      { createdAt: 'desc' }, // Then by recency\n    ],\n    take: limit,\n    select: {\n      id: true,\n      name: true,\n      breed: true,\n      dateOfBirth: true,\n      bioPublic: true,\n      specialNeeds: true,\n      primaryPhotoUrl: true,\n      gender: true,\n      size: true,\n      status: true,\n      createdAt: true,\n    },\n  });\n\n  // Compute derived values on the fly\n  return dogs.map(dog => ({\n    ...dog,\n    isSenior: calculateAge(dog.dateOfBirth) ? calculateAge(dog.dateOfBirth)! >= 8 : false,\n    hasPhotos: dog.primaryPhotoUrl ? !dog.primaryPhotoUrl.includes('placeholder') : false,\n  }));\n}\n\nexport async function getAdoptedDogs() {\n  const dogs = await prisma.dog.findMany({\n    where: {\n      status: DogStatus.ADOPTED,\n    },\n    orderBy: {\n      updatedAt: \"desc\",\n    },\n    select: {\n      id: true,\n      name: true,\n      breed: true,\n      dateOfBirth: true,\n      bioPublic: true,\n      specialNeeds: true,\n      primaryPhotoUrl: true,\n      status: true,\n      createdAt: true,\n      updatedAt: true,\n    },\n  });\n\n  // Compute derived values on the fly\n  return dogs.map(dog => ({\n    ...dog,\n    isSenior: calculateAge(dog.dateOfBirth) ? calculateAge(dog.dateOfBirth)! >= 8 : false,\n    hasPhotos: dog.primaryPhotoUrl ? !dog.primaryPhotoUrl.includes('placeholder') : false,\n  }));\n}\n\n/**\n * Canonical function for fetching a dog with all its medical context.\n * Returns a consistent shape for both dog detail pages and medical-specific pages.\n */\nexport async function getDogMedicalBundle(dogId: number, page: number = 1) {\n  await assertRole(UserRole.STAFF);\n\n  const parsed = z.object({\n    dogId: z.coerce.number().int().positive(),\n    page: z.coerce.number().int().min(1)\n  }).safeParse({ dogId, page });\n  if (!parsed.success) {\n    throw new Error(\"Invalid dog ID\");\n  }\n\n  const [dogDetails, medicalRecords, medicalDocuments] = await Promise.all([\n    prisma.dog.findUnique({\n      where: { id: dogId },\n      include: {\n        fosterProfile: {\n          include: {\n            profile: true,\n          },\n        },\n      },\n    }),\n    getMedicalRecords(dogId, page),\n    getMedicalDocuments(dogId),\n  ]);\n\n  if (!dogDetails) {\n    throw new Error(\"Dog not found\");\n  }\n\n  // Compute derived values on the fly\n  const isSenior = calculateAge(dogDetails.dateOfBirth) ? calculateAge(dogDetails.dateOfBirth)! >= 8 : false;\n  const hasPhotos = dogDetails.primaryPhotoUrl ? !dogDetails.primaryPhotoUrl.includes('placeholder') : false;\n\n  return {\n    dog: {\n      ...dogDetails,\n      isSenior, // Runtime property\n      hasPhotos, // Runtime property\n    },\n    medicalRecords,\n    medicalDocuments,\n  };\n}\n\n/**\n * @deprecated Use getDogMedicalBundle instead for consistent medical data fetching\n * Fetches a single dog and its related data for the admin detail page.\n */\nexport async function getDogDetailsById(dogId: number) {\n  const bundle = await getDogMedicalBundle(dogId, 1);\n  return { dog: bundle.dog, medicalRecords: bundle.medicalRecords };\n}\n"],"names":[],"mappings":";;;;;;;IAyTsB,YAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA","debugId":null}},
    {"offset": {"line": 1508, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/components/ui/toast.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { X } from \"lucide-react\";\nimport { Button } from \"./button\";\n\ntype ToastType = \"success\" | \"error\";\n\ninterface ToastProps {\n  message: string;\n  type: ToastType;\n  onClose: () => void;\n}\n\nfunction Toast({ message, type, onClose }: ToastProps) {\n  useEffect(() => {\n    const timer = setTimeout(onClose, 5000); // Auto close after 5 seconds\n    return () => clearTimeout(timer);\n  }, [onClose]);\n\n  return (\n    <div\n      data-testid={type === \"success\" ? \"toast-success\" : \"toast-error\"}\n      role=\"status\"\n      aria-live=\"polite\"\n      className={`fixed top-4 right-4 z-50 flex items-center gap-2 px-4 py-2 rounded-md shadow-lg ${\n        type === \"success\"\n          ? \"bg-green-500 text-white\"\n          : \"bg-red-500 text-white\"\n      }`}\n    >\n      <span className=\"flex-1\">{message}</span>\n      <Button\n        variant=\"ghost\"\n        size=\"sm\"\n        onClick={onClose}\n        className=\"h-auto p-1 hover:bg-white/20\"\n      >\n        <X className=\"h-4 w-4\" />\n      </Button>\n    </div>\n  );\n}\n\nexport function useToast() {\n  const [toast, setToast] = useState<{\n    message: string;\n    type: ToastType;\n  } | null>(null);\n\n  const showToast = (message: string, type: ToastType) => {\n    setToast({ message, type });\n  };\n\n  const hideToast = () => {\n    setToast(null);\n  };\n\n  const ToastComponent = () =>\n    toast ? (\n      <Toast\n        message={toast.message}\n        type={toast.type}\n        onClose={hideToast}\n      />\n    ) : null;\n\n  return { showToast, ToastComponent };\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;;AAUA,SAAS,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAc;;IACnD,IAAA,0KAAS;2BAAC;YACR,MAAM,QAAQ,WAAW,SAAS,OAAO,6BAA6B;YACtE;mCAAO,IAAM,aAAa;;QAC5B;0BAAG;QAAC;KAAQ;IAEZ,qBACE,6LAAC;QACC,eAAa,SAAS,YAAY,kBAAkB;QACpD,MAAK;QACL,aAAU;QACV,WAAW,CAAC,gFAAgF,EAC1F,SAAS,YACL,4BACA,yBACJ;;0BAEF,6LAAC;gBAAK,WAAU;0BAAU;;;;;;0BAC1B,6LAAC,wIAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,SAAS;gBACT,WAAU;0BAEV,cAAA,6LAAC,oMAAC;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAIrB;GA5BS;KAAA;AA8BF,SAAS;;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAGxB;IAEV,MAAM,YAAY,CAAC,SAAiB;QAClC,SAAS;YAAE;YAAS;QAAK;IAC3B;IAEA,MAAM,YAAY;QAChB,SAAS;IACX;IAEA,MAAM,iBAAiB,IACrB,sBACE,6LAAC;YACC,SAAS,MAAM,OAAO;YACtB,MAAM,MAAM,IAAI;YAChB,SAAS;;;;;mBAET;IAEN,OAAO;QAAE;QAAW;IAAe;AACrC;IAxBgB","debugId":null}},
    {"offset": {"line": 1609, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/app/admin/dogs/_components/DeleteDogButton.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useActionState } from \"react\";\nimport { useFormStatus } from \"react-dom\";\nimport { useRouter } from \"next/navigation\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  AlertDialog,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\";\nimport { deleteDog } from \"@/lib/actions/dog.actions\";\nimport { ActionResult } from \"@/lib/types\";\nimport { useToast } from \"@/components/ui/toast\";\n\ninterface DeleteDogButtonProps {\n  dogId: number;\n  dogName: string;\n}\n\nfunction ConfirmDeleteButton({ disabled, reasonLength }: { disabled?: boolean; reasonLength: number }) {\n  const { pending } = useFormStatus();\n  const isDisabled = pending || disabled || reasonLength < 10;\n\n  return (\n    <Button\n      type=\"submit\"\n      disabled={isDisabled}\n      variant=\"destructive\"\n      className=\"bg-destructive hover:bg-destructive/90\"\n    >\n      {pending ? \"Deleting...\" : \"Yes, delete\"}\n    </Button>\n  );\n}\n\nexport function DeleteDogButton({ dogId, dogName }: DeleteDogButtonProps) {\n  const [open, setOpen] = useState(false);\n  const [reason, setReason] = useState(\"\");\n  const { showToast } = useToast();\n  const router = useRouter();\n\n  const deleteAction = async (prevState: ActionResult<null>, formData: FormData) => {\n    const id = Number(formData.get(\"dogId\"));\n    const deleteReason = formData.get(\"reason\") as string;\n    const result = await deleteDog(id, deleteReason);\n\n    // Show toast and handle redirect on success\n    if (result.success) {\n      showToast(result.message || \"Dog deleted successfully!\", \"success\");\n      // Close dialog and redirect after a brief delay to show the toast\n      setTimeout(() => {\n        router.push(\"/admin\");\n      }, 1000);\n    } else {\n      showToast(result.message || \"Failed to delete dog.\", \"error\");\n    }\n\n    return result;\n  };\n\n  const [state, formAction] = useActionState(deleteAction, {\n    success: false,\n    message: null,\n    fieldErrors: undefined,\n    data: null,\n  } satisfies ActionResult);\n\n  // Close dialog on successful deletion\n  useEffect(() => {\n    if (state.success) {\n      setOpen(false);\n    }\n  }, [state.success]);\n\n  return (\n    <AlertDialog open={open} onOpenChange={setOpen}>\n      <AlertDialogTrigger asChild>\n        <Button\n          type=\"button\"\n          variant=\"destructive\"\n          className=\"w-full mt-4\"\n          data-testid=\"btn-delete-dog\"\n        >\n          Delete Dog\n        </Button>\n      </AlertDialogTrigger>\n      <AlertDialogContent>\n        <AlertDialogHeader>\n          <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n          <AlertDialogDescription>\n            This action cannot be undone. This will permanently delete {dogName}\n            &apos;s record.\n          </AlertDialogDescription>\n        </AlertDialogHeader>\n        <div className=\"py-4\">\n          <Label htmlFor=\"delete-reason\">Required reason for deletion</Label>\n          <Textarea\n            id=\"delete-reason\"\n            name=\"reason\"\n            placeholder=\"Please provide a detailed reason for deleting this dog's record (minimum 10 characters)...\"\n            value={reason}\n            onChange={(e) => setReason(e.target.value)}\n            className=\"mt-2\"\n            rows={3}\n          />\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            {reason.length}/1000 characters (minimum 10 required)\n          </p>\n        </div>\n        <AlertDialogFooter className=\"flex flex-col items-stretch gap-2\">\n          <AlertDialogCancel>Cancel</AlertDialogCancel>\n          <form action={formAction} className=\"flex flex-col gap-2\">\n            <input type=\"hidden\" name=\"dogId\" value={dogId} />\n            <input type=\"hidden\" name=\"reason\" value={reason} />\n            <ConfirmDeleteButton disabled={state.success} reasonLength={reason.length} />\n          </form>\n          {state.message && (\n            <p className=\"text-sm text-red-500\">{state.message}</p>\n          )}\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAUA;AAEA;;;AArBA;;;;;;;;;;;AA4BA,SAAS,oBAAoB,EAAE,QAAQ,EAAE,YAAY,EAAgD;;IACnG,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,qLAAa;IACjC,MAAM,aAAa,WAAW,YAAY,eAAe;IAEzD,qBACE,6LAAC,wIAAM;QACL,MAAK;QACL,UAAU;QACV,SAAQ;QACR,WAAU;kBAET,UAAU,gBAAgB;;;;;;AAGjC;GAdS;;QACa,qLAAa;;;KAD1B;AAgBF,SAAS,gBAAgB,EAAE,KAAK,EAAE,OAAO,EAAwB;;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,yIAAQ;IAC9B,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,eAAe,OAAO,WAA+B;QACzD,MAAM,KAAK,OAAO,SAAS,GAAG,CAAC;QAC/B,MAAM,eAAe,SAAS,GAAG,CAAC;QAClC,MAAM,SAAS,MAAM,IAAA,sKAAS,EAAC,IAAI;QAEnC,4CAA4C;QAC5C,IAAI,OAAO,OAAO,EAAE;YAClB,UAAU,OAAO,OAAO,IAAI,6BAA6B;YACzD,kEAAkE;YAClE,WAAW;gBACT,OAAO,IAAI,CAAC;YACd,GAAG;QACL,OAAO;YACL,UAAU,OAAO,OAAO,IAAI,yBAAyB;QACvD;QAEA,OAAO;IACT;IAEA,MAAM,CAAC,OAAO,WAAW,GAAG,IAAA,+KAAc,EAAC,cAAc;QACvD,SAAS;QACT,SAAS;QACT,aAAa;QACb,MAAM;IACR;IAEA,sCAAsC;IACtC,IAAA,0KAAS;qCAAC;YACR,IAAI,MAAM,OAAO,EAAE;gBACjB,QAAQ;YACV;QACF;oCAAG;QAAC,MAAM,OAAO;KAAC;IAElB,qBACE,6LAAC,sJAAW;QAAC,MAAM;QAAM,cAAc;;0BACrC,6LAAC,6JAAkB;gBAAC,OAAO;0BACzB,cAAA,6LAAC,wIAAM;oBACL,MAAK;oBACL,SAAQ;oBACR,WAAU;oBACV,eAAY;8BACb;;;;;;;;;;;0BAIH,6LAAC,6JAAkB;;kCACjB,6LAAC,4JAAiB;;0CAChB,6LAAC,2JAAgB;0CAAC;;;;;;0CAClB,6LAAC,iKAAsB;;oCAAC;oCACsC;oCAAQ;;;;;;;;;;;;;kCAIxE,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,sIAAK;gCAAC,SAAQ;0CAAgB;;;;;;0CAC/B,6LAAC,4IAAQ;gCACP,IAAG;gCACH,MAAK;gCACL,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;gCACzC,WAAU;gCACV,MAAM;;;;;;0CAER,6LAAC;gCAAE,WAAU;;oCACV,OAAO,MAAM;oCAAC;;;;;;;;;;;;;kCAGnB,6LAAC,4JAAiB;wBAAC,WAAU;;0CAC3B,6LAAC,4JAAiB;0CAAC;;;;;;0CACnB,6LAAC;gCAAK,QAAQ;gCAAY,WAAU;;kDAClC,6LAAC;wCAAM,MAAK;wCAAS,MAAK;wCAAQ,OAAO;;;;;;kDACzC,6LAAC;wCAAM,MAAK;wCAAS,MAAK;wCAAS,OAAO;;;;;;kDAC1C,6LAAC;wCAAoB,UAAU,MAAM,OAAO;wCAAE,cAAc,OAAO,MAAM;;;;;;;;;;;;4BAE1E,MAAM,OAAO,kBACZ,6LAAC;gCAAE,WAAU;0CAAwB,MAAM,OAAO;;;;;;;;;;;;;;;;;;;;;;;;AAM9D;IAxFgB;;QAGQ,yIAAQ;QACf,kJAAS;QAqBI,+KAAc;;;MAzB5B","debugId":null}},
    {"offset": {"line": 1878, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/utils/dog-utils.ts"],"sourcesContent":["import { DogSize } from \"@prisma/client\";\n\nexport function calculateAge(dob: Date | null | undefined): number | null {\n  if (!dob) return null;\n\n  const diff = Date.now() - new Date(dob).getTime();\n  const ageDate = new Date(diff);\n\n  return Math.abs(ageDate.getUTCFullYear() - 1970);\n}\n\nexport function isSenior(dob: Date | null | undefined): boolean {\n  const age = calculateAge(dob);\n  // Default to 'true' for seniors if age is unknown, as this is a senior dog rescue.\n  return (age || 8) >= 8;\n}\n\nexport function getSizeFromWeight(weight: number | null | undefined): DogSize {\n  if (!weight) return DogSize.UNKNOWN;\n\n  if (weight < 8) return DogSize.TOY;\n  if (weight < 20) return DogSize.SMALL;\n  if (weight < 45) return DogSize.MEDIUM;\n\n  return DogSize.LARGE;\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEO,SAAS,aAAa,GAA4B;IACvD,IAAI,CAAC,KAAK,OAAO;IAEjB,MAAM,OAAO,KAAK,GAAG,KAAK,IAAI,KAAK,KAAK,OAAO;IAC/C,MAAM,UAAU,IAAI,KAAK;IAEzB,OAAO,KAAK,GAAG,CAAC,QAAQ,cAAc,KAAK;AAC7C;AAEO,SAAS,SAAS,GAA4B;IACnD,MAAM,MAAM,aAAa;IACzB,mFAAmF;IACnF,OAAO,CAAC,OAAO,CAAC,KAAK;AACvB;AAEO,SAAS,kBAAkB,MAAiC;IACjE,IAAI,CAAC,QAAQ,OAAO,oKAAO,CAAC,OAAO;IAEnC,IAAI,SAAS,GAAG,OAAO,oKAAO,CAAC,GAAG;IAClC,IAAI,SAAS,IAAI,OAAO,oKAAO,CAAC,KAAK;IACrC,IAAI,SAAS,IAAI,OAAO,oKAAO,CAAC,MAAM;IAEtC,OAAO,oKAAO,CAAC,KAAK;AACtB","debugId":null}},
    {"offset": {"line": 1913, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/format.ts"],"sourcesContent":["/**\n * Formatting utilities for consistent display of missing/null values and dog data formatting\n */\n\nimport { calculateAge } from \"./utils/dog-utils\";\nimport { humanizeEnum } from \"./utils\";\nimport { Gender, DogSize } from \"@prisma/client\";\n\n/**\n * Returns the value if it's truthy and non-empty, otherwise returns the fallback\n */\nexport const missing = (value: string | null | undefined, fallback = 'N/A'): string =>\n  value && value.trim() !== '' ? value : fallback;\n\n/**\n * Format dog age for display\n */\nexport const formatDogAge = (dateOfBirth: Date | null): string => {\n  if (!dateOfBirth) return missing(null);\n  const age = calculateAge(dateOfBirth);\n  return age ? `${age} years` : missing(null);\n};\n\n/**\n * Format dog gender for display\n */\nexport const formatDogGender = (gender: Gender | null): string => {\n  return gender ? humanizeEnum(gender) : missing(null);\n};\n\n/**\n * Format dog size for display\n */\nexport const formatDogSize = (size: DogSize | null): string => {\n  return size ? humanizeEnum(size) : missing(null);\n};\n\n/**\n * Format dog weight for display\n */\nexport const formatDogWeight = (weightLbs: number | null): string => {\n  return weightLbs ? `${weightLbs} lbs` : missing(null);\n};\n\n/**\n * Format date for display (e.g., \"Jan 15, 2024\")\n */\nexport const formatDisplayDate = (date: Date): string => {\n  return new Date(date).toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  });\n};\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;AAED;AACA;AAAA;;;AAMO,MAAM,UAAU,CAAC,OAAkC,WAAW,KAAK,GACxE,SAAS,MAAM,IAAI,OAAO,KAAK,QAAQ;AAKlC,MAAM,eAAe,CAAC;IAC3B,IAAI,CAAC,aAAa,OAAO,QAAQ;IACjC,MAAM,MAAM,IAAA,+IAAY,EAAC;IACzB,OAAO,MAAM,GAAG,IAAI,MAAM,CAAC,GAAG,QAAQ;AACxC;AAKO,MAAM,kBAAkB,CAAC;IAC9B,OAAO,SAAS,IAAA,wIAAY,EAAC,UAAU,QAAQ;AACjD;AAKO,MAAM,gBAAgB,CAAC;IAC5B,OAAO,OAAO,IAAA,wIAAY,EAAC,QAAQ,QAAQ;AAC7C;AAKO,MAAM,kBAAkB,CAAC;IAC9B,OAAO,YAAY,GAAG,UAAU,IAAI,CAAC,GAAG,QAAQ;AAClD;AAKO,MAAM,oBAAoB,CAAC;IAChC,OAAO,IAAI,KAAK,MAAM,kBAAkB,CAAC,SAAS;QAChD,MAAM;QACN,OAAO;QACP,KAAK;IACP;AACF","debugId":null}},
    {"offset": {"line": 1963, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/app/admin/dogs/_components/DogTableRow.tsx"],"sourcesContent":["import Image from \"next/image\";\nimport { TableCell, TableRow } from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport Link from \"next/link\";\nimport { getDogStatusVariant, humanizeEnum } from \"@/lib/utils\";\nimport { DeleteDogButton } from \"./DeleteDogButton\";\nimport { DogListItem } from \"@/lib/types\";\nimport {\n  FileText,\n  Stethoscope,\n} from \"lucide-react\";\nimport {\n  missing,\n  formatDogAge,\n  formatDogGender,\n  formatDogSize,\n  formatDogWeight\n} from \"@/lib/format\";\n\ninterface DogTableRowProps {\n  dog: DogListItem;\n}\n\nexport function DogTableRow({ dog }: DogTableRowProps) {\n  return (\n    <TableRow key={dog.id} data-testid=\"row-dog\">\n      <TableCell>\n        <Image\n          src={dog.primaryPhotoUrl || \"https://via.placeholder.com/50x50/f3f4f6/6b7280?text=No+Photo\"}\n          alt={`Photo of ${dog.name}`}\n          width={50}\n          height={50}\n          className=\"rounded object-cover\"\n        />\n      </TableCell>\n      <TableCell className=\"font-medium\">{dog.name}</TableCell>\n      <TableCell>\n        <Badge variant={getDogStatusVariant(dog.status)}>\n          {humanizeEnum(dog.status)}\n        </Badge>\n      </TableCell>\n      <TableCell>\n        {dog.fosterProfile\n          ? (dog.fosterProfile.name || dog.fosterProfile.email)\n          : missing(null)}\n      </TableCell>\n      <TableCell>{missing(dog.breed)}</TableCell>\n      <TableCell>{formatDogAge(dog.dateOfBirth)}</TableCell>\n      <TableCell>{formatDogGender(dog.gender)}</TableCell>\n      <TableCell>{formatDogSize(dog.size)}</TableCell>\n      <TableCell>{formatDogWeight(dog.weight_lbs)}</TableCell>\n      <TableCell className=\"text-right\">\n        <div className=\"flex justify-end gap-2\">\n          <Button variant=\"outline\" size=\"sm\" asChild>\n            <Link\n              href={`/admin/dog/${dog.id}/log`}\n              title=\"View Activity Log\"\n            >\n              <FileText className=\"h-4 w-4\" />\n            </Link>\n          </Button>\n          <Button variant=\"outline\" size=\"sm\" asChild>\n            <Link\n              href={`/admin/dog/${dog.id}?tab=medical`}\n              title=\"Manage Medical Records\"\n            >\n              <Stethoscope className=\"h-4 w-4\" />\n            </Link>\n          </Button>\n          <Button variant=\"outline\" size=\"sm\" asChild data-testid=\"btn-edit-dog\">\n            <Link href={`/admin/edit-dog/${dog.id}`}>\n              Edit\n            </Link>\n          </Button>\n          <div className=\"w-32\">\n            <DeleteDogButton dogId={dog.id} dogName={dog.name} />\n          </div>\n        </div>\n      </TableCell>\n    </TableRow>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AAIA;;;;;;;;;;;AAYO,SAAS,YAAY,EAAE,GAAG,EAAoB;IACnD,qBACE,6LAAC,yIAAQ;QAAc,eAAY;;0BACjC,6LAAC,0IAAS;0BACR,cAAA,6LAAC,2IAAK;oBACJ,KAAK,IAAI,eAAe,IAAI;oBAC5B,KAAK,CAAC,SAAS,EAAE,IAAI,IAAI,EAAE;oBAC3B,OAAO;oBACP,QAAQ;oBACR,WAAU;;;;;;;;;;;0BAGd,6LAAC,0IAAS;gBAAC,WAAU;0BAAe,IAAI,IAAI;;;;;;0BAC5C,6LAAC,0IAAS;0BACR,cAAA,6LAAC,sIAAK;oBAAC,SAAS,IAAA,sJAAmB,EAAC,IAAI,MAAM;8BAC3C,IAAA,wIAAY,EAAC,IAAI,MAAM;;;;;;;;;;;0BAG5B,6LAAC,0IAAS;0BACP,IAAI,aAAa,GACb,IAAI,aAAa,CAAC,IAAI,IAAI,IAAI,aAAa,CAAC,KAAK,GAClD,IAAA,2HAAO,EAAC;;;;;;0BAEd,6LAAC,0IAAS;0BAAE,IAAA,2HAAO,EAAC,IAAI,KAAK;;;;;;0BAC7B,6LAAC,0IAAS;0BAAE,IAAA,gIAAY,EAAC,IAAI,WAAW;;;;;;0BACxC,6LAAC,0IAAS;0BAAE,IAAA,mIAAe,EAAC,IAAI,MAAM;;;;;;0BACtC,6LAAC,0IAAS;0BAAE,IAAA,iIAAa,EAAC,IAAI,IAAI;;;;;;0BAClC,6LAAC,0IAAS;0BAAE,IAAA,mIAAe,EAAC,IAAI,UAAU;;;;;;0BAC1C,6LAAC,0IAAS;gBAAC,WAAU;0BACnB,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,wIAAM;4BAAC,SAAQ;4BAAU,MAAK;4BAAK,OAAO;sCACzC,cAAA,6LAAC,0KAAI;gCACH,MAAM,CAAC,WAAW,EAAE,IAAI,EAAE,CAAC,IAAI,CAAC;gCAChC,OAAM;0CAEN,cAAA,6LAAC,6NAAQ;oCAAC,WAAU;;;;;;;;;;;;;;;;sCAGxB,6LAAC,wIAAM;4BAAC,SAAQ;4BAAU,MAAK;4BAAK,OAAO;sCACzC,cAAA,6LAAC,0KAAI;gCACH,MAAM,CAAC,WAAW,EAAE,IAAI,EAAE,CAAC,YAAY,CAAC;gCACxC,OAAM;0CAEN,cAAA,6LAAC,kOAAW;oCAAC,WAAU;;;;;;;;;;;;;;;;sCAG3B,6LAAC,wIAAM;4BAAC,SAAQ;4BAAU,MAAK;4BAAK,OAAO;4BAAC,eAAY;sCACtD,cAAA,6LAAC,0KAAI;gCAAC,MAAM,CAAC,gBAAgB,EAAE,IAAI,EAAE,EAAE;0CAAE;;;;;;;;;;;sCAI3C,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,6KAAe;gCAAC,OAAO,IAAI,EAAE;gCAAE,SAAS,IAAI,IAAI;;;;;;;;;;;;;;;;;;;;;;;OAlD1C,IAAI,EAAE;;;;;AAwDzB;KA1DgB","debugId":null}},
    {"offset": {"line": 2188, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/dog-table.ts"],"sourcesContent":["/**\n * Dog table sorting and filtering constants and utilities\n */\n\nexport const SORT_FIELDS = {\n  NAME: \"name\",\n  STATUS: \"status\",\n  BREED: \"breed\",\n  AGE: \"age\",\n} as const;\n\nexport type SortField = typeof SORT_FIELDS[keyof typeof SORT_FIELDS];\n\nexport const SORT_DIRECTIONS = {\n  ASC: \"asc\",\n  DESC: \"desc\",\n} as const;\n\nexport type SortDirection = typeof SORT_DIRECTIONS[keyof typeof SORT_DIRECTIONS];\n\n/**\n * Canonical parameter names for dog table URL search parameters\n */\nexport const DOG_TABLE_PARAMS = {\n  SORT_FIELD: \"sortField\",\n  SORT_DIRECTION: \"sortDirection\",\n  PAGE: \"page\",\n} as const;\n\n/**\n * Default sort configuration for dog table\n */\nexport const DEFAULT_SORT = {\n  field: SORT_FIELDS.NAME,\n  direction: SORT_DIRECTIONS.ASC,\n} as const;\n\n/**\n * Toggles sort direction for a given field\n * If sorting by the same field, toggle direction; otherwise default to ascending\n */\nexport function getNextSortDirection(\n  currentField: SortField | undefined,\n  currentDirection: SortDirection | undefined,\n  newField: SortField\n): SortDirection {\n  if (currentField === newField && currentDirection === SORT_DIRECTIONS.ASC) {\n    return SORT_DIRECTIONS.DESC;\n  }\n  return SORT_DIRECTIONS.ASC;\n}\n\n/**\n * Gets sort icon direction based on current sort state\n */\nexport function getSortDirection(\n  field: SortField,\n  currentField: SortField | undefined,\n  currentDirection: SortDirection | undefined\n): SortDirection | null {\n  if (currentField !== field) {\n    return null; // No sort icon\n  }\n  return currentDirection || DEFAULT_SORT.direction;\n}\n\n/**\n * Parse dog table sort from URL search parameters\n */\nexport function parseDogTableSort(searchParams: URLSearchParams): {\n  sortField: SortField;\n  sortDirection: SortDirection;\n} {\n  const sortField = (searchParams.get(DOG_TABLE_PARAMS.SORT_FIELD) || DEFAULT_SORT.field) as SortField;\n  const sortDirection = (searchParams.get(DOG_TABLE_PARAMS.SORT_DIRECTION) || DEFAULT_SORT.direction) as SortDirection;\n  return { sortField, sortDirection };\n}\n\n/**\n * Build URL search parameters for dog table sort\n */\nexport function buildDogTableUrl(\n  searchParams: URLSearchParams,\n  sortConfig: { sortField: SortField; sortDirection: SortDirection }\n): URLSearchParams {\n  const params = new URLSearchParams(searchParams);\n  params.set(DOG_TABLE_PARAMS.SORT_FIELD, sortConfig.sortField);\n  params.set(DOG_TABLE_PARAMS.SORT_DIRECTION, sortConfig.sortDirection);\n  return params;\n}\n\n/**\n * Update dog table sort in URL using Next.js router\n */\nexport function updateDogTableSortInUrl(\n  router: { push: (url: string) => void }, // Next.js App Router useRouter\n  pathname: string,\n  searchParams: URLSearchParams,\n  sortConfig: { sortField: SortField; sortDirection: SortDirection }\n): void {\n  const params = buildDogTableUrl(searchParams, sortConfig);\n  router.push(`${pathname}?${params.toString()}`);\n}\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;;;;;;;AAEM,MAAM,cAAc;IACzB,MAAM;IACN,QAAQ;IACR,OAAO;IACP,KAAK;AACP;AAIO,MAAM,kBAAkB;IAC7B,KAAK;IACL,MAAM;AACR;AAOO,MAAM,mBAAmB;IAC9B,YAAY;IACZ,gBAAgB;IAChB,MAAM;AACR;AAKO,MAAM,eAAe;IAC1B,OAAO,YAAY,IAAI;IACvB,WAAW,gBAAgB,GAAG;AAChC;AAMO,SAAS,qBACd,YAAmC,EACnC,gBAA2C,EAC3C,QAAmB;IAEnB,IAAI,iBAAiB,YAAY,qBAAqB,gBAAgB,GAAG,EAAE;QACzE,OAAO,gBAAgB,IAAI;IAC7B;IACA,OAAO,gBAAgB,GAAG;AAC5B;AAKO,SAAS,iBACd,KAAgB,EAChB,YAAmC,EACnC,gBAA2C;IAE3C,IAAI,iBAAiB,OAAO;QAC1B,OAAO,MAAM,eAAe;IAC9B;IACA,OAAO,oBAAoB,aAAa,SAAS;AACnD;AAKO,SAAS,kBAAkB,YAA6B;IAI7D,MAAM,YAAa,aAAa,GAAG,CAAC,iBAAiB,UAAU,KAAK,aAAa,KAAK;IACtF,MAAM,gBAAiB,aAAa,GAAG,CAAC,iBAAiB,cAAc,KAAK,aAAa,SAAS;IAClG,OAAO;QAAE;QAAW;IAAc;AACpC;AAKO,SAAS,iBACd,YAA6B,EAC7B,UAAkE;IAElE,MAAM,SAAS,IAAI,gBAAgB;IACnC,OAAO,GAAG,CAAC,iBAAiB,UAAU,EAAE,WAAW,SAAS;IAC5D,OAAO,GAAG,CAAC,iBAAiB,cAAc,EAAE,WAAW,aAAa;IACpE,OAAO;AACT;AAKO,SAAS,wBACd,MAAuC,EACvC,QAAgB,EAChB,YAA6B,EAC7B,UAAkE;IAElE,MAAM,SAAS,iBAAiB,cAAc;IAC9C,OAAO,IAAI,CAAC,GAAG,SAAS,CAAC,EAAE,OAAO,QAAQ,IAAI;AAChD","debugId":null}},
    {"offset": {"line": 2266, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/app/admin/dogs/_components/DogTable.tsx"],"sourcesContent":["import {\n  Table,\n  TableBody,\n  TableCaption,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Button } from \"@/components/ui/button\";\nimport { DogTableRow } from \"./DogTableRow\";\nimport {\n  ArrowUpDown,\n  ArrowUp,\n  ArrowDown,\n} from \"lucide-react\";\nimport {\n  SORT_FIELDS,\n  SortField,\n  SortDirection,\n  getSortDirection\n} from \"@/lib/dog-table\";\nimport { DogListItem, PaginationMeta } from \"@/lib/types\";\n\ninterface DogTableProps {\n  dogs: DogListItem[];\n  pagination: PaginationMeta;\n  sortField?: SortField;\n  sortDirection?: SortDirection;\n  onSort: (field: SortField) => void;\n}\n\nexport function DogTable({\n  dogs,\n  pagination,\n  sortField,\n  sortDirection,\n  onSort\n}: DogTableProps) {\n  const getSortIcon = (field: SortField) => {\n    const direction = getSortDirection(field, sortField, sortDirection);\n    if (direction === null) return <ArrowUpDown className=\"h-4 w-4\" />;\n    return direction === \"asc\" ? (\n      <ArrowUp className=\"h-4 w-4\" />\n    ) : (\n      <ArrowDown className=\"h-4 w-4\" />\n    );\n  };\n\n  return (\n    <>\n      <Table>\n        <TableCaption>\n          A list of all dogs in your system. Showing {`${dogs.length} of ${pagination.totalCount} dogs`}.\n        </TableCaption>\n        <TableHeader>\n          <TableRow>\n            <TableHead className=\"w-[80px]\" data-testid=\"table-header-image\">Image</TableHead>\n            <TableHead data-testid=\"table-header-name\">\n              <Button\n                variant=\"ghost\"\n                className=\"h-auto p-0 font-semibold hover:bg-transparent\"\n                onClick={() => onSort(SORT_FIELDS.NAME)}\n              >\n                Name {getSortIcon(SORT_FIELDS.NAME)}\n              </Button>\n            </TableHead>\n            <TableHead data-testid=\"table-header-status\">\n              <Button\n                variant=\"ghost\"\n                className=\"h-auto p-0 font-semibold hover:bg-transparent\"\n                onClick={() => onSort(SORT_FIELDS.STATUS)}\n              >\n                Status {getSortIcon(SORT_FIELDS.STATUS)}\n              </Button>\n            </TableHead>\n            <TableHead data-testid=\"table-header-foster\">Foster</TableHead>\n            <TableHead data-testid=\"table-header-breed\">\n              <Button\n                variant=\"ghost\"\n                className=\"h-auto p-0 font-semibold hover:bg-transparent\"\n                onClick={() => onSort(SORT_FIELDS.BREED)}\n              >\n                Breed {getSortIcon(SORT_FIELDS.BREED)}\n              </Button>\n            </TableHead>\n            <TableHead data-testid=\"table-header-age\">\n              <Button\n                variant=\"ghost\"\n                className=\"h-auto p-0 font-semibold hover:bg-transparent\"\n                onClick={() => onSort(SORT_FIELDS.AGE)}\n              >\n                Age {getSortIcon(SORT_FIELDS.AGE)}\n              </Button>\n            </TableHead>\n            <TableHead data-testid=\"table-header-gender\">Gender</TableHead>\n            <TableHead data-testid=\"table-header-size\">Size</TableHead>\n            <TableHead data-testid=\"table-header-weight\">Weight (lbs)</TableHead>\n            <TableHead className=\"text-right\" data-testid=\"table-header-actions\">Actions</TableHead>\n          </TableRow>\n        </TableHeader>\n        <TableBody>\n          {dogs.map((dog) => (\n            <DogTableRow key={dog.id} dog={dog} />\n          ))}\n        </TableBody>\n      </Table>\n        {dogs.length === 0 && (\n          <p className=\"text-center text-muted-foreground mt-8\">\n            {pagination.totalCount === 0\n              ? \"No dogs in the system. Get started by adding one!\"\n              : \"No dogs match your current filters.\"}\n          </p>\n        )}\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAQA;AACA;AACA;AAAA;AAAA;AAKA;;;;;;;AAgBO,SAAS,SAAS,EACvB,IAAI,EACJ,UAAU,EACV,SAAS,EACT,aAAa,EACb,MAAM,EACQ;IACd,MAAM,cAAc,CAAC;QACnB,MAAM,YAAY,IAAA,0IAAgB,EAAC,OAAO,WAAW;QACrD,IAAI,cAAc,MAAM,qBAAO,6LAAC,0OAAW;YAAC,WAAU;;;;;;QACtD,OAAO,cAAc,sBACnB,6LAAC,0NAAO;YAAC,WAAU;;;;;iCAEnB,6LAAC,gOAAS;YAAC,WAAU;;;;;;IAEzB;IAEA,qBACE;;0BACE,6LAAC,sIAAK;;kCACJ,6LAAC,6IAAY;;4BAAC;4BACgC,GAAG,KAAK,MAAM,CAAC,IAAI,EAAE,WAAW,UAAU,CAAC,KAAK,CAAC;4BAAC;;;;;;;kCAEhG,6LAAC,4IAAW;kCACV,cAAA,6LAAC,yIAAQ;;8CACP,6LAAC,0IAAS;oCAAC,WAAU;oCAAW,eAAY;8CAAqB;;;;;;8CACjE,6LAAC,0IAAS;oCAAC,eAAY;8CACrB,cAAA,6LAAC,wIAAM;wCACL,SAAQ;wCACR,WAAU;wCACV,SAAS,IAAM,OAAO,qIAAW,CAAC,IAAI;;4CACvC;4CACO,YAAY,qIAAW,CAAC,IAAI;;;;;;;;;;;;8CAGtC,6LAAC,0IAAS;oCAAC,eAAY;8CACrB,cAAA,6LAAC,wIAAM;wCACL,SAAQ;wCACR,WAAU;wCACV,SAAS,IAAM,OAAO,qIAAW,CAAC,MAAM;;4CACzC;4CACS,YAAY,qIAAW,CAAC,MAAM;;;;;;;;;;;;8CAG1C,6LAAC,0IAAS;oCAAC,eAAY;8CAAsB;;;;;;8CAC7C,6LAAC,0IAAS;oCAAC,eAAY;8CACrB,cAAA,6LAAC,wIAAM;wCACL,SAAQ;wCACR,WAAU;wCACV,SAAS,IAAM,OAAO,qIAAW,CAAC,KAAK;;4CACxC;4CACQ,YAAY,qIAAW,CAAC,KAAK;;;;;;;;;;;;8CAGxC,6LAAC,0IAAS;oCAAC,eAAY;8CACrB,cAAA,6LAAC,wIAAM;wCACL,SAAQ;wCACR,WAAU;wCACV,SAAS,IAAM,OAAO,qIAAW,CAAC,GAAG;;4CACtC;4CACM,YAAY,qIAAW,CAAC,GAAG;;;;;;;;;;;;8CAGpC,6LAAC,0IAAS;oCAAC,eAAY;8CAAsB;;;;;;8CAC7C,6LAAC,0IAAS;oCAAC,eAAY;8CAAoB;;;;;;8CAC3C,6LAAC,0IAAS;oCAAC,eAAY;8CAAsB;;;;;;8CAC7C,6LAAC,0IAAS;oCAAC,WAAU;oCAAa,eAAY;8CAAuB;;;;;;;;;;;;;;;;;kCAGzE,6LAAC,0IAAS;kCACP,KAAK,GAAG,CAAC,CAAC,oBACT,6LAAC,qKAAW;gCAAc,KAAK;+BAAb,IAAI,EAAE;;;;;;;;;;;;;;;;YAI3B,KAAK,MAAM,KAAK,mBACf,6LAAC;gBAAE,WAAU;0BACV,WAAW,UAAU,KAAK,IACvB,sDACA;;;;;;;;AAKhB;KApFgB","debugId":null}},
    {"offset": {"line": 2507, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/lib/url-pagination-client.ts"],"sourcesContent":["\"use client\";\n\n/**\n * Client-side URL pagination utilities\n */\n\nimport { useRouter, usePathname, useSearchParams } from \"next/navigation\";\nimport { useTransition } from \"react\";\n\nexport const PAGINATION_PARAMS = {\n  PAGE: \"page\",\n} as const;\n\n/**\n * Hook for managing URL-based pagination\n * Provides consistent pagination behavior across the application\n */\nexport function useUrlPagination() {\n  const router = useRouter();\n  const pathname = usePathname();\n  const searchParams = useSearchParams();\n  const [isPending, startTransition] = useTransition();\n\n  const handlePageChange = (page: number) => {\n    const params = new URLSearchParams(searchParams.toString());\n\n    if (page === 1) {\n      params.delete(PAGINATION_PARAMS.PAGE);\n    } else {\n      params.set(PAGINATION_PARAMS.PAGE, page.toString());\n    }\n\n    const query = params.toString();\n    startTransition(() => {\n      router.push(query.length > 0 ? `${pathname}?${query}` : pathname);\n    });\n  };\n\n  return {\n    handlePageChange,\n    isPending,\n  };\n}\n"],"names":[],"mappings":";;;;;;AAEA;;CAEC,GAED;AACA;;AAPA;;;AASO,MAAM,oBAAoB;IAC/B,MAAM;AACR;AAMO,SAAS;;IACd,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,eAAe,IAAA,wJAAe;IACpC,MAAM,CAAC,WAAW,gBAAgB,GAAG,IAAA,8KAAa;IAElD,MAAM,mBAAmB,CAAC;QACxB,MAAM,SAAS,IAAI,gBAAgB,aAAa,QAAQ;QAExD,IAAI,SAAS,GAAG;YACd,OAAO,MAAM,CAAC,kBAAkB,IAAI;QACtC,OAAO;YACL,OAAO,GAAG,CAAC,kBAAkB,IAAI,EAAE,KAAK,QAAQ;QAClD;QAEA,MAAM,QAAQ,OAAO,QAAQ;QAC7B,gBAAgB;YACd,OAAO,IAAI,CAAC,MAAM,MAAM,GAAG,IAAI,GAAG,SAAS,CAAC,EAAE,OAAO,GAAG;QAC1D;IACF;IAEA,OAAO;QACL;QACA;IACF;AACF;GAzBgB;;QACC,kJAAS;QACP,oJAAW;QACP,wJAAe;QACC,8KAAa","debugId":null}},
    {"offset": {"line": 2562, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/app/adopt/_components/AdoptPagination.tsx"],"sourcesContent":["\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { useUrlPagination } from \"@/lib/url-pagination-client\";\n\ninterface AdoptPaginationProps {\n  currentPage: number;\n  totalPages: number;\n  hasNextPage: boolean;\n  hasPrevPage: boolean;\n}\n\nexport default function AdoptPagination({\n  currentPage,\n  totalPages,\n  hasNextPage,\n  hasPrevPage,\n}: AdoptPaginationProps) {\n  const { handlePageChange, isPending } = useUrlPagination();\n\n  return (\n    <div className=\"flex items-center justify-center gap-4 mt-8\" data-testid=\"pagination\">\n      <Button\n        variant=\"outline\"\n        onClick={() => handlePageChange(currentPage - 1)}\n        disabled={!hasPrevPage || isPending}\n        aria-label=\"Previous page\"\n      >\n        <ChevronLeft className=\"h-4 w-4 mr-1\" />\n        Previous\n      </Button>\n\n      <span className=\"text-sm text-muted-foreground\">\n        Page {currentPage} of {totalPages}\n      </span>\n\n      <Button\n        variant=\"outline\"\n        onClick={() => handlePageChange(currentPage + 1)}\n        disabled={!hasNextPage || isPending}\n        aria-label=\"Next page\"\n      >\n        Next\n        <ChevronRight className=\"h-4 w-4 ml-1\" />\n      </Button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;;;AAJA;;;;AAae,SAAS,gBAAgB,EACtC,WAAW,EACX,UAAU,EACV,WAAW,EACX,WAAW,EACU;;IACrB,MAAM,EAAE,gBAAgB,EAAE,SAAS,EAAE,GAAG,IAAA,yJAAgB;IAExD,qBACE,6LAAC;QAAI,WAAU;QAA8C,eAAY;;0BACvE,6LAAC,wIAAM;gBACL,SAAQ;gBACR,SAAS,IAAM,iBAAiB,cAAc;gBAC9C,UAAU,CAAC,eAAe;gBAC1B,cAAW;;kCAEX,6LAAC,sOAAW;wBAAC,WAAU;;;;;;oBAAiB;;;;;;;0BAI1C,6LAAC;gBAAK,WAAU;;oBAAgC;oBACxC;oBAAY;oBAAK;;;;;;;0BAGzB,6LAAC,wIAAM;gBACL,SAAQ;gBACR,SAAS,IAAM,iBAAiB,cAAc;gBAC9C,UAAU,CAAC,eAAe;gBAC1B,cAAW;;oBACZ;kCAEC,6LAAC,yOAAY;wBAAC,WAAU;;;;;;;;;;;;;;;;;;AAIhC;GAnCwB;;QAMkB,yJAAgB;;;KANlC","debugId":null}},
    {"offset": {"line": 2659, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/app/admin/dogs/_components/DogTableClient.tsx"],"sourcesContent":["\"use client\";\n\nimport { useSearchParams, useRouter } from \"next/navigation\";\nimport { DogTable } from \"./DogTable\";\nimport AdoptPagination from \"@/app/adopt/_components/AdoptPagination\";\nimport {\n  SortField,\n  getNextSortDirection,\n  parseDogTableSort,\n  updateDogTableSortInUrl\n} from \"@/lib/dog-table\";\nimport { DogListItem, PaginationMeta } from \"@/lib/types\";\n\ninterface DogTableClientProps {\n  dogs: DogListItem[];\n  pagination: PaginationMeta;\n}\n\nexport function DogTableClient({ dogs, pagination }: DogTableClientProps) {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n\n  // Get sort values from URL using typed helper\n  const { sortField, sortDirection } = parseDogTableSort(searchParams);\n\n  const handleSort = (field: SortField) => {\n    const newSortDirection = getNextSortDirection(sortField, sortDirection, field);\n    updateDogTableSortInUrl(router, \"\", searchParams, {\n      sortField: field,\n      sortDirection: newSortDirection\n    });\n  };\n\n  return (\n    <>\n      <DogTable\n        dogs={dogs}\n        pagination={pagination}\n        sortField={sortField}\n        sortDirection={sortDirection}\n        onSort={handleSort}\n      />\n      <AdoptPagination\n        currentPage={pagination.currentPage}\n        totalPages={pagination.totalPages}\n        hasNextPage={pagination.hasNextPage}\n        hasPrevPage={pagination.hasPreviousPage}\n      />\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAkBO,SAAS,eAAe,EAAE,IAAI,EAAE,UAAU,EAAuB;;IACtE,MAAM,eAAe,IAAA,wJAAe;IACpC,MAAM,SAAS,IAAA,kJAAS;IAExB,8CAA8C;IAC9C,MAAM,EAAE,SAAS,EAAE,aAAa,EAAE,GAAG,IAAA,2IAAiB,EAAC;IAEvD,MAAM,aAAa,CAAC;QAClB,MAAM,mBAAmB,IAAA,8IAAoB,EAAC,WAAW,eAAe;QACxE,IAAA,iJAAuB,EAAC,QAAQ,IAAI,cAAc;YAChD,WAAW;YACX,eAAe;QACjB;IACF;IAEA,qBACE;;0BACE,6LAAC,+JAAQ;gBACP,MAAM;gBACN,YAAY;gBACZ,WAAW;gBACX,eAAe;gBACf,QAAQ;;;;;;0BAEV,6LAAC,6JAAe;gBACd,aAAa,WAAW,WAAW;gBACnC,YAAY,WAAW,UAAU;gBACjC,aAAa,WAAW,WAAW;gBACnC,aAAa,WAAW,eAAe;;;;;;;;AAI/C;GAhCgB;;QACO,wJAAe;QACrB,kJAAS;;;KAFV","debugId":null}},
    {"offset": {"line": 2730, "column": 0}, "map": {"version":3,"sources":["file:///Users/adampeterson/Github/mutts/app/admin/dogs/AdminDogsClient.tsx"],"sourcesContent":["\"use client\";\nimport { Button } from \"@/components/ui/button\";\nimport Link from \"next/link\";\nimport { PlusCircle } from \"lucide-react\";\nimport { RouteReady } from \"@/components/testing/RouteReady\";\nimport { DogFilters } from \"./_components/DogFilters\";\nimport { DogTableClient } from \"./_components/DogTableClient\";\nimport { DogStatus, Gender, DogSize } from \"@prisma/client\";\nimport { DogListItem, PaginationMeta } from \"@/lib/types\";\n\ntype FosterProfile = {\n  id: string;\n  name: string | null;\n  email: string;\n};\n\ninterface AdminDogsClientProps {\n  fosters: FosterProfile[];\n  uniqueGenders: Gender[];\n  uniqueSizes: DogSize[];\n  uniqueBreeds: string[];\n  uniqueStatuses: DogStatus[];\n  dogs: DogListItem[];\n  pagination: PaginationMeta;\n}\n\nexport default function AdminDogsClient({\n  fosters,\n  uniqueGenders,\n  uniqueSizes,\n  uniqueBreeds,\n  uniqueStatuses,\n  dogs,\n  pagination,\n}: AdminDogsClientProps) {\n  return (\n    <div className=\"flex-1 w-full flex flex-col items-center p-8\">\n      <div className=\"w-full max-w-6xl\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h1 className=\"text-3xl font-bold\" data-testid=\"page-title\">Manage Dogs</h1>\n          <Button asChild>\n            <Link href=\"/admin/add-dog\">\n              <PlusCircle className=\"mr-2 h-4 w-4\" /> Add New Dog\n            </Link>\n          </Button>\n        </div>\n\n        {process.env.NEXT_PUBLIC_E2E === \"true\" && (\n          <RouteReady route=\"admin/dogs\" />\n        )}\n\n        <DogFilters\n          fosters={fosters}\n          uniqueGenders={uniqueGenders}\n          uniqueSizes={uniqueSizes}\n          uniqueBreeds={uniqueBreeds}\n          uniqueStatuses={uniqueStatuses}\n        />\n\n        <DogTableClient dogs={dogs} pagination={pagination} />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AA+CS;;AA9CT;AACA;AACA;AACA;AACA;AACA;AANA;;;;;;;;AA0Be,SAAS,gBAAgB,EACtC,OAAO,EACP,aAAa,EACb,WAAW,EACX,YAAY,EACZ,cAAc,EACd,IAAI,EACJ,UAAU,EACW;IACrB,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;4BAAqB,eAAY;sCAAa;;;;;;sCAC5D,6LAAC,wIAAM;4BAAC,OAAO;sCACb,cAAA,6LAAC,0KAAI;gCAAC,MAAK;;kDACT,6LAAC,mOAAU;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;gBAK5C,2KAAO,CAAC,GAAG,CAAC,eAAe,KAAK,wBAC/B,6LAAC,qJAAU;oBAAC,OAAM;;;;;;8BAGpB,6LAAC,mKAAU;oBACT,SAAS;oBACT,eAAe;oBACf,aAAa;oBACb,cAAc;oBACd,gBAAgB;;;;;;8BAGlB,6LAAC,2KAAc;oBAAC,MAAM;oBAAM,YAAY;;;;;;;;;;;;;;;;;AAIhD;KArCwB","debugId":null}}]
}